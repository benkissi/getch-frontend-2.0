{"version":3,"file":"static/webpack/static/development/pages/_app.js.e24431558831d5af1664.hot-update.js","sources":["webpack:///./api/api.js"],"sourcesContent":["import axios from \"axios\";\nimport endpoints from \"./endpoints\";\nimport { splitArray } from \"../utils/search\";\n\nexport const signUp = async (email, password) => {\n  console.log(\"getting\", email, password);\n  const url = endpoints.SIGN_UP;\n  const data = {\n    email,\n    password,\n  };\n\n  const res = await axios.post(url, data);\n  const token = res.headers[\"x-auth\"].replace(\"Bearer \", \"\");\n  res.data[\"xToken\"] = token;\n  return res.data;\n};\n\nexport const signIn = async (email, password) => {\n  console.log(\"sign in api\");\n  const url = endpoints.SIGN_IN;\n  const params = {\n    email,\n    password,\n  };\n  console.log(\"api\", params);\n\n  const res = await axios.get(url, {\n    params,\n  });\n  const token = res.headers[\"x-auth\"].replace(\"Bearer \", \"\");\n  res.data[\"xToken\"] = token;\n  return res.data;\n};\n\nexport const fbAuthentication = async (token, id, fbId, name) => {\n  console.log(\"name api\", name);\n  const url = endpoints.FB_AUTH;\n  const params = {\n    token,\n    id,\n    fbId,\n    name,\n  };\n\n  const res = await axios.get(url, {\n    params,\n  });\n\n  console.log(\"res data\", res.data);\n\n  return res.data;\n};\n\nexport const searchInterest = async (token, keyword, limit = 500) => {\n  const url = endpoints.FB_INTEREST_SEARCH(2.11);\n  const params = {\n    q: keyword,\n    type: \"adinterest\",\n    access_token: token,\n    limit,\n  };\n  const res = await axios.get(url, {\n    params,\n  });\n  return res.data;\n};\n\nexport const getInterestSuggestions = async (token, keywords, limit = 100) => {\n  let interestSuggestions = [];\n  let response;\n  const url = endpoints.FB_INTEREST_SEARCH(2.11);\n  const params = {\n    interest_list: keywords,\n    type: \"adinterestsuggestion\",\n    access_token: token,\n    limit: limit,\n  };\n  response = await axios.get(url, {\n    params,\n  });\n  interestSuggestions.push(...response.data.data);\n  let page = 0;\n  while (response.data.paging.next) {\n    if (page > 5) {\n      break;\n    }\n    response = await axios.get(response.data.paging.next);\n    interestSuggestions.push(...response.data.data);\n    page++;\n  }\n  return interestSuggestions;\n};\n\nexport const compileInterestSuggestions = async (\n  token,\n  keywords,\n  limit = 100\n) => {\n  if (keywords.length > 200) {\n    let suggestions = [];\n    const dataArray = splitArray(keywords, 200);\n    for (let i = 0; i < dataArray.length; i++) {\n      suggestions.push(\n        ...(await getInterestSuggestions(token, dataArray[i], limit))\n      );\n    }\n    return suggestions;\n  }\n\n  return await getInterestSuggestions(token, keywords, limit);\n};\n\nexport const getProducts = async (shopName) => {\n  const url = endpoints.GET_PRODUCTS(shopName);\n  const params = {\n    limit: 10,\n  };\n  const res = await axios.get(url, {\n    params,\n  });\n\n  console.log(res.data);\n};\n\nexport const getAdAccounts = async (fbId, token) => {\n  const url = endpoints.GET_ADACCOUNTS(fbId);\n\n  const headers = {\n    Authorization: token,\n  };\n\n  const params = {\n    fbId,\n  };\n\n  const res = await axios.get(url, {\n    headers,\n    params,\n  });\n\n  return res.data;\n};\n\nexport const fbPaginate = async (page) => {\n  const res = await axios.get(page);\n  return res.data;\n};\n\nexport const getCampaigns = async (accountId, token) => {\n  const url = endpoints.GET_CAMPAIGNS(accountId);\n\n  const headers = {\n    Authorization: token,\n  };\n\n  const res = await axios.get(url, {\n    headers,\n  });\n\n  return res.data;\n};\n\nexport const getAdsets = async (camaignId, token) => {\n  const url = endpoints.GET_ADSETS(camaignId);\n\n  const headers = {\n    Authorization: token,\n  };\n\n  const res = await axios.get(url, {\n    headers,\n  });\n\n  return res.data;\n};\n\nexport const getAds = async (adsetId, token) => {\n  const url = endpoints.GET_ADS(adsetId);\n\n  const headers = {\n    Authorization: token,\n  };\n\n  const res = await axios.get(url, {\n    headers,\n  });\n\n  return res.data;\n};\n\nexport const getInterestStats = async (adId, token) => {\n  const url = endpoints.GET_STATS(adId);\n\n  const headers = {\n    Authorization: token,\n  };\n\n  const res = await axios.get(url, {\n    headers,\n  });\n\n  return res.data;\n};\n\nexport const userLogout = async (token) => {\n  const url = endpoints.LOG_OUT;\n\n  const headers = {\n    Authorization: token,\n  };\n\n  const res = await axios.get(url, {\n    headers,\n  });\n\n  console.log(\"res\", res);\n\n  return res.data;\n};\n\nexport const updateSearchCount = async (token) => {\n  const url = endpoints.UPDATE_SEARCH_COUNT;\n\n  const headers = {\n    Authorization: token,\n  };\n\n  const res = await axios.get(url, { headers });\n  console.log(\"count\", res);\n  return res.data;\n};\n\nexport const verifyPayment = async (token, plan, ref) => {\n  const url = endpoints.VERIFY_PAYMENT;\n\n  const headers = {\n    Authorization: token,\n  };\n\n  const data = {\n    plan,\n    ref,\n  };\n\n  const res = await axios.post(url, data, { headers });\n  console.log(\"api\", res.data);\n  return res.data;\n};\n"],"mappings":"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","sourceRoot":""}