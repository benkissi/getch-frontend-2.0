webpackHotUpdate("static/development/pages/index.js",{

/***/ "./pages/index.js":
/*!************************!*\
  !*** ./pages/index.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/lib/button/style */ "./node_modules/antd/lib/button/style/index.js");
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/lib/button */ "./node_modules/antd/lib/button/index.js");
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd_lib_slider_style__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd/lib/slider/style */ "./node_modules/antd/lib/slider/style/index.js");
/* harmony import */ var antd_lib_slider_style__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd_lib_slider_style__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var antd_lib_slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! antd/lib/slider */ "./node_modules/antd/lib/slider/index.js");
/* harmony import */ var antd_lib_slider__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(antd_lib_slider__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var antd_lib_input_style__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd/lib/input/style */ "./node_modules/antd/lib/input/style/index.js");
/* harmony import */ var antd_lib_input_style__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd_lib_input_style__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd/lib/input */ "./node_modules/antd/lib/input/index.js");
/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(antd_lib_input__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! styled-jsx/style */ "./node_modules/styled-jsx/style.js");
/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/router */ "./node_modules/next/dist/client/router.js");
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var export_to_csv__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! export-to-csv */ "./node_modules/export-to-csv/build/index.js");
/* harmony import */ var export_to_csv__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(export_to_csv__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-toastify */ "./node_modules/react-toastify/esm/react-toastify.js");
/* harmony import */ var react_loader_spinner__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-loader-spinner */ "./node_modules/react-loader-spinner/index.js");
/* harmony import */ var react_loader_spinner__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_loader_spinner__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _components_dashboardLayout__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../components/dashboardLayout */ "./components/dashboardLayout.js");
/* harmony import */ var _components_table__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../components/table */ "./components/table.js");
/* harmony import */ var _utils_table__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utils/table */ "./utils/table.js");
/* harmony import */ var _utils_auth__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../utils/auth */ "./utils/auth.js");
/* harmony import */ var _redux_user_user_actions__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../redux/user/user-actions */ "./redux/user/user-actions.js");
/* harmony import */ var _redux_search_search_actions__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../redux/search/search-actions */ "./redux/search/search-actions.js");
/* harmony import */ var react_loader_spinner_dist_loader_css_react_spinner_loader_css__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! react-loader-spinner/dist/loader/css/react-spinner-loader.css */ "./node_modules/react-loader-spinner/dist/loader/css/react-spinner-loader.css");
/* harmony import */ var react_loader_spinner_dist_loader_css_react_spinner_loader_css__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(react_loader_spinner_dist_loader_css_react_spinner_loader_css__WEBPACK_IMPORTED_MODULE_21__);









var _this = undefined,
    _jsxFileName = "/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js";



var __jsx = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }
















var Index = function Index(props) {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_9__["useState"])({
    selectedInterest: [],
    min: null,
    max: null
  }),
      state = _useState[0],
      setState = _useState[1];

  var token = props.token,
      user = props.user,
      addUser = props.addUser,
      fbToken = props.fbToken,
      interestData = props.interestData,
      searchInterest = props.searchInterest,
      keyword = props.keyword,
      interestCount = props.interestCount,
      searching = props.searching,
      searchCount = props.searchCount;
  var Search = antd_lib_input__WEBPACK_IMPORTED_MODULE_7___default.a.Search;
  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_10__["useRouter"])();
  Object(react__WEBPACK_IMPORTED_MODULE_9__["useEffect"])(function () {
    if (token) {
      var decoded = Object(_utils_auth__WEBPACK_IMPORTED_MODULE_18__["default"])(token);
      var _id = decoded._id,
          name = decoded.name,
          email = decoded.email,
          domain = decoded.domain;
      var userData = {
        id: _id,
        name: name,
        email: email,
        domain: domain,
        xToken: token
      };
      addUser(userData);
    } else if (user) {
      console.log(user);
    } else {
      router.push("/signup");
    }
  }, []);
  Object(react__WEBPACK_IMPORTED_MODULE_9__["useEffect"])(function () {
    if (interestData && interestCount) {
      var _max = Math.max.apply(Math, interestData.map(function (item) {
        return item["audience_size"];
      }));

      var _min = Math.min.apply(Math, interestData.map(function (item) {
        return item["audience_size"];
      }));

      setState(_objectSpread({}, state, {
        max: _max,
        min: _min,
        interests: interestData,
        interestNumber: interestCount
      }));
    }
  }, [interestData, interestCount]);

  var getInterest = function getInterest(value) {
    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.async(function getInterest$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!(searchCount >= 3 && user.plan === "PL001")) {
              _context.next = 3;
              break;
            }

            next_router__WEBPACK_IMPORTED_MODULE_10___default.a.push("/plans");
            return _context.abrupt("return");

          case 3:
            _context.next = 5;
            return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.awrap(searchInterest(fbToken.token, value, 500, user.xToken));

          case 5:
          case "end":
            return _context.stop();
        }
      }
    }, null, null, null, Promise);
  };

  var onSelectionChange = function onSelectionChange(selectedRowKeys, selectedRows) {
    console.log("rows", selectedRows);
    var selectedInterest = selectedRows.map(function (interest) {
      return interest.name;
    });
    setState(_objectSpread({}, state, {
      selectedRowKeys: selectedRowKeys,
      selectedInterest: selectedInterest,
      selectedRows: selectedRows
    }));
  };

  var onCopy = function onCopy() {
    var selectedInterest = state.selectedInterest;
    console.log("copy", selectedInterest);

    if (selectedInterest.length) {
      navigator.clipboard.writeText(selectedInterest).then(function () {
        console.log("you copied", selectedInterest.length);
        react_toastify__WEBPACK_IMPORTED_MODULE_13__["toast"].success("You copied ".concat(selectedInterest.length, " items"), {
          position: "top-right",
          autoClose: 5000,
          hideProgressBar: false,
          closeOnClick: true,
          pauseOnHover: true,
          draggable: true
        });
      });
    } else {
      react_toastify__WEBPACK_IMPORTED_MODULE_13__["toast"].error("You have not made any selection", {
        position: "top-right",
        autoClose: 5000,
        hideProgressBar: false,
        closeOnClick: true,
        pauseOnHover: true,
        draggable: true
      });
    }
  };

  var options = {
    fieldSeparator: ",",
    quoteStrings: '"',
    decimalSeparator: ".",
    showLabels: true,
    showTitle: true,
    title: "Interest List",
    useTextFile: false,
    useBom: true,
    useKeysAsHeaders: true
  };
  var csvExporter = new export_to_csv__WEBPACK_IMPORTED_MODULE_12__["ExportToCsv"](options);

  var handleExport = function handleExport() {
    var exportArray;
    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.async(function handleExport$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            if (!interestData) {
              _context2.next = 8;
              break;
            }

            exportArray = [];
            interestData.forEach(function (item) {
              var readyExport = {};
              readyExport.id = item.id;
              readyExport.name = item.name;
              readyExport.audience = item.audience_size;
              readyExport.description = item.description;
              readyExport.topic = item.topic;
              readyExport.path = JSON.stringify(item.path);
              readyExport.score = item.relevance;
              exportArray.push(readyExport);
            });
            _context2.next = 5;
            return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.awrap(csvExporter.generateCsv(exportArray));

          case 5:
            react_toastify__WEBPACK_IMPORTED_MODULE_13__["toast"].success("You downloaded ".concat(interestData.length, " items"), {
              position: "top-right",
              autoClose: 5000,
              hideProgressBar: false,
              closeOnClick: true,
              pauseOnHover: true,
              draggable: true
            });
            _context2.next = 9;
            break;

          case 8:
            react_toastify__WEBPACK_IMPORTED_MODULE_13__["toast"].error("You have not made any selection", {
              position: "top-right",
              autoClose: 3000,
              hideProgressBar: false,
              closeOnClick: true,
              pauseOnHover: true,
              draggable: true
            });

          case 9:
          case "end":
            return _context2.stop();
        }
      }
    }, null, null, null, Promise);
  };

  var onFilterChange = function onFilterChange(value) {
    var filtered = interestData.filter(function (item) {
      return item["audience_size"] >= value[0] && item["audience_size"] <= value[1];
    });
    setState(_objectSpread({}, state, {
      interests: filtered
    }));
  };

  var interests = state.interests,
      selectedRowKeys = state.selectedRowKeys,
      interestNumber = state.interestNumber,
      max = state.max,
      min = state.min;
  return __jsx("div", {
    id: "wrapper",
    className: "jsx-712608997",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 194,
      columnNumber: 5
    }
  }, __jsx("div", {
    id: "main-content",
    className: "jsx-712608997",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 195,
      columnNumber: 7
    }
  }, __jsx("div", {
    className: "jsx-712608997" + " " + "top",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 196,
      columnNumber: 9
    }
  }, __jsx("div", {
    className: "jsx-712608997" + " " + "inner",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 197,
      columnNumber: 11
    }
  }, __jsx(Search, {
    placeholder: "Find Facebook interest for a keyword",
    enterButton: "Getch",
    size: "large",
    onSearch: function onSearch(value) {
      return getInterest(value);
    },
    className: "jsx-712608997",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 198,
      columnNumber: 13
    }
  }), __jsx("div", {
    className: "jsx-712608997" + " " + "controls",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 204,
      columnNumber: 13
    }
  }, __jsx("div", {
    className: "jsx-712608997",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 205,
      columnNumber: 15
    }
  }, interestNumber ? __jsx("p", {
    className: "jsx-712608997",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 207,
      columnNumber: 19
    }
  }, __jsx("b", {
    className: "jsx-712608997",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 208,
      columnNumber: 21
    }
  }, interestNumber), " interest found for \"", keyword, "\"") : ""), __jsx("div", {
    className: "jsx-712608997" + " " + "filter",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 214,
      columnNumber: 15
    }
  }, __jsx("p", {
    className: "jsx-712608997",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 215,
      columnNumber: 17
    }
  }, "Filter audience"), __jsx(antd_lib_slider__WEBPACK_IMPORTED_MODULE_3___default.a, {
    max: max,
    min: min,
    range: true,
    defaultValue: [min, max],
    onAfterChange: onFilterChange,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 216,
      columnNumber: 17
    }
  })), __jsx("div", {
    className: "jsx-712608997" + " " + "actions",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 224,
      columnNumber: 15
    }
  }, __jsx("div", {
    className: "jsx-712608997" + " " + "button",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 225,
      columnNumber: 17
    }
  }, __jsx(antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default.a, {
    onClick: onCopy,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 226,
      columnNumber: 19
    }
  }, "Copy")), __jsx("div", {
    className: "jsx-712608997" + " " + "button",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 228,
      columnNumber: 17
    }
  }, __jsx(antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default.a, {
    onClick: handleExport,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 229,
      columnNumber: 19
    }
  }, "Download as CSV")))))), __jsx("div", {
    id: "table",
    className: "jsx-712608997",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 245,
      columnNumber: 9
    }
  }, searching ? __jsx("div", {
    className: "jsx-712608997" + " " + "loader",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 247,
      columnNumber: 13
    }
  }, __jsx(react_loader_spinner__WEBPACK_IMPORTED_MODULE_14___default.a, {
    type: "Bars",
    color: "#4e54c8",
    height: 100,
    width: 100,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 248,
      columnNumber: 15
    }
  })) : __jsx(_components_table__WEBPACK_IMPORTED_MODULE_16__["default"], {
    onSelection: onSelectionChange,
    selectedRowKeys: selectedRowKeys,
    className: "table",
    columns: _utils_table__WEBPACK_IMPORTED_MODULE_17__["tableColumns"],
    dataSource: interests,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 251,
      columnNumber: 13
    }
  }))), __jsx(styled_jsx_style__WEBPACK_IMPORTED_MODULE_8___default.a, {
    id: "712608997",
    __self: _this
  }, "#wrapper.jsx-712608997{margin:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}#main-content.jsx-712608997{margin-top:30px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}#table.jsx-712608997{margin-top:90px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.controls.jsx-712608997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.actions.jsx-712608997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.actions.jsx-712608997>*.jsx-712608997{margin-left:5px;}.loader.jsx-712608997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:500px;}.divider.jsx-712608997{height:35px;width:0;border-left:1px solid #ccc;margin:0 0 0 5px;}.filter.jsx-712608997{width:30%;}.top.jsx-712608997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;height:130px;margin-bottom:20px;width:100%;background-color:white;}.inner.jsx-712608997{position:fixed;top:70px;width:81%;background-color:white;z-index:100;height:200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.header.jsx-712608997{margin-bottom:20px;}.links{margin-right:15px;}.links img{width:20px;}@media screen and (max-width:480px){}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Jlbmtpc3NpL3Byb2plY3RzL2dldGNoL2dldGNoLWZyb250ZW5kLTIuMC9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxUWtCLEFBR3VCLEFBTUksQUFJQSxBQUtILEFBTUEsQUFJRyxBQUdILEFBTUQsQUFPRixBQUlHLEFBV0UsQUFZSSxBQUlELEFBSVAsVUFsQ2IsQ0FtQ0EsQ0E1RWUsQUFrQ0wsR0FzQkMsQ0FsREcsQUFJQSxBQWVkLEVBK0NBLENBSkEsQ0FqQzZCLElBc0JqQixVQUNhLGFBdEJOLFVBdUJMLE9BdEJkLEtBdUJlLEtBN0NHLEFBTWxCLEFBT3lCLEFBaUJBLFFBZ0JWLElBNURTLENBTXhCLEFBSUEsR0FLZ0Msa0VBOENQLFFBNURYLFNBMkJPLEFBaUJBLEdBM0NyQiw2QkFjQSxrREE4Q3dCLFdBakNULEFBaUJLLGFBaEJwQixLQWlCZSxhQUNNLG1CQUNSLFdBQ1ksTUFhekIsaUJBWkEiLCJmaWxlIjoiL2hvbWUvYmVua2lzc2kvcHJvamVjdHMvZ2V0Y2gvZ2V0Y2gtZnJvbnRlbmQtMi4wL3BhZ2VzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUm91dGVyIGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuaW1wb3J0IHsgQnV0dG9uLCBJbnB1dCwgU2xpZGVyIH0gZnJvbSBcImFudGRcIjtcbmltcG9ydCB7IEV4cG9ydFRvQ3N2IH0gZnJvbSBcImV4cG9ydC10by1jc3ZcIjtcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSBcInJlYWN0LXRvYXN0aWZ5XCI7XG5pbXBvcnQgTG9hZGVyIGZyb20gXCJyZWFjdC1sb2FkZXItc3Bpbm5lclwiO1xuXG5pbXBvcnQgRGFzaGJvYXJkTGF5b3V0IGZyb20gXCIuLi9jb21wb25lbnRzL2Rhc2hib2FyZExheW91dFwiO1xuaW1wb3J0IEludGVyZXN0VGFibGUgZnJvbSBcIi4uL2NvbXBvbmVudHMvdGFibGVcIjtcblxuaW1wb3J0IHsgdGFibGVDb2x1bW5zIH0gZnJvbSBcIi4uL3V0aWxzL3RhYmxlXCI7XG5cbmltcG9ydCBkZWNvZGVUb2tlbiBmcm9tIFwiLi4vdXRpbHMvYXV0aFwiO1xuaW1wb3J0IHsgYWRkaW5nQ3VycmVudFVzZXIgfSBmcm9tIFwiLi4vcmVkdXgvdXNlci91c2VyLWFjdGlvbnNcIjtcbmltcG9ydCB7IHNlYXJjaFN0YXJ0IH0gZnJvbSBcIi4uL3JlZHV4L3NlYXJjaC9zZWFyY2gtYWN0aW9uc1wiO1xuXG5pbXBvcnQgXCJyZWFjdC1sb2FkZXItc3Bpbm5lci9kaXN0L2xvYWRlci9jc3MvcmVhY3Qtc3Bpbm5lci1sb2FkZXIuY3NzXCI7XG5cbmNvbnN0IEluZGV4ID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIHNlbGVjdGVkSW50ZXJlc3Q6IFtdLFxuICAgIG1pbjogbnVsbCxcbiAgICBtYXg6IG51bGwsXG4gIH0pO1xuICBjb25zdCB7XG4gICAgdG9rZW4sXG4gICAgdXNlcixcbiAgICBhZGRVc2VyLFxuICAgIGZiVG9rZW4sXG4gICAgaW50ZXJlc3REYXRhLFxuICAgIHNlYXJjaEludGVyZXN0LFxuICAgIGtleXdvcmQsXG4gICAgaW50ZXJlc3RDb3VudCxcbiAgICBzZWFyY2hpbmcsXG4gICAgc2VhcmNoQ291bnQsXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgeyBTZWFyY2ggfSA9IElucHV0O1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0b2tlbikge1xuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZVRva2VuKHRva2VuKTtcbiAgICAgIGNvbnN0IHsgX2lkLCBuYW1lLCBlbWFpbCwgZG9tYWluIH0gPSBkZWNvZGVkO1xuICAgICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICAgIGlkOiBfaWQsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBkb21haW4sXG4gICAgICAgIHhUb2tlbjogdG9rZW4sXG4gICAgICB9O1xuICAgICAgYWRkVXNlcih1c2VyRGF0YSk7XG4gICAgfSBlbHNlIGlmICh1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZyh1c2VyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm91dGVyLnB1c2goXCIvc2lnbnVwXCIpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGludGVyZXN0RGF0YSAmJiBpbnRlcmVzdENvdW50KSB7XG4gICAgICBjb25zdCBtYXggPSBNYXRoLm1heC5hcHBseShcbiAgICAgICAgTWF0aCxcbiAgICAgICAgaW50ZXJlc3REYXRhLm1hcCgoaXRlbSkgPT4gaXRlbVtcImF1ZGllbmNlX3NpemVcIl0pXG4gICAgICApO1xuICAgICAgY29uc3QgbWluID0gTWF0aC5taW4uYXBwbHkoXG4gICAgICAgIE1hdGgsXG4gICAgICAgIGludGVyZXN0RGF0YS5tYXAoKGl0ZW0pID0+IGl0ZW1bXCJhdWRpZW5jZV9zaXplXCJdKVxuICAgICAgKTtcblxuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgbWF4OiBtYXgsXG4gICAgICAgIG1pbjogbWluLFxuICAgICAgICBpbnRlcmVzdHM6IGludGVyZXN0RGF0YSxcbiAgICAgICAgaW50ZXJlc3ROdW1iZXI6IGludGVyZXN0Q291bnQsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtpbnRlcmVzdERhdGEsIGludGVyZXN0Q291bnRdKTtcblxuICBjb25zdCBnZXRJbnRlcmVzdCA9IGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgIGlmIChzZWFyY2hDb3VudCA+PSAzICYmIHVzZXIucGxhbiA9PT0gXCJQTDAwMVwiKSB7XG4gICAgICBSb3V0ZXIucHVzaChcIi9wbGFuc1wiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgc2VhcmNoSW50ZXJlc3QoZmJUb2tlbi50b2tlbiwgdmFsdWUsIDUwMCwgdXNlci54VG9rZW4pO1xuICB9O1xuXG4gIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gKHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJyb3dzXCIsIHNlbGVjdGVkUm93cyk7XG4gICAgY29uc3Qgc2VsZWN0ZWRJbnRlcmVzdCA9IHNlbGVjdGVkUm93cy5tYXAoKGludGVyZXN0KSA9PiB7XG4gICAgICByZXR1cm4gaW50ZXJlc3QubmFtZTtcbiAgICB9KTtcbiAgICBzZXRTdGF0ZSh7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHNlbGVjdGVkUm93S2V5cyxcbiAgICAgIHNlbGVjdGVkSW50ZXJlc3QsXG4gICAgICBzZWxlY3RlZFJvd3MsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgb25Db3B5ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgc2VsZWN0ZWRJbnRlcmVzdCB9ID0gc3RhdGU7XG4gICAgY29uc29sZS5sb2coXCJjb3B5XCIsIHNlbGVjdGVkSW50ZXJlc3QpO1xuICAgIGlmIChzZWxlY3RlZEludGVyZXN0Lmxlbmd0aCkge1xuICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc2VsZWN0ZWRJbnRlcmVzdCkudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwieW91IGNvcGllZFwiLCBzZWxlY3RlZEludGVyZXN0Lmxlbmd0aCk7XG5cbiAgICAgICAgdG9hc3Quc3VjY2VzcyhgWW91IGNvcGllZCAke3NlbGVjdGVkSW50ZXJlc3QubGVuZ3RofSBpdGVtc2AsIHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgICAgaGlkZVByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9hc3QuZXJyb3IoYFlvdSBoYXZlIG5vdCBtYWRlIGFueSBzZWxlY3Rpb25gLCB7XG4gICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBmaWVsZFNlcGFyYXRvcjogXCIsXCIsXG4gICAgcXVvdGVTdHJpbmdzOiAnXCInLFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6IFwiLlwiLFxuICAgIHNob3dMYWJlbHM6IHRydWUsXG4gICAgc2hvd1RpdGxlOiB0cnVlLFxuICAgIHRpdGxlOiBcIkludGVyZXN0IExpc3RcIixcbiAgICB1c2VUZXh0RmlsZTogZmFsc2UsXG4gICAgdXNlQm9tOiB0cnVlLFxuICAgIHVzZUtleXNBc0hlYWRlcnM6IHRydWUsXG4gIH07XG4gIGNvbnN0IGNzdkV4cG9ydGVyID0gbmV3IEV4cG9ydFRvQ3N2KG9wdGlvbnMpO1xuXG4gIGNvbnN0IGhhbmRsZUV4cG9ydCA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBjb25zdCB7c2VsZWN0ZWRSb3dzfSA9IHN0YXRlXG4gICAgaWYgKGludGVyZXN0RGF0YSkge1xuICAgICAgbGV0IGV4cG9ydEFycmF5ID0gW107XG4gICAgICBpbnRlcmVzdERhdGEuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBsZXQgcmVhZHlFeHBvcnQgPSB7fTtcbiAgICAgICAgcmVhZHlFeHBvcnQuaWQgPSBpdGVtLmlkO1xuICAgICAgICByZWFkeUV4cG9ydC5uYW1lID0gaXRlbS5uYW1lO1xuICAgICAgICByZWFkeUV4cG9ydC5hdWRpZW5jZSA9IGl0ZW0uYXVkaWVuY2Vfc2l6ZTtcbiAgICAgICAgcmVhZHlFeHBvcnQuZGVzY3JpcHRpb24gPSBpdGVtLmRlc2NyaXB0aW9uO1xuICAgICAgICByZWFkeUV4cG9ydC50b3BpYyA9IGl0ZW0udG9waWM7XG4gICAgICAgIHJlYWR5RXhwb3J0LnBhdGggPSBKU09OLnN0cmluZ2lmeShpdGVtLnBhdGgpO1xuICAgICAgICByZWFkeUV4cG9ydC5zY29yZSA9IGl0ZW0ucmVsZXZhbmNlO1xuICAgICAgICBleHBvcnRBcnJheS5wdXNoKHJlYWR5RXhwb3J0KTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBjc3ZFeHBvcnRlci5nZW5lcmF0ZUNzdihleHBvcnRBcnJheSk7XG4gICAgICB0b2FzdC5zdWNjZXNzKGBZb3UgZG93bmxvYWRlZCAke2ludGVyZXN0RGF0YS5sZW5ndGh9IGl0ZW1zYCwge1xuICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgYXV0b0Nsb3NlOiA1MDAwLFxuICAgICAgICBoaWRlUHJvZ3Jlc3NCYXI6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvYXN0LmVycm9yKGBZb3UgaGF2ZSBub3QgbWFkZSBhbnkgc2VsZWN0aW9uYCwge1xuICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgYXV0b0Nsb3NlOiAzMDAwLFxuICAgICAgICBoaWRlUHJvZ3Jlc3NCYXI6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uRmlsdGVyQ2hhbmdlID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgZmlsdGVyZWQgPSBpbnRlcmVzdERhdGEuZmlsdGVyKFxuICAgICAgKGl0ZW0pID0+XG4gICAgICAgIGl0ZW1bXCJhdWRpZW5jZV9zaXplXCJdID49IHZhbHVlWzBdICYmIGl0ZW1bXCJhdWRpZW5jZV9zaXplXCJdIDw9IHZhbHVlWzFdXG4gICAgKTtcbiAgICBzZXRTdGF0ZSh7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGludGVyZXN0czogZmlsdGVyZWQsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgeyBpbnRlcmVzdHMsIHNlbGVjdGVkUm93S2V5cywgaW50ZXJlc3ROdW1iZXIsIG1heCwgbWluIH0gPSBzdGF0ZTtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGlkPVwid3JhcHBlclwiPlxuICAgICAgPGRpdiBpZD1cIm1haW4tY29udGVudFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvcFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5uZXJcIj5cbiAgICAgICAgICAgIDxTZWFyY2hcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJGaW5kIEZhY2Vib29rIGludGVyZXN0IGZvciBhIGtleXdvcmRcIlxuICAgICAgICAgICAgICBlbnRlckJ1dHRvbj1cIkdldGNoXCJcbiAgICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4gZ2V0SW50ZXJlc3QodmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICB7aW50ZXJlc3ROdW1iZXIgPyAoXG4gICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgPGI+e2ludGVyZXN0TnVtYmVyfTwvYj4gaW50ZXJlc3QgZm91bmQgZm9yIFwie2tleXdvcmR9XCJcbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbHRlclwiPlxuICAgICAgICAgICAgICAgIDxwPkZpbHRlciBhdWRpZW5jZTwvcD5cbiAgICAgICAgICAgICAgICA8U2xpZGVyXG4gICAgICAgICAgICAgICAgICBtYXg9e21heH1cbiAgICAgICAgICAgICAgICAgIG1pbj17bWlufVxuICAgICAgICAgICAgICAgICAgcmFuZ2VcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17W21pbiwgbWF4XX1cbiAgICAgICAgICAgICAgICAgIG9uQWZ0ZXJDaGFuZ2U9e29uRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtvbkNvcHl9PkNvcHk8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVFeHBvcnR9PkRvd25sb2FkIGFzIENTVjwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cImRpdmlkZXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVFeHBvcnR9PlNhdmUgYXMgcHJvamVjdDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIGNvbG9yPVwiIzRlNTRjOFwiIG9uQ2xpY2s9e2hhbmRsZUV4cG9ydH0+XG4gICAgICAgICAgICAgICAgICAgIFNhdmUgdG8gRmFjZWJvb2tcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PiAqL31cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBpZD1cInRhYmxlXCI+XG4gICAgICAgICAge3NlYXJjaGluZyA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGVyXCI+XG4gICAgICAgICAgICAgIDxMb2FkZXIgdHlwZT1cIkJhcnNcIiBjb2xvcj1cIiM0ZTU0YzhcIiBoZWlnaHQ9ezEwMH0gd2lkdGg9ezEwMH0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8SW50ZXJlc3RUYWJsZVxuICAgICAgICAgICAgICBvblNlbGVjdGlvbj17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgICAgICAgIHNlbGVjdGVkUm93S2V5cz17c2VsZWN0ZWRSb3dLZXlzfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZVwiXG4gICAgICAgICAgICAgIGNvbHVtbnM9e3RhYmxlQ29sdW1uc31cbiAgICAgICAgICAgICAgZGF0YVNvdXJjZT17aW50ZXJlc3RzfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICN3cmFwcGVyIHtcbiAgICAgICAgICBtYXJnaW46IDEwcHg7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAjbWFpbi1jb250ZW50IHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgfVxuICAgICAgICAjdGFibGUge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDkwcHg7XG4gICAgICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbnRyb2xzIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICB9XG5cbiAgICAgICAgLmFjdGlvbnMge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIH1cblxuICAgICAgICAuYWN0aW9ucyA+ICoge1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLmxvYWRlciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGhlaWdodDogNTAwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLmRpdmlkZXIge1xuICAgICAgICAgIGhlaWdodDogMzVweDtcbiAgICAgICAgICB3aWR0aDogMDtcbiAgICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgbWFyZ2luOiAwIDAgMCA1cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZmlsdGVyIHtcbiAgICAgICAgICB3aWR0aDogMzAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLnRvcCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBoZWlnaHQ6IDEzMHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgIH1cblxuICAgICAgICAuaW5uZXIge1xuICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICB0b3A6IDcwcHg7XG4gICAgICAgICAgd2lkdGg6IDgxJTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICB6LWluZGV4OiAxMDA7XG4gICAgICAgICAgaGVpZ2h0OiAyMDBweDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cblxuICAgICAgICAuaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgOmdsb2JhbCgubGlua3MpIHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gICAgICAgIH1cblxuICAgICAgICA6Z2xvYmFsKC5saW5rcyBpbWcpIHtcbiAgICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQ4MHB4KSB7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbkluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jIGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gIGNvbnN0IHRva2VuID0gY29udGV4dC5xdWVyeS5hdDtcbiAgcmV0dXJuIHtcbiAgICB0b2tlbixcbiAgfTtcbn07XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4gKHtcbiAgdXNlcjogc3RhdGUudXNlci5jdXJyZW50VXNlcixcbiAgc2VhcmNoaW5nOiBzdGF0ZS5zZWFyY2gubG9hZGluZyxcbiAgc2VhcmNoQ291bnQ6IHN0YXRlLnNlYXJjaC5zZWFyY2hDb3VudCxcbiAgZmJUb2tlbjogc3RhdGUudXNlci5mYlRva2VuLFxuICBpbnRlcmVzdERhdGE6IHN0YXRlLnNlYXJjaC5pbnRlcmVzdHMsXG4gIGludGVyZXN0Q291bnQ6IHN0YXRlLnNlYXJjaC5pbnRlcmVzdENvdW50LFxuICBrZXl3b3JkOiBzdGF0ZS5zZWFyY2gua2V5d29yZCxcbn0pO1xuXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSAoZGlzcGF0Y2gpID0+ICh7XG4gIGFkZFVzZXI6IChpdGVtKSA9PiBkaXNwYXRjaChhZGRpbmdDdXJyZW50VXNlcihpdGVtKSksXG4gIHNlYXJjaEludGVyZXN0OiAodG9rZW4sIHZhbHVlLCBsaW1pdCwgeFRva2VuKSA9PlxuICAgIGRpc3BhdGNoKHNlYXJjaFN0YXJ0KHsgdG9rZW4sIHZhbHVlLCBsaW1pdCwgeFRva2VuIH0pKSxcbn0pO1xuXG5JbmRleC5MYXlvdXQgPSBEYXNoYm9hcmRMYXlvdXQ7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKEluZGV4KTtcbiJdfQ== */\n/*@ sourceURL=/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js */"));
};

Index.getInitialProps = function _callee(context) {
  var token;
  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.async(function _callee$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          token = context.query.at;
          return _context3.abrupt("return", {
            token: token
          });

        case 2:
        case "end":
          return _context3.stop();
      }
    }
  }, null, null, null, Promise);
};

var mapStateToProps = function mapStateToProps(state) {
  return {
    user: state.user.currentUser,
    searching: state.search.loading,
    searchCount: state.search.searchCount,
    fbToken: state.user.fbToken,
    interestData: state.search.interests,
    interestCount: state.search.interestCount,
    keyword: state.search.keyword
  };
};

var mapDispatchToProps = function mapDispatchToProps(dispatch) {
  return {
    addUser: function addUser(item) {
      return dispatch(Object(_redux_user_user_actions__WEBPACK_IMPORTED_MODULE_19__["addingCurrentUser"])(item));
    },
    searchInterest: function searchInterest(token, value, limit, xToken) {
      return dispatch(Object(_redux_search_search_actions__WEBPACK_IMPORTED_MODULE_20__["searchStart"])({
        token: token,
        value: value,
        limit: limit,
        xToken: xToken
      }));
    }
  };
};

Index.Layout = _components_dashboardLayout__WEBPACK_IMPORTED_MODULE_15__["default"];
/* harmony default export */ __webpack_exports__["default"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_11__["connect"])(mapStateToProps, mapDispatchToProps)(Index));

/***/ })

})
//# sourceMappingURL=index.js.51a514a53f7fb099d5fe.hot-update.js.map