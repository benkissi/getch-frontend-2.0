{"version":3,"file":"static/webpack/static/development/pages/_app.js.10feed2379a08052dd4e.hot-update.js","sources":["webpack:///./redux/search/search-sagas.js"],"sourcesContent":["import { takeLatest, put, all, call, select } from \"redux-saga/effects\";\nimport { searchSuccess, searchFailure, isLoading, setInterestCount } from './search-actions'\n\nimport {searchInterest, getInterestSuggestions, compileInterestSuggestions} from '../../api/api'\nimport {addScore, getInterestNames, containsKeyword} from '../../utils/search'\nimport SearchActionTypes from './search-types'\n\nimport {selectInterestTotal} from './search-selectors'\n\nfunction* getInterest ({payload}) {\n    try{\n        const {token, value, limit} = payload\n        yield put(isLoading(true))\n        const data = yield searchInterest(token, value, limit)\n        const levelOne = addScore(data.data, 5)\n        let names = getInterestNames(data.data)\n       \n        const suggestions = yield compileInterestSuggestions(token, names)\n        \n        const levelTwo = addScore(suggestions, 3)\n        let allInterest = [...levelOne, ...levelTwo]\n        console.log('all interest',allInterest)\n        const rankedList = allInterest.map((interest) => {\n            const exist = containsKeyword(value,interest.name);\n            if(exist !==-1) {\n                interest['relevance'] = interest.relevance + 3;\n            }\n            return interest\n        });\n        \n        yield put(searchSuccess({data:rankedList, keyword: value}))\n        const total = yield select(selectInterestTotal)\n        yield put(setInterestCount(total))\n        yield put(isLoading(false))\n        \n    }catch(error){\n        yield put(isLoading(false))\n        yield put(searchFailure(error))\n    }\n}\n\nexport function* onSearchStart () {\n    yield takeLatest(SearchActionTypes.START_SEARCH, getInterest)\n}\n\nexport function* searchSagas () {\n    yield all([\n        call(onSearchStart)\n    ])\n}\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;;;AAgCA;;;AAIA;AACA;AA9CA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAFA;AAGA;AACA;AAJA;AAAA;AAIA;AACA;AALA;AAIA;AACA;AACA;AANA;AAQA;AACA;AATA;AAQA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAnBA;AAqBA;AAAA;AAAA;AAAA;AACA;AAtBA;AAAA;AAsBA;AACA;AAvBA;AAsBA;AAtBA;AAuBA;AACA;AAxBA;AAAA;AAwBA;AACA;AAzBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AA2BA;AACA;AA5BA;AAAA;AA4BA;AACA;AA7BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AA+BA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}