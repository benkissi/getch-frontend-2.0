webpackHotUpdate("static/development/pages/index.js",{

/***/ "./pages/index.js":
/*!************************!*\
  !*** ./pages/index.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/lib/button/style */ "./node_modules/antd/lib/button/style/index.js");
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/lib/button */ "./node_modules/antd/lib/button/index.js");
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd_lib_slider_style__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd/lib/slider/style */ "./node_modules/antd/lib/slider/style/index.js");
/* harmony import */ var antd_lib_slider_style__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd_lib_slider_style__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var antd_lib_slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! antd/lib/slider */ "./node_modules/antd/lib/slider/index.js");
/* harmony import */ var antd_lib_slider__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(antd_lib_slider__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var antd_lib_input_style__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd/lib/input/style */ "./node_modules/antd/lib/input/style/index.js");
/* harmony import */ var antd_lib_input_style__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd_lib_input_style__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd/lib/input */ "./node_modules/antd/lib/input/index.js");
/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(antd_lib_input__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! styled-jsx/style */ "./node_modules/styled-jsx/style.js");
/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/router */ "./node_modules/next/dist/client/router.js");
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var export_to_csv__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! export-to-csv */ "./node_modules/export-to-csv/build/index.js");
/* harmony import */ var export_to_csv__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(export_to_csv__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-toastify */ "./node_modules/react-toastify/esm/react-toastify.js");
/* harmony import */ var react_loader_spinner__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-loader-spinner */ "./node_modules/react-loader-spinner/index.js");
/* harmony import */ var react_loader_spinner__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_loader_spinner__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _components_dashboardLayout__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../components/dashboardLayout */ "./components/dashboardLayout.js");
/* harmony import */ var _components_table__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../components/table */ "./components/table.js");
/* harmony import */ var _utils_table__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utils/table */ "./utils/table.js");
/* harmony import */ var _utils_auth__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../utils/auth */ "./utils/auth.js");
/* harmony import */ var _redux_user_user_actions__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../redux/user/user-actions */ "./redux/user/user-actions.js");
/* harmony import */ var _redux_search_search_actions__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../redux/search/search-actions */ "./redux/search/search-actions.js");
/* harmony import */ var react_loader_spinner_dist_loader_css_react_spinner_loader_css__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! react-loader-spinner/dist/loader/css/react-spinner-loader.css */ "./node_modules/react-loader-spinner/dist/loader/css/react-spinner-loader.css");
/* harmony import */ var react_loader_spinner_dist_loader_css_react_spinner_loader_css__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(react_loader_spinner_dist_loader_css_react_spinner_loader_css__WEBPACK_IMPORTED_MODULE_21__);









var _this = undefined,
    _jsxFileName = "/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js";



var __jsx = react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }
















var Index = function Index(props) {
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_9__["useState"])({
    selectedInterest: [],
    min: null,
    max: null
  }),
      state = _useState[0],
      setState = _useState[1];

  var token = props.token,
      user = props.user,
      addUser = props.addUser,
      fbToken = props.fbToken,
      interestData = props.interestData,
      searchInterest = props.searchInterest,
      keyword = props.keyword,
      interestCount = props.interestCount,
      searching = props.searching,
      searchCount = props.searchCount;
  var Search = antd_lib_input__WEBPACK_IMPORTED_MODULE_7___default.a.Search;
  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_10__["useRouter"])();
  Object(react__WEBPACK_IMPORTED_MODULE_9__["useEffect"])(function () {
    if (token) {
      var decoded = Object(_utils_auth__WEBPACK_IMPORTED_MODULE_18__["default"])(token);
      var _id = decoded._id,
          name = decoded.name,
          email = decoded.email,
          domain = decoded.domain;
      var userData = {
        id: _id,
        name: name,
        email: email,
        domain: domain,
        xToken: token
      };
      addUser(userData);
    } else if (user) {
      console.log(user);
    } else {
      router.push("/signup");
    }
  }, []);
  Object(react__WEBPACK_IMPORTED_MODULE_9__["useEffect"])(function () {
    if (interestData && interestCount) {
      var _max = Math.max.apply(Math, interestData.map(function (item) {
        return item["audience_size"];
      }));

      var _min = Math.min.apply(Math, interestData.map(function (item) {
        return item["audience_size"];
      }));

      setState(_objectSpread({}, state, {
        max: _max,
        min: _min,
        interests: interestData,
        interestNumber: interestCount
      }));
    }
  }, [interestData, interestCount]);

  var getInterest = function getInterest(value) {
    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.async(function getInterest$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!(searchCount >= 3 && user.plan === "PL001")) {
              _context.next = 3;
              break;
            }

            next_router__WEBPACK_IMPORTED_MODULE_10___default.a.push("/plans");
            return _context.abrupt("return");

          case 3:
            _context.next = 5;
            return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.awrap(searchInterest(fbToken.token, value, 500, user.xToken));

          case 5:
          case "end":
            return _context.stop();
        }
      }
    }, null, null, null, Promise);
  };

  var onSelectionChange = function onSelectionChange(selectedRowKeys, selectedRows) {
    console.log("rows", selectedRows);
    var selectedInterest = selectedRows.map(function (interest) {
      return interest.name;
    });
    setState(_objectSpread({}, state, {
      selectedRowKeys: selectedRowKeys,
      selectedInterest: selectedInterest,
      selectedRows: selectedRows
    }));
  };

  var onCopy = function onCopy() {
    var selectedInterest = state.selectedInterest;
    console.log("copy", selectedInterest);

    if (selectedInterest.length) {
      navigator.clipboard.writeText(selectedInterest).then(function () {
        console.log("you copied", selectedInterest.length);
        react_toastify__WEBPACK_IMPORTED_MODULE_13__["toast"].success("You copied ".concat(selectedInterest.length, " items"), {
          position: "top-right",
          autoClose: 5000,
          hideProgressBar: false,
          closeOnClick: true,
          pauseOnHover: true,
          draggable: true
        });
      });
    } else {
      react_toastify__WEBPACK_IMPORTED_MODULE_13__["toast"].error("You have not made any selection", {
        position: "top-right",
        autoClose: 5000,
        hideProgressBar: false,
        closeOnClick: true,
        pauseOnHover: true,
        draggable: true
      });
    }
  };

  var options = {
    fieldSeparator: ",",
    quoteStrings: '"',
    decimalSeparator: ".",
    showLabels: true,
    showTitle: true,
    title: "Interest List",
    useTextFile: false,
    useBom: true,
    useKeysAsHeaders: true
  };
  var csvExporter = new export_to_csv__WEBPACK_IMPORTED_MODULE_12__["ExportToCsv"](options);

  var handleExport = function handleExport() {
    var exportArray;
    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.async(function handleExport$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            if (!interestData) {
              _context2.next = 8;
              break;
            }

            exportArray = [];
            interestData.forEach(function (item) {
              var readyExport = {};
              readyExport.id = item.id;
              readyExport.name = item.name;
              readyExport.audience = item.audience_size;
              readyExport.description = item.description;
              readyExport.topic = item.topic;
              readyExport.path = JSON.stringify(item.path);
              readyExport.score = item.relevance;
              exportArray.push(readyExport);
            });
            _context2.next = 5;
            return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.awrap(csvExporter.generateCsv(exportArray));

          case 5:
            react_toastify__WEBPACK_IMPORTED_MODULE_13__["toast"].success("You downloaded ".concat(interestData.length, " items"), {
              position: "top-right",
              autoClose: 5000,
              hideProgressBar: false,
              closeOnClick: true,
              pauseOnHover: true,
              draggable: true
            });
            _context2.next = 9;
            break;

          case 8:
            react_toastify__WEBPACK_IMPORTED_MODULE_13__["toast"].error("You have not made any selection", {
              position: "top-right",
              autoClose: 3000,
              hideProgressBar: false,
              closeOnClick: true,
              pauseOnHover: true,
              draggable: true
            });

          case 9:
          case "end":
            return _context2.stop();
        }
      }
    }, null, null, null, Promise);
  };

  var onFilterChange = function onFilterChange(value) {
    var filtered = interestData.filter(function (item) {
      return item["audience_size"] >= value[0] && item["audience_size"] <= value[1];
    });
    setState(_objectSpread({}, state, {
      interests: filtered
    }));
  };

  var interests = state.interests,
      selectedRowKeys = state.selectedRowKeys,
      interestNumber = state.interestNumber,
      max = state.max,
      min = state.min;
  return __jsx("div", {
    id: "wrapper",
    className: "jsx-3557059205",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 194,
      columnNumber: 5
    }
  }, __jsx("div", {
    id: "main-content",
    className: "jsx-3557059205",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 195,
      columnNumber: 7
    }
  }, __jsx("div", {
    className: "jsx-3557059205" + " " + "top",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 196,
      columnNumber: 9
    }
  }, __jsx("div", {
    className: "jsx-3557059205" + " " + "inner",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 197,
      columnNumber: 11
    }
  }, __jsx(Search, {
    placeholder: "Find Facebook interest for a keyword",
    enterButton: "Getch",
    size: "large",
    onSearch: function onSearch(value) {
      return getInterest(value);
    },
    className: "jsx-3557059205",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 198,
      columnNumber: 13
    }
  }), __jsx("div", {
    className: "jsx-3557059205" + " " + "controls",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 204,
      columnNumber: 13
    }
  }, __jsx("div", {
    className: "jsx-3557059205",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 205,
      columnNumber: 15
    }
  }, interestNumber ? __jsx("p", {
    className: "jsx-3557059205",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 207,
      columnNumber: 19
    }
  }, __jsx("b", {
    className: "jsx-3557059205",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 208,
      columnNumber: 21
    }
  }, interestNumber), " interest found for \"", keyword, "\"") : ""), __jsx("div", {
    className: "jsx-3557059205" + " " + "filter",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 214,
      columnNumber: 15
    }
  }, __jsx("p", {
    className: "jsx-3557059205",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 215,
      columnNumber: 17
    }
  }, "Filter audience"), __jsx(antd_lib_slider__WEBPACK_IMPORTED_MODULE_3___default.a, {
    max: max,
    min: min,
    range: true,
    defaultValue: [min, max],
    onAfterChange: onFilterChange,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 216,
      columnNumber: 17
    }
  })), __jsx("div", {
    className: "jsx-3557059205" + " " + "actions",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 224,
      columnNumber: 15
    }
  }, __jsx("div", {
    className: "jsx-3557059205" + " " + "button",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 225,
      columnNumber: 17
    }
  }, __jsx(antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default.a, {
    onClick: onCopy,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 226,
      columnNumber: 19
    }
  }, "Copy")), __jsx("div", {
    className: "jsx-3557059205" + " " + "button",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 228,
      columnNumber: 17
    }
  }, __jsx(antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default.a, {
    onClick: handleExport,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 229,
      columnNumber: 19
    }
  }, "Download as CSV")))))), __jsx("div", {
    id: "table",
    className: "jsx-3557059205",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 245,
      columnNumber: 9
    }
  }, searching ? __jsx("div", {
    className: "jsx-3557059205" + " " + "loader",
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 247,
      columnNumber: 13
    }
  }, __jsx(react_loader_spinner__WEBPACK_IMPORTED_MODULE_14___default.a, {
    type: "Bars",
    color: "#4e54c8",
    height: 100,
    width: 100,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 248,
      columnNumber: 15
    }
  })) : __jsx(_components_table__WEBPACK_IMPORTED_MODULE_16__["default"], {
    onSelection: onSelectionChange,
    selectedRowKeys: selectedRowKeys,
    className: "table",
    columns: _utils_table__WEBPACK_IMPORTED_MODULE_17__["tableColumns"],
    dataSource: interests,
    __self: _this,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 251,
      columnNumber: 13
    }
  }))), __jsx(styled_jsx_style__WEBPACK_IMPORTED_MODULE_8___default.a, {
    id: "3557059205",
    __self: _this
  }, "#wrapper.jsx-3557059205{margin:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}#main-content.jsx-3557059205{margin-top:30px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}#table.jsx-3557059205{margin-top:90px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.controls.jsx-3557059205{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.actions.jsx-3557059205{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.actions.jsx-3557059205>*.jsx-3557059205{margin-left:5px;}.loader.jsx-3557059205{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:500px;}.divider.jsx-3557059205{height:35px;width:0;border-left:1px solid #ccc;margin:0 0 0 5px;}.filter.jsx-3557059205{width:30%;}.top.jsx-3557059205{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;height:130px;margin-bottom:20px;width:100%;background-color:white;}.inner.jsx-3557059205{position:fixed;top:70px;width:81%;background-color:white;z-index:100;height:200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.header.jsx-3557059205{margin-bottom:20px;}.links{width:10px;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Jlbmtpc3NpL3Byb2plY3RzL2dldGNoL2dldGNoLWZyb250ZW5kLTIuMC9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxUWtCLEFBR3VCLEFBTUksQUFJQSxBQUtILEFBTUEsQUFJRyxBQUdILEFBTUQsQUFPRixBQUlHLEFBV0UsQUFZSSxBQUlSLFVBOUJiLENBK0JBLENBeEVlLEFBa0NMLEdBc0JDLENBbERHLEFBSUEsQUFlZCxHQTJDQSxDQWpDNkIsSUFzQmpCLFVBQ2EsYUF0Qk4sVUF1QkwsT0F0QmQsS0F1QmUsS0E3Q0csQUFNbEIsQUFPeUIsQUFpQkEsUUFnQlYsSUE1RFMsQ0FNeEIsQUFJQSxHQUtnQyxrRUE4Q1AsUUE1RFgsU0EyQk8sQUFpQkEsR0EzQ3JCLDZCQWNBLGtEQThDd0IsV0FqQ1QsQUFpQkssYUFoQnBCLEtBaUJlLGFBQ00sbUJBQ1IsV0FDWSxNQWF6QixpQkFaQSIsImZpbGUiOiIvaG9tZS9iZW5raXNzaS9wcm9qZWN0cy9nZXRjaC9nZXRjaC1mcm9udGVuZC0yLjAvcGFnZXMvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSb3V0ZXIgZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5pbXBvcnQgeyBCdXR0b24sIElucHV0LCBTbGlkZXIgfSBmcm9tIFwiYW50ZFwiO1xuaW1wb3J0IHsgRXhwb3J0VG9Dc3YgfSBmcm9tIFwiZXhwb3J0LXRvLWNzdlwiO1xuaW1wb3J0IHsgdG9hc3QgfSBmcm9tIFwicmVhY3QtdG9hc3RpZnlcIjtcbmltcG9ydCBMb2FkZXIgZnJvbSBcInJlYWN0LWxvYWRlci1zcGlubmVyXCI7XG5cbmltcG9ydCBEYXNoYm9hcmRMYXlvdXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvZGFzaGJvYXJkTGF5b3V0XCI7XG5pbXBvcnQgSW50ZXJlc3RUYWJsZSBmcm9tIFwiLi4vY29tcG9uZW50cy90YWJsZVwiO1xuXG5pbXBvcnQgeyB0YWJsZUNvbHVtbnMgfSBmcm9tIFwiLi4vdXRpbHMvdGFibGVcIjtcblxuaW1wb3J0IGRlY29kZVRva2VuIGZyb20gXCIuLi91dGlscy9hdXRoXCI7XG5pbXBvcnQgeyBhZGRpbmdDdXJyZW50VXNlciB9IGZyb20gXCIuLi9yZWR1eC91c2VyL3VzZXItYWN0aW9uc1wiO1xuaW1wb3J0IHsgc2VhcmNoU3RhcnQgfSBmcm9tIFwiLi4vcmVkdXgvc2VhcmNoL3NlYXJjaC1hY3Rpb25zXCI7XG5cbmltcG9ydCBcInJlYWN0LWxvYWRlci1zcGlubmVyL2Rpc3QvbG9hZGVyL2Nzcy9yZWFjdC1zcGlubmVyLWxvYWRlci5jc3NcIjtcblxuY29uc3QgSW5kZXggPSAocHJvcHMpID0+IHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgc2VsZWN0ZWRJbnRlcmVzdDogW10sXG4gICAgbWluOiBudWxsLFxuICAgIG1heDogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IHtcbiAgICB0b2tlbixcbiAgICB1c2VyLFxuICAgIGFkZFVzZXIsXG4gICAgZmJUb2tlbixcbiAgICBpbnRlcmVzdERhdGEsXG4gICAgc2VhcmNoSW50ZXJlc3QsXG4gICAga2V5d29yZCxcbiAgICBpbnRlcmVzdENvdW50LFxuICAgIHNlYXJjaGluZyxcbiAgICBzZWFyY2hDb3VudCxcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7IFNlYXJjaCB9ID0gSW5wdXQ7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlVG9rZW4odG9rZW4pO1xuICAgICAgY29uc3QgeyBfaWQsIG5hbWUsIGVtYWlsLCBkb21haW4gfSA9IGRlY29kZWQ7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgICAgaWQ6IF9pZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZW1haWwsXG4gICAgICAgIGRvbWFpbixcbiAgICAgICAgeFRva2VuOiB0b2tlbixcbiAgICAgIH07XG4gICAgICBhZGRVc2VyKHVzZXJEYXRhKTtcbiAgICB9IGVsc2UgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3V0ZXIucHVzaChcIi9zaWdudXBcIik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaW50ZXJlc3REYXRhICYmIGludGVyZXN0Q291bnQpIHtcbiAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4LmFwcGx5KFxuICAgICAgICBNYXRoLFxuICAgICAgICBpbnRlcmVzdERhdGEubWFwKChpdGVtKSA9PiBpdGVtW1wiYXVkaWVuY2Vfc2l6ZVwiXSlcbiAgICAgICk7XG4gICAgICBjb25zdCBtaW4gPSBNYXRoLm1pbi5hcHBseShcbiAgICAgICAgTWF0aCxcbiAgICAgICAgaW50ZXJlc3REYXRhLm1hcCgoaXRlbSkgPT4gaXRlbVtcImF1ZGllbmNlX3NpemVcIl0pXG4gICAgICApO1xuXG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgbWluOiBtaW4sXG4gICAgICAgIGludGVyZXN0czogaW50ZXJlc3REYXRhLFxuICAgICAgICBpbnRlcmVzdE51bWJlcjogaW50ZXJlc3RDb3VudCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2ludGVyZXN0RGF0YSwgaW50ZXJlc3RDb3VudF0pO1xuXG4gIGNvbnN0IGdldEludGVyZXN0ID0gYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgaWYgKHNlYXJjaENvdW50ID49IDMgJiYgdXNlci5wbGFuID09PSBcIlBMMDAxXCIpIHtcbiAgICAgIFJvdXRlci5wdXNoKFwiL3BsYW5zXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCBzZWFyY2hJbnRlcmVzdChmYlRva2VuLnRva2VuLCB2YWx1ZSwgNTAwLCB1c2VyLnhUb2tlbik7XG4gIH07XG5cbiAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSAoc2VsZWN0ZWRSb3dLZXlzLCBzZWxlY3RlZFJvd3MpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcInJvd3NcIiwgc2VsZWN0ZWRSb3dzKTtcbiAgICBjb25zdCBzZWxlY3RlZEludGVyZXN0ID0gc2VsZWN0ZWRSb3dzLm1hcCgoaW50ZXJlc3QpID0+IHtcbiAgICAgIHJldHVybiBpbnRlcmVzdC5uYW1lO1xuICAgIH0pO1xuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc2VsZWN0ZWRSb3dLZXlzLFxuICAgICAgc2VsZWN0ZWRJbnRlcmVzdCxcbiAgICAgIHNlbGVjdGVkUm93cyxcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBvbkNvcHkgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzZWxlY3RlZEludGVyZXN0IH0gPSBzdGF0ZTtcbiAgICBjb25zb2xlLmxvZyhcImNvcHlcIiwgc2VsZWN0ZWRJbnRlcmVzdCk7XG4gICAgaWYgKHNlbGVjdGVkSW50ZXJlc3QubGVuZ3RoKSB7XG4gICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChzZWxlY3RlZEludGVyZXN0KS50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ5b3UgY29waWVkXCIsIHNlbGVjdGVkSW50ZXJlc3QubGVuZ3RoKTtcblxuICAgICAgICB0b2FzdC5zdWNjZXNzKGBZb3UgY29waWVkICR7c2VsZWN0ZWRJbnRlcmVzdC5sZW5ndGh9IGl0ZW1zYCwge1xuICAgICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICAgIGF1dG9DbG9zZTogNTAwMCxcbiAgICAgICAgICBoaWRlUHJvZ3Jlc3NCYXI6IGZhbHNlLFxuICAgICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2FzdC5lcnJvcihgWW91IGhhdmUgbm90IG1hZGUgYW55IHNlbGVjdGlvbmAsIHtcbiAgICAgICAgcG9zaXRpb246IFwidG9wLXJpZ2h0XCIsXG4gICAgICAgIGF1dG9DbG9zZTogNTAwMCxcbiAgICAgICAgaGlkZVByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGZpZWxkU2VwYXJhdG9yOiBcIixcIixcbiAgICBxdW90ZVN0cmluZ3M6ICdcIicsXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogXCIuXCIsXG4gICAgc2hvd0xhYmVsczogdHJ1ZSxcbiAgICBzaG93VGl0bGU6IHRydWUsXG4gICAgdGl0bGU6IFwiSW50ZXJlc3QgTGlzdFwiLFxuICAgIHVzZVRleHRGaWxlOiBmYWxzZSxcbiAgICB1c2VCb206IHRydWUsXG4gICAgdXNlS2V5c0FzSGVhZGVyczogdHJ1ZSxcbiAgfTtcbiAgY29uc3QgY3N2RXhwb3J0ZXIgPSBuZXcgRXhwb3J0VG9Dc3Yob3B0aW9ucyk7XG5cbiAgY29uc3QgaGFuZGxlRXhwb3J0ID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIGNvbnN0IHtzZWxlY3RlZFJvd3N9ID0gc3RhdGVcbiAgICBpZiAoaW50ZXJlc3REYXRhKSB7XG4gICAgICBsZXQgZXhwb3J0QXJyYXkgPSBbXTtcbiAgICAgIGludGVyZXN0RGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGxldCByZWFkeUV4cG9ydCA9IHt9O1xuICAgICAgICByZWFkeUV4cG9ydC5pZCA9IGl0ZW0uaWQ7XG4gICAgICAgIHJlYWR5RXhwb3J0Lm5hbWUgPSBpdGVtLm5hbWU7XG4gICAgICAgIHJlYWR5RXhwb3J0LmF1ZGllbmNlID0gaXRlbS5hdWRpZW5jZV9zaXplO1xuICAgICAgICByZWFkeUV4cG9ydC5kZXNjcmlwdGlvbiA9IGl0ZW0uZGVzY3JpcHRpb247XG4gICAgICAgIHJlYWR5RXhwb3J0LnRvcGljID0gaXRlbS50b3BpYztcbiAgICAgICAgcmVhZHlFeHBvcnQucGF0aCA9IEpTT04uc3RyaW5naWZ5KGl0ZW0ucGF0aCk7XG4gICAgICAgIHJlYWR5RXhwb3J0LnNjb3JlID0gaXRlbS5yZWxldmFuY2U7XG4gICAgICAgIGV4cG9ydEFycmF5LnB1c2gocmVhZHlFeHBvcnQpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGNzdkV4cG9ydGVyLmdlbmVyYXRlQ3N2KGV4cG9ydEFycmF5KTtcbiAgICAgIHRvYXN0LnN1Y2Nlc3MoYFlvdSBkb3dubG9hZGVkICR7aW50ZXJlc3REYXRhLmxlbmd0aH0gaXRlbXNgLCB7XG4gICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9hc3QuZXJyb3IoYFlvdSBoYXZlIG5vdCBtYWRlIGFueSBzZWxlY3Rpb25gLCB7XG4gICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICBhdXRvQ2xvc2U6IDMwMDAsXG4gICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25GaWx0ZXJDaGFuZ2UgPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCBmaWx0ZXJlZCA9IGludGVyZXN0RGF0YS5maWx0ZXIoXG4gICAgICAoaXRlbSkgPT5cbiAgICAgICAgaXRlbVtcImF1ZGllbmNlX3NpemVcIl0gPj0gdmFsdWVbMF0gJiYgaXRlbVtcImF1ZGllbmNlX3NpemVcIl0gPD0gdmFsdWVbMV1cbiAgICApO1xuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgaW50ZXJlc3RzOiBmaWx0ZXJlZCxcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCB7IGludGVyZXN0cywgc2VsZWN0ZWRSb3dLZXlzLCBpbnRlcmVzdE51bWJlciwgbWF4LCBtaW4gfSA9IHN0YXRlO1xuICByZXR1cm4gKFxuICAgIDxkaXYgaWQ9XCJ3cmFwcGVyXCI+XG4gICAgICA8ZGl2IGlkPVwibWFpbi1jb250ZW50XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9wXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbm5lclwiPlxuICAgICAgICAgICAgPFNlYXJjaFxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkZpbmQgRmFjZWJvb2sgaW50ZXJlc3QgZm9yIGEga2V5d29yZFwiXG4gICAgICAgICAgICAgIGVudGVyQnV0dG9uPVwiR2V0Y2hcIlxuICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiBnZXRJbnRlcmVzdCh2YWx1ZSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sc1wiPlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIHtpbnRlcmVzdE51bWJlciA/IChcbiAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8Yj57aW50ZXJlc3ROdW1iZXJ9PC9iPiBpbnRlcmVzdCBmb3VuZCBmb3IgXCJ7a2V5d29yZH1cIlxuICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsdGVyXCI+XG4gICAgICAgICAgICAgICAgPHA+RmlsdGVyIGF1ZGllbmNlPC9wPlxuICAgICAgICAgICAgICAgIDxTbGlkZXJcbiAgICAgICAgICAgICAgICAgIG1heD17bWF4fVxuICAgICAgICAgICAgICAgICAgbWluPXttaW59XG4gICAgICAgICAgICAgICAgICByYW5nZVxuICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtbbWluLCBtYXhdfVxuICAgICAgICAgICAgICAgICAgb25BZnRlckNoYW5nZT17b25GaWx0ZXJDaGFuZ2V9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e29uQ29weX0+Q29weTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUV4cG9ydH0+RG93bmxvYWQgYXMgQ1NWPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgey8qIDxkaXYgY2xhc3NOYW1lPVwiZGl2aWRlclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUV4cG9ydH0+U2F2ZSBhcyBwcm9qZWN0PC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b24gY29sb3I9XCIjNGU1NGM4XCIgb25DbGljaz17aGFuZGxlRXhwb3J0fT5cbiAgICAgICAgICAgICAgICAgICAgU2F2ZSB0byBGYWNlYm9va1xuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGlkPVwidGFibGVcIj5cbiAgICAgICAgICB7c2VhcmNoaW5nID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkZXJcIj5cbiAgICAgICAgICAgICAgPExvYWRlciB0eXBlPVwiQmFyc1wiIGNvbG9yPVwiIzRlNTRjOFwiIGhlaWdodD17MTAwfSB3aWR0aD17MTAwfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxJbnRlcmVzdFRhYmxlXG4gICAgICAgICAgICAgIG9uU2VsZWN0aW9uPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgc2VsZWN0ZWRSb3dLZXlzPXtzZWxlY3RlZFJvd0tleXN9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRhYmxlXCJcbiAgICAgICAgICAgICAgY29sdW1ucz17dGFibGVDb2x1bW5zfVxuICAgICAgICAgICAgICBkYXRhU291cmNlPXtpbnRlcmVzdHN9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgI3dyYXBwZXIge1xuICAgICAgICAgIG1hcmdpbjogMTBweDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgICNtYWluLWNvbnRlbnQge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDMwcHg7XG4gICAgICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgICB9XG4gICAgICAgICN0YWJsZSB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogOTBweDtcbiAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udHJvbHMge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIH1cblxuICAgICAgICAuYWN0aW9ucyB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hY3Rpb25zID4gKiB7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAubG9hZGVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgaGVpZ2h0OiA1MDBweDtcbiAgICAgICAgfVxuICAgICAgICAuZGl2aWRlciB7XG4gICAgICAgICAgaGVpZ2h0OiAzNXB4O1xuICAgICAgICAgIHdpZHRoOiAwO1xuICAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICBtYXJnaW46IDAgMCAwIDVweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5maWx0ZXIge1xuICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgIH1cblxuICAgICAgICAudG9wIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgIGhlaWdodDogMTMwcHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5pbm5lciB7XG4gICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICAgIHRvcDogNzBweDtcbiAgICAgICAgICB3aWR0aDogODElO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICAgIHotaW5kZXg6IDEwMDtcbiAgICAgICAgICBoZWlnaHQ6IDIwMHB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cblxuICAgICAgICA6Z2xvYmFsKC5saW5rcykge1xuICAgICAgICAgIHdpZHRoOiAxMHB4O1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5JbmRleC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyBmdW5jdGlvbiAoY29udGV4dCkge1xuICBjb25zdCB0b2tlbiA9IGNvbnRleHQucXVlcnkuYXQ7XG4gIHJldHVybiB7XG4gICAgdG9rZW4sXG4gIH07XG59O1xuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RhdGUpID0+ICh7XG4gIHVzZXI6IHN0YXRlLnVzZXIuY3VycmVudFVzZXIsXG4gIHNlYXJjaGluZzogc3RhdGUuc2VhcmNoLmxvYWRpbmcsXG4gIHNlYXJjaENvdW50OiBzdGF0ZS5zZWFyY2guc2VhcmNoQ291bnQsXG4gIGZiVG9rZW46IHN0YXRlLnVzZXIuZmJUb2tlbixcbiAgaW50ZXJlc3REYXRhOiBzdGF0ZS5zZWFyY2guaW50ZXJlc3RzLFxuICBpbnRlcmVzdENvdW50OiBzdGF0ZS5zZWFyY2guaW50ZXJlc3RDb3VudCxcbiAga2V5d29yZDogc3RhdGUuc2VhcmNoLmtleXdvcmQsXG59KTtcblxuY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0gKGRpc3BhdGNoKSA9PiAoe1xuICBhZGRVc2VyOiAoaXRlbSkgPT4gZGlzcGF0Y2goYWRkaW5nQ3VycmVudFVzZXIoaXRlbSkpLFxuICBzZWFyY2hJbnRlcmVzdDogKHRva2VuLCB2YWx1ZSwgbGltaXQsIHhUb2tlbikgPT5cbiAgICBkaXNwYXRjaChzZWFyY2hTdGFydCh7IHRva2VuLCB2YWx1ZSwgbGltaXQsIHhUb2tlbiB9KSksXG59KTtcblxuSW5kZXguTGF5b3V0ID0gRGFzaGJvYXJkTGF5b3V0O1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShJbmRleCk7XG4iXX0= */\n/*@ sourceURL=/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js */"));
};

Index.getInitialProps = function _callee(context) {
  var token;
  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.async(function _callee$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          token = context.query.at;
          return _context3.abrupt("return", {
            token: token
          });

        case 2:
        case "end":
          return _context3.stop();
      }
    }
  }, null, null, null, Promise);
};

var mapStateToProps = function mapStateToProps(state) {
  return {
    user: state.user.currentUser,
    searching: state.search.loading,
    searchCount: state.search.searchCount,
    fbToken: state.user.fbToken,
    interestData: state.search.interests,
    interestCount: state.search.interestCount,
    keyword: state.search.keyword
  };
};

var mapDispatchToProps = function mapDispatchToProps(dispatch) {
  return {
    addUser: function addUser(item) {
      return dispatch(Object(_redux_user_user_actions__WEBPACK_IMPORTED_MODULE_19__["addingCurrentUser"])(item));
    },
    searchInterest: function searchInterest(token, value, limit, xToken) {
      return dispatch(Object(_redux_search_search_actions__WEBPACK_IMPORTED_MODULE_20__["searchStart"])({
        token: token,
        value: value,
        limit: limit,
        xToken: xToken
      }));
    }
  };
};

Index.Layout = _components_dashboardLayout__WEBPACK_IMPORTED_MODULE_15__["default"];
/* harmony default export */ __webpack_exports__["default"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_11__["connect"])(mapStateToProps, mapDispatchToProps)(Index));

/***/ })

})
//# sourceMappingURL=index.js.28150921aa1387137670.hot-update.js.map