{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nvar _jsxFileName = \"/code/ben/getch/frontend/pages/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport FacebookLogin from 'react-facebook-login';\nimport DashboardLayout from '../components/dashboardLayout';\nimport { getProducts, fbAuthentication, searchInterest } from '../api/api';\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser, authFacebook } from \"../redux/user/user-actions\";\n\nconst Index = props => {\n  const router = useRouter();\n  useEffect(() => {\n    const {\n      token,\n      user,\n      addUser\n    } = props;\n\n    if (token) {\n      const decoded = decodeToken(props.token);\n      const {\n        _id,\n        name,\n        email,\n        domain\n      } = decoded;\n      const userData = {\n        id: _id,\n        name,\n        email,\n        domain\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n\n  const faceAuthStart = () => {\n    console.log('#### FB auth start');\n  };\n\n  const responseFacebook = async res => {\n    const {\n      authFb,\n      user\n    } = props;\n    const {\n      accessToken\n    } = res;\n    authFb(accessToken, user.id);\n  };\n\n  return __jsx(DashboardLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"wrapper\",\n    className: \"jsx-1857536138\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    className: \"jsx-1857536138\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Hello Next.js\"), __jsx(FacebookLogin, {\n    appId: process.env.FB_APP_ID,\n    autoLoad: true,\n    fields: \"name,email,id\",\n    onClick: faceAuthStart,\n    scope: \"ads_management, email\",\n    callback: responseFacebook,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), __jsx(Search, {\n    placeholder: \"input search text\",\n    enterButton: \"Search\",\n    size: \"large\",\n    onSearch: value => console.log(value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), __jsx(_Button, {\n    onClick: () => searchInterest(fbAccess, 'fish', 50),\n    type: \"danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Primary\"), __jsx(\"p\", {\n    className: \"jsx-1857536138\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Secret: \", process.env.FB_APP_SECRET), __jsx(_JSXStyle, {\n    id: \"1857536138\",\n    __self: this\n  }, \"#wrapper.jsx-1857536138{margin:10px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9jb2RlL2Jlbi9nZXRjaC9mcm9udGVuZC9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnRWtCLEFBR3VCLFlBQ2QiLCJmaWxlIjoiL2NvZGUvYmVuL2dldGNoL2Zyb250ZW5kL3BhZ2VzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tIFwicmVhY3QtcmVkdXhcIjtcbmltcG9ydCB7IEJ1dHRvbiwgSW5wdXQgfSBmcm9tIFwiYW50ZFwiO1xuaW1wb3J0IEZhY2Vib29rTG9naW4gZnJvbSAncmVhY3QtZmFjZWJvb2stbG9naW4nO1xuXG5pbXBvcnQgRGFzaGJvYXJkTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvZGFzaGJvYXJkTGF5b3V0J1xuXG5pbXBvcnQge2dldFByb2R1Y3RzLCBmYkF1dGhlbnRpY2F0aW9uLCBzZWFyY2hJbnRlcmVzdH0gZnJvbSAnLi4vYXBpL2FwaSdcblxuaW1wb3J0IGRlY29kZVRva2VuIGZyb20gXCIuLi91dGlscy9hdXRoXCI7XG5pbXBvcnQgeyBhZGRpbmdDdXJyZW50VXNlciwgYXV0aEZhY2Vib29rIH0gZnJvbSBcIi4uL3JlZHV4L3VzZXIvdXNlci1hY3Rpb25zXCI7XG5cbmNvbnN0IEluZGV4ID0gcHJvcHMgPT4ge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB7IHRva2VuLCB1c2VyLCBhZGRVc2VyIH0gPSBwcm9wcztcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGVUb2tlbihwcm9wcy50b2tlbik7XG4gICAgICBjb25zdCB7IF9pZCwgbmFtZSwgZW1haWwsIGRvbWFpbiB9ID0gZGVjb2RlZDtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgICBpZDogX2lkLFxuICAgICAgICBuYW1lLCBcbiAgICAgICAgZW1haWwsIFxuICAgICAgICBkb21haW5cbiAgICAgIH07XG4gICAgICBhZGRVc2VyKHVzZXJEYXRhKTtcbiAgICB9IGVsc2UgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3V0ZXIucHVzaChcIi9zaWduaW5cIik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgZmFjZUF1dGhTdGFydCA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnIyMjIyBGQiBhdXRoIHN0YXJ0JylcbiAgfVxuXG4gIGNvbnN0IHJlc3BvbnNlRmFjZWJvb2sgPSBhc3luYyAocmVzKSA9PiB7XG4gICAgY29uc3Qge2F1dGhGYiwgdXNlcn0gPSBwcm9wc1xuICAgIGNvbnN0IHthY2Nlc3NUb2tlbn0gPSByZXNcbiAgICBhdXRoRmIoYWNjZXNzVG9rZW4sIHVzZXIuaWQpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxEYXNoYm9hcmRMYXlvdXQ+XG4gICAgPGRpdiBpZD1cIndyYXBwZXJcIj5cbiAgICAgIDxwPkhlbGxvIE5leHQuanM8L3A+XG4gICAgICA8RmFjZWJvb2tMb2dpblxuICAgICAgICBhcHBJZD17cHJvY2Vzcy5lbnYuRkJfQVBQX0lEfVxuICAgICAgICBhdXRvTG9hZD17dHJ1ZX1cbiAgICAgICAgZmllbGRzPVwibmFtZSxlbWFpbCxpZFwiXG4gICAgICAgIG9uQ2xpY2s9e2ZhY2VBdXRoU3RhcnR9XG4gICAgICAgIHNjb3BlPVwiYWRzX21hbmFnZW1lbnQsIGVtYWlsXCJcbiAgICAgICAgY2FsbGJhY2s9e3Jlc3BvbnNlRmFjZWJvb2t9IC8+XG4gICAgICAgIDxTZWFyY2hcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cImlucHV0IHNlYXJjaCB0ZXh0XCJcbiAgICAgICAgICBlbnRlckJ1dHRvbj1cIlNlYXJjaFwiXG4gICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICBvblNlYXJjaD17dmFsdWUgPT4gY29uc29sZS5sb2codmFsdWUpfVxuICAgICAgICAvPlxuICAgICAgPEJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZWFyY2hJbnRlcmVzdChmYkFjY2VzcywgJ2Zpc2gnLCA1MCl9IHR5cGU9XCJkYW5nZXJcIj5QcmltYXJ5PC9CdXR0b24+XG4gICAgICA8cD5TZWNyZXQ6IHtwcm9jZXNzLmVudi5GQl9BUFBfU0VDUkVUfTwvcD5cblxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAjd3JhcHBlciB7XG4gICAgICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9kaXY+XG4gICAgPC9EYXNoYm9hcmRMYXlvdXQ+XG4gICk7XG59O1xuXG5JbmRleC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyBmdW5jdGlvbihjb250ZXh0KSB7XG4gIGNvbnN0IHRva2VuID0gY29udGV4dC5xdWVyeS5hdDtcbiAgcmV0dXJuIHtcbiAgICB0b2tlblxuICB9O1xufTtcblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gc3RhdGUgPT4gKHtcbiAgdXNlcjogc3RhdGUudXNlci5jdXJyZW50VXNlclxufSk7XG5cbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IGRpc3BhdGNoID0+ICh7XG4gIGFkZFVzZXI6IGl0ZW0gPT4gZGlzcGF0Y2goYWRkaW5nQ3VycmVudFVzZXIoaXRlbSkpLFxuICBhdXRoRmI6ICh0b2tlbiwgaWQpID0+IGRpc3BhdGNoKGF1dGhGYWNlYm9vayh7dG9rZW4sIGlkfSkpXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoSW5kZXgpO1xuIl19 */\\n/*@ sourceURL=/code/ben/getch/frontend/pages/index.js */\")));\n};\n\nIndex.getInitialProps = async function (context) {\n  const token = context.query.at;\n  return {\n    token\n  };\n};\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addUser: item => dispatch(addingCurrentUser(item)),\n  authFb: (token, id) => dispatch(authFacebook({\n    token,\n    id\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/code/ben/getch/frontend/pages/index.js"],"names":["useRouter","useEffect","connect","FacebookLogin","DashboardLayout","getProducts","fbAuthentication","searchInterest","decodeToken","addingCurrentUser","authFacebook","Index","props","router","token","user","addUser","decoded","_id","name","email","domain","userData","id","console","log","push","faceAuthStart","responseFacebook","res","authFb","accessToken","process","env","FB_APP_ID","value","fbAccess","FB_APP_SECRET","getInitialProps","context","query","at","mapStateToProps","state","currentUser","mapDispatchToProps","dispatch","item"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button, Input } from \"antd\";\nimport FacebookLogin from 'react-facebook-login';\n\nimport DashboardLayout from '../components/dashboardLayout'\n\nimport {getProducts, fbAuthentication, searchInterest} from '../api/api'\n\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser, authFacebook } from \"../redux/user/user-actions\";\n\nconst Index = props => {\n  const router = useRouter();\n  useEffect(() => {\n    const { token, user, addUser } = props;\n    if (token) {\n      const decoded = decodeToken(props.token);\n      const { _id, name, email, domain } = decoded;\n      const userData = {\n        id: _id,\n        name, \n        email, \n        domain\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n\n  const faceAuthStart = () => {\n    console.log('#### FB auth start')\n  }\n\n  const responseFacebook = async (res) => {\n    const {authFb, user} = props\n    const {accessToken} = res\n    authFb(accessToken, user.id)\n  }\n\n  return (\n    <DashboardLayout>\n    <div id=\"wrapper\">\n      <p>Hello Next.js</p>\n      <FacebookLogin\n        appId={process.env.FB_APP_ID}\n        autoLoad={true}\n        fields=\"name,email,id\"\n        onClick={faceAuthStart}\n        scope=\"ads_management, email\"\n        callback={responseFacebook} />\n        <Search\n          placeholder=\"input search text\"\n          enterButton=\"Search\"\n          size=\"large\"\n          onSearch={value => console.log(value)}\n        />\n      <Button onClick={() => searchInterest(fbAccess, 'fish', 50)} type=\"danger\">Primary</Button>\n      <p>Secret: {process.env.FB_APP_SECRET}</p>\n\n      <style jsx>{`\n        #wrapper {\n          margin: 10px;\n        }\n      `}</style>\n    </div>\n    </DashboardLayout>\n  );\n};\n\nIndex.getInitialProps = async function(context) {\n  const token = context.query.at;\n  return {\n    token\n  };\n};\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addUser: item => dispatch(addingCurrentUser(item)),\n  authFb: (token, id) => dispatch(authFacebook({token, id}))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);\n"]},"metadata":{},"sourceType":"module"}