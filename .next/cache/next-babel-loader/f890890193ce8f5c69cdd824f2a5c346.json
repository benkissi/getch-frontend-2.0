{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"/home/benkissi/projects/getch/getch-frontend-2.0/pages/performance.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { chartData } from \"../utils/table\";\nimport Table from \"../components/table\";\nimport AdAccount from \"../components/adAccount\";\nimport { performanceColumns } from \"../utils/table\";\nimport { getAdAccounts, fbPaginate, getCampaigns, getAdsets, getAds, getInterestStats } from \"../api/api\";\n\nfunction Performance(props) {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    accountModalVisible: false,\n    campaignModalVisible: false,\n    selectedRowKeys: null,\n    pagingAccounts: {\n      next: \"\",\n      previous: \"\"\n    },\n    pagingCampaigns: {\n      next: \"\",\n      previous: \"\"\n    },\n    selectedAdAccount: {},\n    selectedCampaign: {},\n    selectedAdset: {},\n    selectedAd: {},\n    fetchingCampaigns: false,\n    fetchingAdsets: false\n  });\n  const {\n    fbId,\n    user\n  } = props;\n  useEffect(() => {\n    if (false) {\n      console.log(\"on browser\");\n\n      const {\n        Column\n      } = require(\"@antv/g2plot\");\n\n      const chart = new Column(document.getElementById(\"chart\"), {\n        data: chartData,\n        xField: \"name\",\n        yField: \"value\",\n        padding: \"auto\",\n        title: {\n          visible: true,\n          text: \"Interest stats\"\n        },\n        forceFit: true\n      });\n      console.log(\"el\", document.getElementById(\"chart\"));\n      chart.render();\n    }\n  }, []);\n  useEffect(() => {\n    if (state.accountModalVisible) {\n      fetchAdAccounts();\n    }\n  }, [state.accountModalVisible]);\n  useEffect(() => {\n    if (state.selectedAdAccount.id) {\n      setModalVisible(false, \"accountModalVisible\");\n      fetchCampaigns();\n    }\n  }, [state.selectedAdAccount]);\n  useEffect(() => {\n    if (state.selectedCampaign.id) {\n      fetchAdsets();\n    }\n  }, [state.selectedCampaign]);\n  useEffect(() => {\n    if (state.selectedAdset.id) {\n      fetchAds();\n    }\n  }, [state.selectedAdset]);\n  useEffect(() => {\n    if (state.selectedAd.id) {\n      fetchStats();\n    }\n  }, [state.selectedAd]);\n\n  const setModalVisible = (status, modalName) => {\n    setState(prevState => _objectSpread({}, prevState, {\n      [modalName]: status\n    }));\n  };\n\n  const setCampaignsModal = modalVisible => {\n    setState(prevState => _objectSpread({}, prevState, {\n      campaignModalVisible: modalVisible\n    }));\n  };\n\n  const fetchAdAccounts = async () => {\n    if (state.accountModalVisible) {\n      console.log(\"fetch ad accounts\");\n      const adAccounts = await getAdAccounts(fbId, user.xToken);\n      console.log(\"AD accoutns\", adAccounts);\n      setState(prevState => _objectSpread({}, prevState, {\n        adAccounts: adAccounts,\n        pagingAccounts: {\n          next: adAccounts.paging.next && adAccounts.paging.next,\n          previous: adAccounts.paging.previous && adAccounts.paging.previous\n        },\n        selectedAdAccount: {},\n        selectedCampaign: {},\n        selectedAdset: {}\n      }));\n    }\n  };\n\n  const fetchCampaigns = async () => {\n    setState(prevState => _objectSpread({}, prevState, {\n      fetchingCampaigns: true,\n      selectedCampaign: {}\n    }));\n    const accountId = state.selectedAdAccount.id;\n    const res = await getCampaigns(accountId, user.xToken);\n    setState(prevState => _objectSpread({}, prevState, {\n      campaigns: res,\n      fetchingCampaigns: false,\n      pagingCampaigns: {\n        next: res.paging && res.paging.next,\n        previous: res.paging && res.paging.previous\n      }\n    }));\n  };\n\n  const fetchAdsets = async () => {\n    setState(prevState => _objectSpread({}, prevState, {\n      fetchingAdsets: true,\n      selectedAdset: {}\n    }));\n    const campaignId = state.selectedCampaign.id;\n    const res = await getAdsets(campaignId, user.xToken);\n    console.log(\"sets\", res.data);\n    setState(prevState => _objectSpread({}, prevState, {\n      adsets: res,\n      fetchingAdsets: false\n    }));\n  };\n\n  const fetchAds = async () => {\n    setState(prevState => _objectSpread({}, prevState, {\n      fetchingAds: true\n    }));\n    const adsetId = state.selectedAdset.id;\n    const res = await getAds(adsetId, user.xToken);\n    console.log(\"ads\", res);\n    setState(prevState => _objectSpread({}, prevState, {\n      ads: res,\n      fetchingAds: false\n    }));\n  };\n\n  const fetchStats = async () => {\n    setState(prevState => _objectSpread({}, prevState, {\n      fetchingStats: true\n    }));\n    const adId = state.selectedAd.id;\n    const res = await getInterestStats(adId, user.xToken);\n    console.log(\"stats\", res);\n  };\n\n  const handleAccountPagination = async page => {\n    const adAccounts = await fbPaginate(page);\n    console.log(\"paginate\", adAccounts);\n    setState(prevState => _objectSpread({}, prevState, {\n      adAccounts: adAccounts,\n      pagingAccounts: {\n        next: adAccounts.paging && adAccounts.paging.next,\n        previous: adAccounts.paging && adAccounts.paging.previous\n      }\n    }));\n  };\n\n  const handleCampaignPagination = async page => {\n    const campaigns = await fbPaginate(page);\n    console.log(\"paginate\", campaigns);\n    setState(prevState => _objectSpread({}, prevState, {\n      campaigns: campaigns,\n      pagingCampaigns: {\n        next: campaigns.paging && campaigns.paging.next,\n        previous: campaigns.paging && campaigns.paging.previous\n      }\n    }));\n  };\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    console.log(\"rows\", selectedRows);\n    const selectedInterest = selectedRows.map(interest => {\n      return interest.name;\n    });\n    setState(prevState => _objectSpread({}, prevState, {\n      selectedRowKeys,\n      selectedInterest,\n      selectedRows\n    }));\n  };\n\n  const handleAccountSelect = (id, name) => {\n    setState(prevState => _objectSpread({}, prevState, {\n      selectedAdAccount: {\n        id,\n        name\n      }\n    }));\n  };\n\n  const handleCampaignSelect = (id, name) => {\n    setState(prevState => _objectSpread({}, prevState, {\n      selectedCampaign: {\n        id,\n        name\n      },\n      campaignModalVisible: false\n    }));\n  };\n\n  const handleAdsetSelect = (value, option) => {\n    console.log(\"selected\", option.props.children);\n    setState(prevState => _objectSpread({}, prevState, {\n      selectedAdset: {\n        id: option.props.value,\n        name: option.props.children\n      }\n    }));\n  };\n\n  const handleAdSelect = (value, option) => {\n    setState(prevState => _objectSpread({}, prevState, {\n      selectedAd: {\n        id: option.props.value,\n        name: option.props.children\n      }\n    }));\n  };\n\n  const {\n    Option\n  } = _Select;\n  const {\n    selectedRowKeys\n  } = state;\n  return __jsx(\"div\", {\n    id: \"performance\",\n    className: \"jsx-290073997\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272\n    },\n    __self: this\n  }, __jsx(_Row, {\n    gutter: 16,\n    style: {\n      width: \"100%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273\n    },\n    __self: this\n  }, __jsx(_Col, {\n    span: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"selection\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"button item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276\n    },\n    __self: this\n  }, __jsx(_Button, {\n    style: {\n      textAlign: \"left\"\n    },\n    className: \"modalButtons\",\n    onClick: () => setModalVisible(true, \"accountModalVisible\"),\n    block: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277\n    },\n    __self: this\n  }, state.selectedAdAccount.name ? state.selectedAdAccount.name : \"Select Ad Account\")), __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"select item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288\n    },\n    __self: this\n  }, __jsx(_Button, {\n    style: {\n      textAlign: \"left\"\n    },\n    onClick: () => setCampaignsModal(true),\n    block: true,\n    loading: state.fetchingCampaigns,\n    disabled: !!!state.selectedAdAccount.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289\n    },\n    __self: this\n  }, state.selectedCampaign.name ? state.selectedCampaign.name : \"Select Campaign\")), __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"select item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301\n    },\n    __self: this\n  }, __jsx(_Select, {\n    disabled: !!!state.selectedCampaign.name,\n    value: state.selectedAdset.name ? state.selectedAdset.name : \"Select Adset\",\n    style: {\n      width: \"100%\"\n    },\n    placeholder: \"Select Adset\",\n    loading: state.fetchingAdsets,\n    showSearch: true,\n    optionFilterProp: \"children\",\n    onSelect: handleAdsetSelect,\n    filterOption: (input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, state.adsets ? state.adsets.data.map((item, index) => {\n    return __jsx(Option, {\n      value: item.id,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, item.name);\n  }) : \"\")), __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"select item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332\n    },\n    __self: this\n  }, __jsx(_Select, {\n    disabled: !!!state.selectedAdset.name,\n    style: {\n      width: \"100%\"\n    },\n    value: state.selectedAd.name ? state.selectedAd.name : \"Select Ad\",\n    placeholder: \"Select ad\",\n    showSearch: true,\n    optionFilterProp: \"children\",\n    onSelect: handleAdSelect,\n    filterOption: (input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333\n    },\n    __self: this\n  }, state.ads ? state.ads.data.map((item, index) => {\n    return __jsx(Option, {\n      value: item.id,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, item.name);\n  }) : \"\")))), __jsx(_Col, {\n    span: 20,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"stats\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"chart\",\n    className: \"jsx-290073997\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-290073997\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365\n    },\n    __self: this\n  }, __jsx(Table, {\n    columns: performanceColumns,\n    onSelection: onSelectionChange,\n    selectedRowKeys: selectedRowKeys,\n    className: \"table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366\n    },\n    __self: this\n  }))))), __jsx(_Modal, {\n    title: \"Select an Ad account\",\n    centered: true,\n    visible: state.accountModalVisible,\n    onOk: () => setModalVisible(false, \"accountModalVisible\"),\n    onCancel: () => setModalVisible(false, \"accountModalVisible\"),\n    okText: \"Next\",\n    cancelText: \"Previous\",\n    okButtonProps: {\n      disabled: !!!state.pagingAccounts.next,\n      onClick: () => handleAccountPagination(state.pagingAccounts.next)\n    },\n    cancelButtonProps: {\n      disabled: !!!state.pagingAccounts.previous,\n      onClick: () => handleAccountPagination(state.pagingAccounts.previous)\n    },\n    width: 1300,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"adAccounts\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395\n    },\n    __self: this\n  }, state.adAccounts ? state.adAccounts.data.map((item, index) => __jsx(\"div\", {\n    key: index,\n    className: \"jsx-290073997\" + \" \" + \"account\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398\n    },\n    __self: this\n  }, __jsx(AdAccount, {\n    name: item.name,\n    accountId: item.id,\n    status: item.account_status,\n    onSelect: handleAccountSelect,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399\n    },\n    __self: this\n  }))) : \"Loading...\"))), __jsx(_Modal, {\n    title: \"Select a campaign\",\n    centered: true,\n    visible: state.campaignModalVisible,\n    onOk: () => setCampaignsModal(false, \"campaignModalVisible\"),\n    onCancel: () => setCampaignsModal(false, \"campaignModalVisible\"),\n    okText: \"Next\",\n    cancelText: \"Previous\",\n    okButtonProps: {\n      disabled: !!!state.pagingCampaigns.next,\n      onClick: () => handleCampaignPagination(state.pagingCampaigns.next)\n    },\n    cancelButtonProps: {\n      disabled: !!!state.pagingCampaigns.previous,\n      onClick: () => handleCampaignPagination(state.pagingCampaigns.previous)\n    },\n    width: 1300,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"adAccounts\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431\n    },\n    __self: this\n  }, state.campaigns ? state.campaigns.data.map((item, index) => __jsx(\"div\", {\n    key: index,\n    className: \"jsx-290073997\" + \" \" + \"account\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434\n    },\n    __self: this\n  }, __jsx(AdAccount, {\n    name: item.name,\n    accountId: item.id // status={item.account_status}\n    ,\n    onSelect: handleCampaignSelect,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435\n    },\n    __self: this\n  }))) : \"Loading...\"))), __jsx(_JSXStyle, {\n    id: \"290073997\",\n    __self: this\n  }, \"#performance.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;margin-top:70px;width:100%;}.selection.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border:1px solid #ccc;border-radius:4px;height:auto;padding:10px;}.item.jsx-290073997{margin-bottom:30px;width:100%;}.stats.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.adAccounts.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.adAccounts.jsx-290073997 .inner.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:90%;}.account.jsx-290073997{min-width:20%;margin:10px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Jlbmtpc3NpL3Byb2plY3RzL2dldGNoL2dldGNoLWZyb250ZW5kLTIuMC9wYWdlcy9wZXJmb3JtYW5jZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErYlMsQUFLMEIsQUFPQSxBQVNNLEFBSU4sQUFLQSxBQUtBLEFBTUMsY0FDRixLQXBCRCxPQXFCYixJQXBCQSw0Q0FqQm9CLEFBT0ksQUFhQSxBQUtDLEFBS1Isa0JBN0JDLGdCQUNMLFdBQ2IsWUE0QlksVUFDWixXQXhCd0IsQUFheEIscUJBS0EsQ0FqQm9CLGtCQUNOLFlBQ0MsYUFDZiIsImZpbGUiOiIvaG9tZS9iZW5raXNzaS9wcm9qZWN0cy9nZXRjaC9nZXRjaC1mcm9udGVuZC0yLjAvcGFnZXMvcGVyZm9ybWFuY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5pbXBvcnQgeyBNb2RhbCwgQnV0dG9uLCBTZWxlY3QsIFJvdywgQ29sIH0gZnJvbSBcImFudGRcIjtcblxuaW1wb3J0IHsgY2hhcnREYXRhIH0gZnJvbSBcIi4uL3V0aWxzL3RhYmxlXCI7XG5cbmltcG9ydCBUYWJsZSBmcm9tIFwiLi4vY29tcG9uZW50cy90YWJsZVwiO1xuaW1wb3J0IEFkQWNjb3VudCBmcm9tIFwiLi4vY29tcG9uZW50cy9hZEFjY291bnRcIjtcbmltcG9ydCB7IHBlcmZvcm1hbmNlQ29sdW1ucyB9IGZyb20gXCIuLi91dGlscy90YWJsZVwiO1xuaW1wb3J0IHtcbiAgZ2V0QWRBY2NvdW50cyxcbiAgZmJQYWdpbmF0ZSxcbiAgZ2V0Q2FtcGFpZ25zLFxuICBnZXRBZHNldHMsXG4gIGdldEFkcyxcbiAgZ2V0SW50ZXJlc3RTdGF0c1xufSBmcm9tIFwiLi4vYXBpL2FwaVwiO1xuXG5mdW5jdGlvbiBQZXJmb3JtYW5jZShwcm9wcykge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICBhY2NvdW50TW9kYWxWaXNpYmxlOiBmYWxzZSxcbiAgICBjYW1wYWlnbk1vZGFsVmlzaWJsZTogZmFsc2UsXG4gICAgc2VsZWN0ZWRSb3dLZXlzOiBudWxsLFxuICAgIHBhZ2luZ0FjY291bnRzOiB7XG4gICAgICBuZXh0OiBcIlwiLFxuICAgICAgcHJldmlvdXM6IFwiXCJcbiAgICB9LFxuICAgIHBhZ2luZ0NhbXBhaWduczoge1xuICAgICAgbmV4dDogXCJcIixcbiAgICAgIHByZXZpb3VzOiBcIlwiXG4gICAgfSxcbiAgICBzZWxlY3RlZEFkQWNjb3VudDoge30sXG4gICAgc2VsZWN0ZWRDYW1wYWlnbjoge30sXG4gICAgc2VsZWN0ZWRBZHNldDoge30sXG4gICAgc2VsZWN0ZWRBZDoge30sXG4gICAgZmV0Y2hpbmdDYW1wYWlnbnM6IGZhbHNlLFxuICAgIGZldGNoaW5nQWRzZXRzOiBmYWxzZVxuICB9KTtcblxuICBjb25zdCB7IGZiSWQsIHVzZXIgfSA9IHByb3BzO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwib24gYnJvd3NlclwiKTtcbiAgICAgIGNvbnN0IHsgQ29sdW1uIH0gPSByZXF1aXJlKFwiQGFudHYvZzJwbG90XCIpO1xuXG4gICAgICBjb25zdCBjaGFydCA9IG5ldyBDb2x1bW4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGFydFwiKSwge1xuICAgICAgICBkYXRhOiBjaGFydERhdGEsXG4gICAgICAgIHhGaWVsZDogXCJuYW1lXCIsXG4gICAgICAgIHlGaWVsZDogXCJ2YWx1ZVwiLFxuICAgICAgICBwYWRkaW5nOiBcImF1dG9cIixcbiAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgIHRleHQ6IFwiSW50ZXJlc3Qgc3RhdHNcIlxuICAgICAgICB9LFxuICAgICAgICBmb3JjZUZpdDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhcImVsXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcnRcIikpO1xuICAgICAgY2hhcnQucmVuZGVyKCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc3RhdGUuYWNjb3VudE1vZGFsVmlzaWJsZSkge1xuICAgICAgZmV0Y2hBZEFjY291bnRzKCk7XG4gICAgfVxuICB9LCBbc3RhdGUuYWNjb3VudE1vZGFsVmlzaWJsZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN0YXRlLnNlbGVjdGVkQWRBY2NvdW50LmlkKSB7XG4gICAgICBzZXRNb2RhbFZpc2libGUoZmFsc2UsIFwiYWNjb3VudE1vZGFsVmlzaWJsZVwiKTtcbiAgICAgIGZldGNoQ2FtcGFpZ25zKCk7XG4gICAgfVxuICB9LCBbc3RhdGUuc2VsZWN0ZWRBZEFjY291bnRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdGF0ZS5zZWxlY3RlZENhbXBhaWduLmlkKSB7XG4gICAgICBmZXRjaEFkc2V0cygpO1xuICAgIH1cbiAgfSwgW3N0YXRlLnNlbGVjdGVkQ2FtcGFpZ25dKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdGF0ZS5zZWxlY3RlZEFkc2V0LmlkKSB7XG4gICAgICBmZXRjaEFkcygpO1xuICAgIH1cbiAgfSwgW3N0YXRlLnNlbGVjdGVkQWRzZXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdGF0ZS5zZWxlY3RlZEFkLmlkKSB7XG4gICAgICBmZXRjaFN0YXRzKCk7XG4gICAgfVxuICB9LCBbc3RhdGUuc2VsZWN0ZWRBZF0pO1xuXG4gIGNvbnN0IHNldE1vZGFsVmlzaWJsZSA9IChzdGF0dXMsIG1vZGFsTmFtZSkgPT4ge1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgW21vZGFsTmFtZV06IHN0YXR1c1xuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBzZXRDYW1wYWlnbnNNb2RhbCA9IG1vZGFsVmlzaWJsZSA9PiB7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBjYW1wYWlnbk1vZGFsVmlzaWJsZTogbW9kYWxWaXNpYmxlXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGZldGNoQWRBY2NvdW50cyA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoc3RhdGUuYWNjb3VudE1vZGFsVmlzaWJsZSkge1xuICAgICAgY29uc29sZS5sb2coXCJmZXRjaCBhZCBhY2NvdW50c1wiKTtcbiAgICAgIGNvbnN0IGFkQWNjb3VudHMgPSBhd2FpdCBnZXRBZEFjY291bnRzKGZiSWQsIHVzZXIueFRva2VuKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiQUQgYWNjb3V0bnNcIiwgYWRBY2NvdW50cyk7XG4gICAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgICBhZEFjY291bnRzOiBhZEFjY291bnRzLFxuICAgICAgICBwYWdpbmdBY2NvdW50czoge1xuICAgICAgICAgIG5leHQ6IGFkQWNjb3VudHMucGFnaW5nLm5leHQgJiYgYWRBY2NvdW50cy5wYWdpbmcubmV4dCxcbiAgICAgICAgICBwcmV2aW91czogYWRBY2NvdW50cy5wYWdpbmcucHJldmlvdXMgJiYgYWRBY2NvdW50cy5wYWdpbmcucHJldmlvdXNcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0ZWRBZEFjY291bnQ6IHt9LFxuICAgICAgICBzZWxlY3RlZENhbXBhaWduOiB7fSxcbiAgICAgICAgc2VsZWN0ZWRBZHNldDoge31cbiAgICAgIH0pKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZmV0Y2hDYW1wYWlnbnMgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBmZXRjaGluZ0NhbXBhaWduczogdHJ1ZSxcbiAgICAgIHNlbGVjdGVkQ2FtcGFpZ246IHt9XG4gICAgfSkpO1xuICAgIGNvbnN0IGFjY291bnRJZCA9IHN0YXRlLnNlbGVjdGVkQWRBY2NvdW50LmlkO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldENhbXBhaWducyhhY2NvdW50SWQsIHVzZXIueFRva2VuKTtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIGNhbXBhaWduczogcmVzLFxuICAgICAgZmV0Y2hpbmdDYW1wYWlnbnM6IGZhbHNlLFxuICAgICAgcGFnaW5nQ2FtcGFpZ25zOiB7XG4gICAgICAgIG5leHQ6IHJlcy5wYWdpbmcgJiYgcmVzLnBhZ2luZy5uZXh0LFxuICAgICAgICBwcmV2aW91czogcmVzLnBhZ2luZyAmJiByZXMucGFnaW5nLnByZXZpb3VzXG4gICAgICB9XG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGZldGNoQWRzZXRzID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgZmV0Y2hpbmdBZHNldHM6IHRydWUsXG4gICAgICBzZWxlY3RlZEFkc2V0OiB7fVxuICAgIH0pKTtcbiAgICBjb25zdCBjYW1wYWlnbklkID0gc3RhdGUuc2VsZWN0ZWRDYW1wYWlnbi5pZDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRBZHNldHMoY2FtcGFpZ25JZCwgdXNlci54VG9rZW4pO1xuICAgIGNvbnNvbGUubG9nKFwic2V0c1wiLCByZXMuZGF0YSk7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBhZHNldHM6IHJlcyxcbiAgICAgIGZldGNoaW5nQWRzZXRzOiBmYWxzZVxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBmZXRjaEFkcyA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIGZldGNoaW5nQWRzOiB0cnVlXG4gICAgfSkpO1xuICAgIGNvbnN0IGFkc2V0SWQgPSBzdGF0ZS5zZWxlY3RlZEFkc2V0LmlkO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldEFkcyhhZHNldElkLCB1c2VyLnhUb2tlbik7XG4gICAgY29uc29sZS5sb2coXCJhZHNcIiwgcmVzKTtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIGFkczogcmVzLFxuICAgICAgZmV0Y2hpbmdBZHM6IGZhbHNlXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGZldGNoU3RhdHMgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBmZXRjaGluZ1N0YXRzOiB0cnVlXG4gICAgfSkpO1xuXG4gICAgY29uc3QgYWRJZCA9IHN0YXRlLnNlbGVjdGVkQWQuaWQ7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0SW50ZXJlc3RTdGF0cyhhZElkLCB1c2VyLnhUb2tlbik7XG4gICAgY29uc29sZS5sb2coXCJzdGF0c1wiLCByZXMpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFjY291bnRQYWdpbmF0aW9uID0gYXN5bmMgcGFnZSA9PiB7XG4gICAgY29uc3QgYWRBY2NvdW50cyA9IGF3YWl0IGZiUGFnaW5hdGUocGFnZSk7XG4gICAgY29uc29sZS5sb2coXCJwYWdpbmF0ZVwiLCBhZEFjY291bnRzKTtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIGFkQWNjb3VudHM6IGFkQWNjb3VudHMsXG4gICAgICBwYWdpbmdBY2NvdW50czoge1xuICAgICAgICBuZXh0OiBhZEFjY291bnRzLnBhZ2luZyAmJiBhZEFjY291bnRzLnBhZ2luZy5uZXh0LFxuICAgICAgICBwcmV2aW91czogYWRBY2NvdW50cy5wYWdpbmcgJiYgYWRBY2NvdW50cy5wYWdpbmcucHJldmlvdXNcbiAgICAgIH1cbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2FtcGFpZ25QYWdpbmF0aW9uID0gYXN5bmMgcGFnZSA9PiB7XG4gICAgY29uc3QgY2FtcGFpZ25zID0gYXdhaXQgZmJQYWdpbmF0ZShwYWdlKTtcbiAgICBjb25zb2xlLmxvZyhcInBhZ2luYXRlXCIsIGNhbXBhaWducyk7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBjYW1wYWlnbnM6IGNhbXBhaWducyxcbiAgICAgIHBhZ2luZ0NhbXBhaWduczoge1xuICAgICAgICBuZXh0OiBjYW1wYWlnbnMucGFnaW5nICYmIGNhbXBhaWducy5wYWdpbmcubmV4dCxcbiAgICAgICAgcHJldmlvdXM6IGNhbXBhaWducy5wYWdpbmcgJiYgY2FtcGFpZ25zLnBhZ2luZy5wcmV2aW91c1xuICAgICAgfVxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IChzZWxlY3RlZFJvd0tleXMsIHNlbGVjdGVkUm93cykgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwicm93c1wiLCBzZWxlY3RlZFJvd3MpO1xuICAgIGNvbnN0IHNlbGVjdGVkSW50ZXJlc3QgPSBzZWxlY3RlZFJvd3MubWFwKGludGVyZXN0ID0+IHtcbiAgICAgIHJldHVybiBpbnRlcmVzdC5uYW1lO1xuICAgIH0pO1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgc2VsZWN0ZWRSb3dLZXlzLFxuICAgICAgc2VsZWN0ZWRJbnRlcmVzdCxcbiAgICAgIHNlbGVjdGVkUm93c1xuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVBY2NvdW50U2VsZWN0ID0gKGlkLCBuYW1lKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBzZWxlY3RlZEFkQWNjb3VudDoge1xuICAgICAgICBpZCxcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVDYW1wYWlnblNlbGVjdCA9IChpZCwgbmFtZSkgPT4ge1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgc2VsZWN0ZWRDYW1wYWlnbjoge1xuICAgICAgICBpZCxcbiAgICAgICAgbmFtZVxuICAgICAgfSxcbiAgICAgIGNhbXBhaWduTW9kYWxWaXNpYmxlOiBmYWxzZVxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVBZHNldFNlbGVjdCA9ICh2YWx1ZSwgb3B0aW9uKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJzZWxlY3RlZFwiLCBvcHRpb24ucHJvcHMuY2hpbGRyZW4pO1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgc2VsZWN0ZWRBZHNldDoge1xuICAgICAgICBpZDogb3B0aW9uLnByb3BzLnZhbHVlLFxuICAgICAgICBuYW1lOiBvcHRpb24ucHJvcHMuY2hpbGRyZW5cbiAgICAgIH1cbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQWRTZWxlY3QgPSAodmFsdWUsIG9wdGlvbikgPT4ge1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgc2VsZWN0ZWRBZDoge1xuICAgICAgICBpZDogb3B0aW9uLnByb3BzLnZhbHVlLFxuICAgICAgICBuYW1lOiBvcHRpb24ucHJvcHMuY2hpbGRyZW5cbiAgICAgIH1cbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgeyBPcHRpb24gfSA9IFNlbGVjdDtcbiAgY29uc3QgeyBzZWxlY3RlZFJvd0tleXMgfSA9IHN0YXRlO1xuICByZXR1cm4gKFxuICAgIDxkaXYgaWQ9XCJwZXJmb3JtYW5jZVwiPlxuICAgICAgPFJvdyBndXR0ZXI9ezE2fSBzdHlsZT17eyB3aWR0aDogXCIxMDAlXCIgfX0+XG4gICAgICAgIDxDb2wgc3Bhbj17NH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3Rpb25cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uIGl0ZW1cIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHRleHRBbGlnbjogXCJsZWZ0XCIgfX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtb2RhbEJ1dHRvbnNcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldE1vZGFsVmlzaWJsZSh0cnVlLCBcImFjY291bnRNb2RhbFZpc2libGVcIil9XG4gICAgICAgICAgICAgICAgYmxvY2tcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtzdGF0ZS5zZWxlY3RlZEFkQWNjb3VudC5uYW1lXG4gICAgICAgICAgICAgICAgICA/IHN0YXRlLnNlbGVjdGVkQWRBY2NvdW50Lm5hbWVcbiAgICAgICAgICAgICAgICAgIDogXCJTZWxlY3QgQWQgQWNjb3VudFwifVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3QgaXRlbVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgdGV4dEFsaWduOiBcImxlZnRcIiB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldENhbXBhaWduc01vZGFsKHRydWUpfVxuICAgICAgICAgICAgICAgIGJsb2NrXG4gICAgICAgICAgICAgICAgbG9hZGluZz17c3RhdGUuZmV0Y2hpbmdDYW1wYWlnbnN9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyEhIXN0YXRlLnNlbGVjdGVkQWRBY2NvdW50Lm5hbWV9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7c3RhdGUuc2VsZWN0ZWRDYW1wYWlnbi5uYW1lXG4gICAgICAgICAgICAgICAgICA/IHN0YXRlLnNlbGVjdGVkQ2FtcGFpZ24ubmFtZVxuICAgICAgICAgICAgICAgICAgOiBcIlNlbGVjdCBDYW1wYWlnblwifVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3QgaXRlbVwiPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyEhIXN0YXRlLnNlbGVjdGVkQ2FtcGFpZ24ubmFtZX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5zZWxlY3RlZEFkc2V0Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgPyBzdGF0ZS5zZWxlY3RlZEFkc2V0Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgOiBcIlNlbGVjdCBBZHNldFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBcIjEwMCVcIiB9fVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VsZWN0IEFkc2V0XCJcbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtzdGF0ZS5mZXRjaGluZ0Fkc2V0c31cbiAgICAgICAgICAgICAgICBzaG93U2VhcmNoXG4gICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICBvblNlbGVjdD17aGFuZGxlQWRzZXRTZWxlY3R9XG4gICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdGlvbikgPT5cbiAgICAgICAgICAgICAgICAgIG9wdGlvbi5wcm9wcy5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PSAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3N0YXRlLmFkc2V0c1xuICAgICAgICAgICAgICAgICAgPyBzdGF0ZS5hZHNldHMuZGF0YS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxPcHRpb24gdmFsdWU9e2l0ZW0uaWR9IGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VsZWN0IGl0ZW1cIj5cbiAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXshISFzdGF0ZS5zZWxlY3RlZEFkc2V0Lm5hbWV9XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiIH19XG4gICAgICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICAgICAgc3RhdGUuc2VsZWN0ZWRBZC5uYW1lID8gc3RhdGUuc2VsZWN0ZWRBZC5uYW1lIDogXCJTZWxlY3QgQWRcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbGVjdCBhZFwiXG4gICAgICAgICAgICAgICAgc2hvd1NlYXJjaFxuICAgICAgICAgICAgICAgIG9wdGlvbkZpbHRlclByb3A9XCJjaGlsZHJlblwiXG4gICAgICAgICAgICAgICAgb25TZWxlY3Q9e2hhbmRsZUFkU2VsZWN0fVxuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbj17KGlucHV0LCBvcHRpb24pID0+XG4gICAgICAgICAgICAgICAgICBvcHRpb24ucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgLmluZGV4T2YoaW5wdXQudG9Mb3dlckNhc2UoKSkgPj0gMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtzdGF0ZS5hZHNcbiAgICAgICAgICAgICAgICAgID8gc3RhdGUuYWRzLmRhdGEubWFwKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8T3B0aW9uIHZhbHVlPXtpdGVtLmlkfSBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvT3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ29sPlxuICAgICAgICA8Q29sIHNwYW49ezIwfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0YXRzXCI+XG4gICAgICAgICAgICA8ZGl2IGlkPVwiY2hhcnRcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxUYWJsZVxuICAgICAgICAgICAgICAgIGNvbHVtbnM9e3BlcmZvcm1hbmNlQ29sdW1uc31cbiAgICAgICAgICAgICAgICBvblNlbGVjdGlvbj17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3dLZXlzPXtzZWxlY3RlZFJvd0tleXN9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGVcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ29sPlxuICAgICAgPC9Sb3c+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9XCJTZWxlY3QgYW4gQWQgYWNjb3VudFwiXG4gICAgICAgIGNlbnRlcmVkXG4gICAgICAgIHZpc2libGU9e3N0YXRlLmFjY291bnRNb2RhbFZpc2libGV9XG4gICAgICAgIG9uT2s9eygpID0+IHNldE1vZGFsVmlzaWJsZShmYWxzZSwgXCJhY2NvdW50TW9kYWxWaXNpYmxlXCIpfVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4gc2V0TW9kYWxWaXNpYmxlKGZhbHNlLCBcImFjY291bnRNb2RhbFZpc2libGVcIil9XG4gICAgICAgIG9rVGV4dD1cIk5leHRcIlxuICAgICAgICBjYW5jZWxUZXh0PVwiUHJldmlvdXNcIlxuICAgICAgICBva0J1dHRvblByb3BzPXt7XG4gICAgICAgICAgZGlzYWJsZWQ6ICEhIXN0YXRlLnBhZ2luZ0FjY291bnRzLm5leHQsXG4gICAgICAgICAgb25DbGljazogKCkgPT4gaGFuZGxlQWNjb3VudFBhZ2luYXRpb24oc3RhdGUucGFnaW5nQWNjb3VudHMubmV4dClcbiAgICAgICAgfX1cbiAgICAgICAgY2FuY2VsQnV0dG9uUHJvcHM9e3tcbiAgICAgICAgICBkaXNhYmxlZDogISEhc3RhdGUucGFnaW5nQWNjb3VudHMucHJldmlvdXMsXG4gICAgICAgICAgb25DbGljazogKCkgPT4gaGFuZGxlQWNjb3VudFBhZ2luYXRpb24oc3RhdGUucGFnaW5nQWNjb3VudHMucHJldmlvdXMpXG4gICAgICAgIH19XG4gICAgICAgIHdpZHRoPXsxMzAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFkQWNjb3VudHNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubmVyXCI+XG4gICAgICAgICAgICB7c3RhdGUuYWRBY2NvdW50c1xuICAgICAgICAgICAgICA/IHN0YXRlLmFkQWNjb3VudHMuZGF0YS5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjY291bnRcIiBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgICAgICAgICAgPEFkQWNjb3VudFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2l0ZW0ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ9e2l0ZW0uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgc3RhdHVzPXtpdGVtLmFjY291bnRfc3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXtoYW5kbGVBY2NvdW50U2VsZWN0fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgOiBcIkxvYWRpbmcuLi5cIn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsXG4gICAgICAgIHRpdGxlPVwiU2VsZWN0IGEgY2FtcGFpZ25cIlxuICAgICAgICBjZW50ZXJlZFxuICAgICAgICB2aXNpYmxlPXtzdGF0ZS5jYW1wYWlnbk1vZGFsVmlzaWJsZX1cbiAgICAgICAgb25Paz17KCkgPT4gc2V0Q2FtcGFpZ25zTW9kYWwoZmFsc2UsIFwiY2FtcGFpZ25Nb2RhbFZpc2libGVcIil9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiBzZXRDYW1wYWlnbnNNb2RhbChmYWxzZSwgXCJjYW1wYWlnbk1vZGFsVmlzaWJsZVwiKX1cbiAgICAgICAgb2tUZXh0PVwiTmV4dFwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJQcmV2aW91c1wiXG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3tcbiAgICAgICAgICBkaXNhYmxlZDogISEhc3RhdGUucGFnaW5nQ2FtcGFpZ25zLm5leHQsXG4gICAgICAgICAgb25DbGljazogKCkgPT4gaGFuZGxlQ2FtcGFpZ25QYWdpbmF0aW9uKHN0YXRlLnBhZ2luZ0NhbXBhaWducy5uZXh0KVxuICAgICAgICB9fVxuICAgICAgICBjYW5jZWxCdXR0b25Qcm9wcz17e1xuICAgICAgICAgIGRpc2FibGVkOiAhISFzdGF0ZS5wYWdpbmdDYW1wYWlnbnMucHJldmlvdXMsXG4gICAgICAgICAgb25DbGljazogKCkgPT5cbiAgICAgICAgICAgIGhhbmRsZUNhbXBhaWduUGFnaW5hdGlvbihzdGF0ZS5wYWdpbmdDYW1wYWlnbnMucHJldmlvdXMpXG4gICAgICAgIH19XG4gICAgICAgIHdpZHRoPXsxMzAwfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFkQWNjb3VudHNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubmVyXCI+XG4gICAgICAgICAgICB7c3RhdGUuY2FtcGFpZ25zXG4gICAgICAgICAgICAgID8gc3RhdGUuY2FtcGFpZ25zLmRhdGEubWFwKChpdGVtLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY2NvdW50XCIga2V5PXtpbmRleH0+XG4gICAgICAgICAgICAgICAgICAgIDxBZEFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtpdGVtLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkPXtpdGVtLmlkfVxuICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXR1cz17aXRlbS5hY2NvdW50X3N0YXR1c31cbiAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdD17aGFuZGxlQ2FtcGFpZ25TZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICA6IFwiTG9hZGluZy4uLlwifVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8c3R5bGUganN4PlxuICAgICAgICB7YFxuICAgICAgICAgIC5tb2RhbEJ1dHRvbnMge1xuICAgICAgICAgIH1cbiAgICAgICAgICAjcGVyZm9ybWFuY2Uge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDcwcHg7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuc2VsZWN0aW9uIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLml0ZW0ge1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAuc3RhdHMge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmFkQWNjb3VudHMge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5hZEFjY291bnRzIC5pbm5lciB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICAgICAgd2lkdGg6IDkwJTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuYWNjb3VudCB7XG4gICAgICAgICAgICBtaW4td2lkdGg6IDIwJTtcbiAgICAgICAgICAgIG1hcmdpbjogMTBweDtcbiAgICAgICAgICB9XG4gICAgICAgIGB9XG4gICAgICA8L3N0eWxlPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSBzdGF0ZSA9PiAoe1xuICB1c2VyOiBzdGF0ZS51c2VyLmN1cnJlbnRVc2VyLFxuICBmYklkOiBzdGF0ZS51c2VyLmZiVG9rZW4uZmJJZFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzKShQZXJmb3JtYW5jZSk7XG4iXX0= */\\n/*@ sourceURL=/home/benkissi/projects/getch/getch-frontend-2.0/pages/performance.js */\"));\n}\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser,\n  fbId: state.user.fbToken.fbId\n});\n\nexport default connect(mapStateToProps)(Performance);","map":{"version":3,"sources":["/home/benkissi/projects/getch/getch-frontend-2.0/pages/performance.js"],"names":["useState","useEffect","connect","chartData","Table","AdAccount","performanceColumns","getAdAccounts","fbPaginate","getCampaigns","getAdsets","getAds","getInterestStats","Performance","props","state","setState","accountModalVisible","campaignModalVisible","selectedRowKeys","pagingAccounts","next","previous","pagingCampaigns","selectedAdAccount","selectedCampaign","selectedAdset","selectedAd","fetchingCampaigns","fetchingAdsets","fbId","user","console","log","Column","require","chart","document","getElementById","data","xField","yField","padding","title","visible","text","forceFit","render","fetchAdAccounts","id","setModalVisible","fetchCampaigns","fetchAdsets","fetchAds","fetchStats","status","modalName","prevState","setCampaignsModal","modalVisible","adAccounts","xToken","paging","accountId","res","campaigns","campaignId","adsets","fetchingAds","adsetId","ads","fetchingStats","adId","handleAccountPagination","page","handleCampaignPagination","onSelectionChange","selectedRows","selectedInterest","map","interest","name","handleAccountSelect","handleCampaignSelect","handleAdsetSelect","value","option","children","handleAdSelect","Option","width","textAlign","input","toLowerCase","indexOf","item","index","disabled","onClick","account_status","mapStateToProps","currentUser","fbToken"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,OAAT,QAAwB,aAAxB;AAGA,SAASC,SAAT,QAA0B,gBAA1B;AAEA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,kBAAT,QAAmC,gBAAnC;AACA,SACEC,aADF,EAEEC,UAFF,EAGEC,YAHF,EAIEC,SAJF,EAKEC,MALF,EAMEC,gBANF,QAOO,YAPP;;AASA,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AAC1B,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBhB,QAAQ,CAAC;AACjCiB,IAAAA,mBAAmB,EAAE,KADY;AAEjCC,IAAAA,oBAAoB,EAAE,KAFW;AAGjCC,IAAAA,eAAe,EAAE,IAHgB;AAIjCC,IAAAA,cAAc,EAAE;AACdC,MAAAA,IAAI,EAAE,EADQ;AAEdC,MAAAA,QAAQ,EAAE;AAFI,KAJiB;AAQjCC,IAAAA,eAAe,EAAE;AACfF,MAAAA,IAAI,EAAE,EADS;AAEfC,MAAAA,QAAQ,EAAE;AAFK,KARgB;AAYjCE,IAAAA,iBAAiB,EAAE,EAZc;AAajCC,IAAAA,gBAAgB,EAAE,EAbe;AAcjCC,IAAAA,aAAa,EAAE,EAdkB;AAejCC,IAAAA,UAAU,EAAE,EAfqB;AAgBjCC,IAAAA,iBAAiB,EAAE,KAhBc;AAiBjCC,IAAAA,cAAc,EAAE;AAjBiB,GAAD,CAAlC;AAoBA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAiBjB,KAAvB;AAEAb,EAAAA,SAAS,CAAC,MAAM;AACd,eAAmC;AACjC+B,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;;AACA,YAAM;AAAEC,QAAAA;AAAF,UAAaC,OAAO,CAAC,cAAD,CAA1B;;AAEA,YAAMC,KAAK,GAAG,IAAIF,MAAJ,CAAWG,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAX,EAA6C;AACzDC,QAAAA,IAAI,EAAEpC,SADmD;AAEzDqC,QAAAA,MAAM,EAAE,MAFiD;AAGzDC,QAAAA,MAAM,EAAE,OAHiD;AAIzDC,QAAAA,OAAO,EAAE,MAJgD;AAKzDC,QAAAA,KAAK,EAAE;AACLC,UAAAA,OAAO,EAAE,IADJ;AAELC,UAAAA,IAAI,EAAE;AAFD,SALkD;AASzDC,QAAAA,QAAQ,EAAE;AAT+C,OAA7C,CAAd;AAWAd,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBI,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAlB;AACAF,MAAAA,KAAK,CAACW,MAAN;AACD;AACF,GAnBQ,EAmBN,EAnBM,CAAT;AAqBA9C,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,KAAK,CAACE,mBAAV,EAA+B;AAC7B+B,MAAAA,eAAe;AAChB;AACF,GAJQ,EAIN,CAACjC,KAAK,CAACE,mBAAP,CAJM,CAAT;AAMAhB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,KAAK,CAACS,iBAAN,CAAwByB,EAA5B,EAAgC;AAC9BC,MAAAA,eAAe,CAAC,KAAD,EAAQ,qBAAR,CAAf;AACAC,MAAAA,cAAc;AACf;AACF,GALQ,EAKN,CAACpC,KAAK,CAACS,iBAAP,CALM,CAAT;AAOAvB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,KAAK,CAACU,gBAAN,CAAuBwB,EAA3B,EAA+B;AAC7BG,MAAAA,WAAW;AACZ;AACF,GAJQ,EAIN,CAACrC,KAAK,CAACU,gBAAP,CAJM,CAAT;AAMAxB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,KAAK,CAACW,aAAN,CAAoBuB,EAAxB,EAA4B;AAC1BI,MAAAA,QAAQ;AACT;AACF,GAJQ,EAIN,CAACtC,KAAK,CAACW,aAAP,CAJM,CAAT;AAMAzB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,KAAK,CAACY,UAAN,CAAiBsB,EAArB,EAAyB;AACvBK,MAAAA,UAAU;AACX;AACF,GAJQ,EAIN,CAACvC,KAAK,CAACY,UAAP,CAJM,CAAT;;AAMA,QAAMuB,eAAe,GAAG,CAACK,MAAD,EAASC,SAAT,KAAuB;AAC7CxC,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhB,OAACD,SAAD,GAAaD;AAFG,MAAV,CAAR;AAID,GALD;;AAOA,QAAMG,iBAAiB,GAAGC,YAAY,IAAI;AACxC3C,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBvC,MAAAA,oBAAoB,EAAEyC;AAFN,MAAV,CAAR;AAID,GALD;;AAOA,QAAMX,eAAe,GAAG,YAAY;AAClC,QAAIjC,KAAK,CAACE,mBAAV,EAA+B;AAC7Be,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,YAAM2B,UAAU,GAAG,MAAMrD,aAAa,CAACuB,IAAD,EAAOC,IAAI,CAAC8B,MAAZ,CAAtC;AACA7B,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B2B,UAA3B;AACA5C,MAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBG,QAAAA,UAAU,EAAEA,UAFI;AAGhBxC,QAAAA,cAAc,EAAE;AACdC,UAAAA,IAAI,EAAEuC,UAAU,CAACE,MAAX,CAAkBzC,IAAlB,IAA0BuC,UAAU,CAACE,MAAX,CAAkBzC,IADpC;AAEdC,UAAAA,QAAQ,EAAEsC,UAAU,CAACE,MAAX,CAAkBxC,QAAlB,IAA8BsC,UAAU,CAACE,MAAX,CAAkBxC;AAF5C,SAHA;AAOhBE,QAAAA,iBAAiB,EAAE,EAPH;AAQhBC,QAAAA,gBAAgB,EAAE,EARF;AAShBC,QAAAA,aAAa,EAAE;AATC,QAAV,CAAR;AAWD;AACF,GAjBD;;AAmBA,QAAMyB,cAAc,GAAG,YAAY;AACjCnC,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhB7B,MAAAA,iBAAiB,EAAE,IAFH;AAGhBH,MAAAA,gBAAgB,EAAE;AAHF,MAAV,CAAR;AAKA,UAAMsC,SAAS,GAAGhD,KAAK,CAACS,iBAAN,CAAwByB,EAA1C;AACA,UAAMe,GAAG,GAAG,MAAMvD,YAAY,CAACsD,SAAD,EAAYhC,IAAI,CAAC8B,MAAjB,CAA9B;AACA7C,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBQ,MAAAA,SAAS,EAAED,GAFK;AAGhBpC,MAAAA,iBAAiB,EAAE,KAHH;AAIhBL,MAAAA,eAAe,EAAE;AACfF,QAAAA,IAAI,EAAE2C,GAAG,CAACF,MAAJ,IAAcE,GAAG,CAACF,MAAJ,CAAWzC,IADhB;AAEfC,QAAAA,QAAQ,EAAE0C,GAAG,CAACF,MAAJ,IAAcE,GAAG,CAACF,MAAJ,CAAWxC;AAFpB;AAJD,MAAV,CAAR;AASD,GAjBD;;AAmBA,QAAM8B,WAAW,GAAG,YAAY;AAC9BpC,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhB5B,MAAAA,cAAc,EAAE,IAFA;AAGhBH,MAAAA,aAAa,EAAE;AAHC,MAAV,CAAR;AAKA,UAAMwC,UAAU,GAAGnD,KAAK,CAACU,gBAAN,CAAuBwB,EAA1C;AACA,UAAMe,GAAG,GAAG,MAAMtD,SAAS,CAACwD,UAAD,EAAanC,IAAI,CAAC8B,MAAlB,CAA3B;AACA7B,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB+B,GAAG,CAACzB,IAAxB;AACAvB,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBU,MAAAA,MAAM,EAAEH,GAFQ;AAGhBnC,MAAAA,cAAc,EAAE;AAHA,MAAV,CAAR;AAKD,GAdD;;AAgBA,QAAMwB,QAAQ,GAAG,YAAY;AAC3BrC,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBW,MAAAA,WAAW,EAAE;AAFG,MAAV,CAAR;AAIA,UAAMC,OAAO,GAAGtD,KAAK,CAACW,aAAN,CAAoBuB,EAApC;AACA,UAAMe,GAAG,GAAG,MAAMrD,MAAM,CAAC0D,OAAD,EAAUtC,IAAI,CAAC8B,MAAf,CAAxB;AACA7B,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmB+B,GAAnB;AACAhD,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBa,MAAAA,GAAG,EAAEN,GAFW;AAGhBI,MAAAA,WAAW,EAAE;AAHG,MAAV,CAAR;AAKD,GAbD;;AAeA,QAAMd,UAAU,GAAG,YAAY;AAC7BtC,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBc,MAAAA,aAAa,EAAE;AAFC,MAAV,CAAR;AAKA,UAAMC,IAAI,GAAGzD,KAAK,CAACY,UAAN,CAAiBsB,EAA9B;AACA,UAAMe,GAAG,GAAG,MAAMpD,gBAAgB,CAAC4D,IAAD,EAAOzC,IAAI,CAAC8B,MAAZ,CAAlC;AACA7B,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB+B,GAArB;AACD,GATD;;AAWA,QAAMS,uBAAuB,GAAG,MAAMC,IAAN,IAAc;AAC5C,UAAMd,UAAU,GAAG,MAAMpD,UAAU,CAACkE,IAAD,CAAnC;AACA1C,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB2B,UAAxB;AACA5C,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBG,MAAAA,UAAU,EAAEA,UAFI;AAGhBxC,MAAAA,cAAc,EAAE;AACdC,QAAAA,IAAI,EAAEuC,UAAU,CAACE,MAAX,IAAqBF,UAAU,CAACE,MAAX,CAAkBzC,IAD/B;AAEdC,QAAAA,QAAQ,EAAEsC,UAAU,CAACE,MAAX,IAAqBF,UAAU,CAACE,MAAX,CAAkBxC;AAFnC;AAHA,MAAV,CAAR;AAQD,GAXD;;AAaA,QAAMqD,wBAAwB,GAAG,MAAMD,IAAN,IAAc;AAC7C,UAAMT,SAAS,GAAG,MAAMzD,UAAU,CAACkE,IAAD,CAAlC;AACA1C,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBgC,SAAxB;AACAjD,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBQ,MAAAA,SAAS,EAAEA,SAFK;AAGhB1C,MAAAA,eAAe,EAAE;AACfF,QAAAA,IAAI,EAAE4C,SAAS,CAACH,MAAV,IAAoBG,SAAS,CAACH,MAAV,CAAiBzC,IAD5B;AAEfC,QAAAA,QAAQ,EAAE2C,SAAS,CAACH,MAAV,IAAoBG,SAAS,CAACH,MAAV,CAAiBxC;AAFhC;AAHD,MAAV,CAAR;AAQD,GAXD;;AAaA,QAAMsD,iBAAiB,GAAG,CAACzD,eAAD,EAAkB0D,YAAlB,KAAmC;AAC3D7C,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB4C,YAApB;AACA,UAAMC,gBAAgB,GAAGD,YAAY,CAACE,GAAb,CAAiBC,QAAQ,IAAI;AACpD,aAAOA,QAAQ,CAACC,IAAhB;AACD,KAFwB,CAAzB;AAGAjE,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBtC,MAAAA,eAFgB;AAGhB2D,MAAAA,gBAHgB;AAIhBD,MAAAA;AAJgB,MAAV,CAAR;AAMD,GAXD;;AAaA,QAAMK,mBAAmB,GAAG,CAACjC,EAAD,EAAKgC,IAAL,KAAc;AACxCjE,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBjC,MAAAA,iBAAiB,EAAE;AACjByB,QAAAA,EADiB;AAEjBgC,QAAAA;AAFiB;AAFH,MAAV,CAAR;AAOD,GARD;;AAUA,QAAME,oBAAoB,GAAG,CAAClC,EAAD,EAAKgC,IAAL,KAAc;AACzCjE,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhBhC,MAAAA,gBAAgB,EAAE;AAChBwB,QAAAA,EADgB;AAEhBgC,QAAAA;AAFgB,OAFF;AAMhB/D,MAAAA,oBAAoB,EAAE;AANN,MAAV,CAAR;AAQD,GATD;;AAWA,QAAMkE,iBAAiB,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAC3CtD,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBqD,MAAM,CAACxE,KAAP,CAAayE,QAArC;AACAvE,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhB/B,MAAAA,aAAa,EAAE;AACbuB,QAAAA,EAAE,EAAEqC,MAAM,CAACxE,KAAP,CAAauE,KADJ;AAEbJ,QAAAA,IAAI,EAAEK,MAAM,CAACxE,KAAP,CAAayE;AAFN;AAFC,MAAV,CAAR;AAOD,GATD;;AAWA,QAAMC,cAAc,GAAG,CAACH,KAAD,EAAQC,MAAR,KAAmB;AACxCtE,IAAAA,QAAQ,CAACyC,SAAS,sBACbA,SADa;AAEhB9B,MAAAA,UAAU,EAAE;AACVsB,QAAAA,EAAE,EAAEqC,MAAM,CAACxE,KAAP,CAAauE,KADP;AAEVJ,QAAAA,IAAI,EAAEK,MAAM,CAACxE,KAAP,CAAayE;AAFT;AAFI,MAAV,CAAR;AAOD,GARD;;AAUA,QAAM;AAAEE,IAAAA;AAAF,aAAN;AACA,QAAM;AAAEtE,IAAAA;AAAF,MAAsBJ,KAA5B;AACA,SACE;AAAK,IAAA,EAAE,EAAC,aAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,MAAM,EAAE,EAAb;AAAiB,IAAA,KAAK,EAAE;AAAE2E,MAAAA,KAAK,EAAE;AAAT,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,IAAI,EAAE,CAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE;AAAb,KADT;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,OAAO,EAAE,MAAMzC,eAAe,CAAC,IAAD,EAAO,qBAAP,CAHhC;AAIE,IAAA,KAAK,MAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMGnC,KAAK,CAACS,iBAAN,CAAwByD,IAAxB,GACGlE,KAAK,CAACS,iBAAN,CAAwByD,IAD3B,GAEG,mBARN,CADF,CADF,EAaE;AAAA,uCAAe,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,KAAK,EAAE;AAAEU,MAAAA,SAAS,EAAE;AAAb,KADT;AAEE,IAAA,OAAO,EAAE,MAAMjC,iBAAiB,CAAC,IAAD,CAFlC;AAGE,IAAA,KAAK,MAHP;AAIE,IAAA,OAAO,EAAE3C,KAAK,CAACa,iBAJjB;AAKE,IAAA,QAAQ,EAAE,CAAC,CAAC,CAACb,KAAK,CAACS,iBAAN,CAAwByD,IALvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOGlE,KAAK,CAACU,gBAAN,CAAuBwD,IAAvB,GACGlE,KAAK,CAACU,gBAAN,CAAuBwD,IAD1B,GAEG,iBATN,CADF,CAbF,EA0BE;AAAA,uCAAe,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,QAAQ,EAAE,CAAC,CAAC,CAAClE,KAAK,CAACU,gBAAN,CAAuBwD,IADtC;AAEE,IAAA,KAAK,EACHlE,KAAK,CAACW,aAAN,CAAoBuD,IAApB,GACIlE,KAAK,CAACW,aAAN,CAAoBuD,IADxB,GAEI,cALR;AAOE,IAAA,KAAK,EAAE;AAAES,MAAAA,KAAK,EAAE;AAAT,KAPT;AAQE,IAAA,WAAW,EAAC,cARd;AASE,IAAA,OAAO,EAAE3E,KAAK,CAACc,cATjB;AAUE,IAAA,UAAU,MAVZ;AAWE,IAAA,gBAAgB,EAAC,UAXnB;AAYE,IAAA,QAAQ,EAAEuD,iBAZZ;AAaE,IAAA,YAAY,EAAE,CAACQ,KAAD,EAAQN,MAAR,KACZA,MAAM,CAACxE,KAAP,CAAayE,QAAb,CACGM,WADH,GAEGC,OAFH,CAEWF,KAAK,CAACC,WAAN,EAFX,KAEmC,CAhBvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAmBG9E,KAAK,CAACoD,MAAN,GACGpD,KAAK,CAACoD,MAAN,CAAa5B,IAAb,CAAkBwC,GAAlB,CAAsB,CAACgB,IAAD,EAAOC,KAAP,KAAiB;AACrC,WACE,MAAC,MAAD;AAAQ,MAAA,KAAK,EAAED,IAAI,CAAC9C,EAApB;AAAwB,MAAA,GAAG,EAAE+C,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGD,IAAI,CAACd,IADR,CADF;AAKD,GAND,CADH,GAQG,EA3BN,CADF,CA1BF,EAyDE;AAAA,uCAAe,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,QAAQ,EAAE,CAAC,CAAC,CAAClE,KAAK,CAACW,aAAN,CAAoBuD,IADnC;AAEE,IAAA,KAAK,EAAE;AAAES,MAAAA,KAAK,EAAE;AAAT,KAFT;AAGE,IAAA,KAAK,EACH3E,KAAK,CAACY,UAAN,CAAiBsD,IAAjB,GAAwBlE,KAAK,CAACY,UAAN,CAAiBsD,IAAzC,GAAgD,WAJpD;AAME,IAAA,WAAW,EAAC,WANd;AAOE,IAAA,UAAU,MAPZ;AAQE,IAAA,gBAAgB,EAAC,UARnB;AASE,IAAA,QAAQ,EAAEO,cATZ;AAUE,IAAA,YAAY,EAAE,CAACI,KAAD,EAAQN,MAAR,KACZA,MAAM,CAACxE,KAAP,CAAayE,QAAb,CACGM,WADH,GAEGC,OAFH,CAEWF,KAAK,CAACC,WAAN,EAFX,KAEmC,CAbvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAgBG9E,KAAK,CAACuD,GAAN,GACGvD,KAAK,CAACuD,GAAN,CAAU/B,IAAV,CAAewC,GAAf,CAAmB,CAACgB,IAAD,EAAOC,KAAP,KAAiB;AAClC,WACE,MAAC,MAAD;AAAQ,MAAA,KAAK,EAAED,IAAI,CAAC9C,EAApB;AAAwB,MAAA,GAAG,EAAE+C,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGD,IAAI,CAACd,IADR,CADF;AAKD,GAND,CADH,GAQG,EAxBN,CADF,CAzDF,CADF,CADF,EAyFE;AAAK,IAAA,IAAI,EAAE,EAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,EAAE,EAAC,OAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AACE,IAAA,OAAO,EAAE3E,kBADX;AAEE,IAAA,WAAW,EAAEsE,iBAFf;AAGE,IAAA,eAAe,EAAEzD,eAHnB;AAIE,IAAA,SAAS,EAAC,OAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CADF,CAzFF,CADF,EAwGE;AACE,IAAA,KAAK,EAAC,sBADR;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,OAAO,EAAEJ,KAAK,CAACE,mBAHjB;AAIE,IAAA,IAAI,EAAE,MAAMiC,eAAe,CAAC,KAAD,EAAQ,qBAAR,CAJ7B;AAKE,IAAA,QAAQ,EAAE,MAAMA,eAAe,CAAC,KAAD,EAAQ,qBAAR,CALjC;AAME,IAAA,MAAM,EAAC,MANT;AAOE,IAAA,UAAU,EAAC,UAPb;AAQE,IAAA,aAAa,EAAE;AACb+C,MAAAA,QAAQ,EAAE,CAAC,CAAC,CAAClF,KAAK,CAACK,cAAN,CAAqBC,IADrB;AAEb6E,MAAAA,OAAO,EAAE,MAAMzB,uBAAuB,CAAC1D,KAAK,CAACK,cAAN,CAAqBC,IAAtB;AAFzB,KARjB;AAYE,IAAA,iBAAiB,EAAE;AACjB4E,MAAAA,QAAQ,EAAE,CAAC,CAAC,CAAClF,KAAK,CAACK,cAAN,CAAqBE,QADjB;AAEjB4E,MAAAA,OAAO,EAAE,MAAMzB,uBAAuB,CAAC1D,KAAK,CAACK,cAAN,CAAqBE,QAAtB;AAFrB,KAZrB;AAgBE,IAAA,KAAK,EAAE,IAhBT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAkBE;AAAA,uCAAe,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGP,KAAK,CAAC6C,UAAN,GACG7C,KAAK,CAAC6C,UAAN,CAAiBrB,IAAjB,CAAsBwC,GAAtB,CAA0B,CAACgB,IAAD,EAAOC,KAAP,KACxB;AAAyB,IAAA,GAAG,EAAEA,KAA9B;AAAA,uCAAe,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AACE,IAAA,IAAI,EAAED,IAAI,CAACd,IADb;AAEE,IAAA,SAAS,EAAEc,IAAI,CAAC9C,EAFlB;AAGE,IAAA,MAAM,EAAE8C,IAAI,CAACI,cAHf;AAIE,IAAA,QAAQ,EAAEjB,mBAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADH,GAWG,YAZN,CADF,CAlBF,CAxGF,EA2IE;AACE,IAAA,KAAK,EAAC,mBADR;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,OAAO,EAAEnE,KAAK,CAACG,oBAHjB;AAIE,IAAA,IAAI,EAAE,MAAMwC,iBAAiB,CAAC,KAAD,EAAQ,sBAAR,CAJ/B;AAKE,IAAA,QAAQ,EAAE,MAAMA,iBAAiB,CAAC,KAAD,EAAQ,sBAAR,CALnC;AAME,IAAA,MAAM,EAAC,MANT;AAOE,IAAA,UAAU,EAAC,UAPb;AAQE,IAAA,aAAa,EAAE;AACbuC,MAAAA,QAAQ,EAAE,CAAC,CAAC,CAAClF,KAAK,CAACQ,eAAN,CAAsBF,IADtB;AAEb6E,MAAAA,OAAO,EAAE,MAAMvB,wBAAwB,CAAC5D,KAAK,CAACQ,eAAN,CAAsBF,IAAvB;AAF1B,KARjB;AAYE,IAAA,iBAAiB,EAAE;AACjB4E,MAAAA,QAAQ,EAAE,CAAC,CAAC,CAAClF,KAAK,CAACQ,eAAN,CAAsBD,QADlB;AAEjB4E,MAAAA,OAAO,EAAE,MACPvB,wBAAwB,CAAC5D,KAAK,CAACQ,eAAN,CAAsBD,QAAvB;AAHT,KAZrB;AAiBE,IAAA,KAAK,EAAE,IAjBT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAmBE;AAAA,uCAAe,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGP,KAAK,CAACkD,SAAN,GACGlD,KAAK,CAACkD,SAAN,CAAgB1B,IAAhB,CAAqBwC,GAArB,CAAyB,CAACgB,IAAD,EAAOC,KAAP,KACvB;AAAyB,IAAA,GAAG,EAAEA,KAA9B;AAAA,uCAAe,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AACE,IAAA,IAAI,EAAED,IAAI,CAACd,IADb;AAEE,IAAA,SAAS,EAAEc,IAAI,CAAC9C,EAFlB,CAGE;AAHF;AAIE,IAAA,QAAQ,EAAEkC,oBAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADH,GAWG,YAZN,CADF,CAnBF,CA3IF;AAAA;AAAA;AAAA,wgpBADF;AAgOD;;AAED,MAAMiB,eAAe,GAAGrF,KAAK,KAAK;AAChCgB,EAAAA,IAAI,EAAEhB,KAAK,CAACgB,IAAN,CAAWsE,WADe;AAEhCvE,EAAAA,IAAI,EAAEf,KAAK,CAACgB,IAAN,CAAWuE,OAAX,CAAmBxE;AAFO,CAAL,CAA7B;;AAKA,eAAe5B,OAAO,CAACkG,eAAD,CAAP,CAAyBvF,WAAzB,CAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Modal, Button, Select, Row, Col } from \"antd\";\n\nimport { chartData } from \"../utils/table\";\n\nimport Table from \"../components/table\";\nimport AdAccount from \"../components/adAccount\";\nimport { performanceColumns } from \"../utils/table\";\nimport {\n  getAdAccounts,\n  fbPaginate,\n  getCampaigns,\n  getAdsets,\n  getAds,\n  getInterestStats\n} from \"../api/api\";\n\nfunction Performance(props) {\n  const [state, setState] = useState({\n    accountModalVisible: false,\n    campaignModalVisible: false,\n    selectedRowKeys: null,\n    pagingAccounts: {\n      next: \"\",\n      previous: \"\"\n    },\n    pagingCampaigns: {\n      next: \"\",\n      previous: \"\"\n    },\n    selectedAdAccount: {},\n    selectedCampaign: {},\n    selectedAdset: {},\n    selectedAd: {},\n    fetchingCampaigns: false,\n    fetchingAdsets: false\n  });\n\n  const { fbId, user } = props;\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      console.log(\"on browser\");\n      const { Column } = require(\"@antv/g2plot\");\n\n      const chart = new Column(document.getElementById(\"chart\"), {\n        data: chartData,\n        xField: \"name\",\n        yField: \"value\",\n        padding: \"auto\",\n        title: {\n          visible: true,\n          text: \"Interest stats\"\n        },\n        forceFit: true\n      });\n      console.log(\"el\", document.getElementById(\"chart\"));\n      chart.render();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (state.accountModalVisible) {\n      fetchAdAccounts();\n    }\n  }, [state.accountModalVisible]);\n\n  useEffect(() => {\n    if (state.selectedAdAccount.id) {\n      setModalVisible(false, \"accountModalVisible\");\n      fetchCampaigns();\n    }\n  }, [state.selectedAdAccount]);\n\n  useEffect(() => {\n    if (state.selectedCampaign.id) {\n      fetchAdsets();\n    }\n  }, [state.selectedCampaign]);\n\n  useEffect(() => {\n    if (state.selectedAdset.id) {\n      fetchAds();\n    }\n  }, [state.selectedAdset]);\n\n  useEffect(() => {\n    if (state.selectedAd.id) {\n      fetchStats();\n    }\n  }, [state.selectedAd]);\n\n  const setModalVisible = (status, modalName) => {\n    setState(prevState => ({\n      ...prevState,\n      [modalName]: status\n    }));\n  };\n\n  const setCampaignsModal = modalVisible => {\n    setState(prevState => ({\n      ...prevState,\n      campaignModalVisible: modalVisible\n    }));\n  };\n\n  const fetchAdAccounts = async () => {\n    if (state.accountModalVisible) {\n      console.log(\"fetch ad accounts\");\n      const adAccounts = await getAdAccounts(fbId, user.xToken);\n      console.log(\"AD accoutns\", adAccounts);\n      setState(prevState => ({\n        ...prevState,\n        adAccounts: adAccounts,\n        pagingAccounts: {\n          next: adAccounts.paging.next && adAccounts.paging.next,\n          previous: adAccounts.paging.previous && adAccounts.paging.previous\n        },\n        selectedAdAccount: {},\n        selectedCampaign: {},\n        selectedAdset: {}\n      }));\n    }\n  };\n\n  const fetchCampaigns = async () => {\n    setState(prevState => ({\n      ...prevState,\n      fetchingCampaigns: true,\n      selectedCampaign: {}\n    }));\n    const accountId = state.selectedAdAccount.id;\n    const res = await getCampaigns(accountId, user.xToken);\n    setState(prevState => ({\n      ...prevState,\n      campaigns: res,\n      fetchingCampaigns: false,\n      pagingCampaigns: {\n        next: res.paging && res.paging.next,\n        previous: res.paging && res.paging.previous\n      }\n    }));\n  };\n\n  const fetchAdsets = async () => {\n    setState(prevState => ({\n      ...prevState,\n      fetchingAdsets: true,\n      selectedAdset: {}\n    }));\n    const campaignId = state.selectedCampaign.id;\n    const res = await getAdsets(campaignId, user.xToken);\n    console.log(\"sets\", res.data);\n    setState(prevState => ({\n      ...prevState,\n      adsets: res,\n      fetchingAdsets: false\n    }));\n  };\n\n  const fetchAds = async () => {\n    setState(prevState => ({\n      ...prevState,\n      fetchingAds: true\n    }));\n    const adsetId = state.selectedAdset.id;\n    const res = await getAds(adsetId, user.xToken);\n    console.log(\"ads\", res);\n    setState(prevState => ({\n      ...prevState,\n      ads: res,\n      fetchingAds: false\n    }));\n  };\n\n  const fetchStats = async () => {\n    setState(prevState => ({\n      ...prevState,\n      fetchingStats: true\n    }));\n\n    const adId = state.selectedAd.id;\n    const res = await getInterestStats(adId, user.xToken);\n    console.log(\"stats\", res);\n  };\n\n  const handleAccountPagination = async page => {\n    const adAccounts = await fbPaginate(page);\n    console.log(\"paginate\", adAccounts);\n    setState(prevState => ({\n      ...prevState,\n      adAccounts: adAccounts,\n      pagingAccounts: {\n        next: adAccounts.paging && adAccounts.paging.next,\n        previous: adAccounts.paging && adAccounts.paging.previous\n      }\n    }));\n  };\n\n  const handleCampaignPagination = async page => {\n    const campaigns = await fbPaginate(page);\n    console.log(\"paginate\", campaigns);\n    setState(prevState => ({\n      ...prevState,\n      campaigns: campaigns,\n      pagingCampaigns: {\n        next: campaigns.paging && campaigns.paging.next,\n        previous: campaigns.paging && campaigns.paging.previous\n      }\n    }));\n  };\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    console.log(\"rows\", selectedRows);\n    const selectedInterest = selectedRows.map(interest => {\n      return interest.name;\n    });\n    setState(prevState => ({\n      ...prevState,\n      selectedRowKeys,\n      selectedInterest,\n      selectedRows\n    }));\n  };\n\n  const handleAccountSelect = (id, name) => {\n    setState(prevState => ({\n      ...prevState,\n      selectedAdAccount: {\n        id,\n        name\n      }\n    }));\n  };\n\n  const handleCampaignSelect = (id, name) => {\n    setState(prevState => ({\n      ...prevState,\n      selectedCampaign: {\n        id,\n        name\n      },\n      campaignModalVisible: false\n    }));\n  };\n\n  const handleAdsetSelect = (value, option) => {\n    console.log(\"selected\", option.props.children);\n    setState(prevState => ({\n      ...prevState,\n      selectedAdset: {\n        id: option.props.value,\n        name: option.props.children\n      }\n    }));\n  };\n\n  const handleAdSelect = (value, option) => {\n    setState(prevState => ({\n      ...prevState,\n      selectedAd: {\n        id: option.props.value,\n        name: option.props.children\n      }\n    }));\n  };\n\n  const { Option } = Select;\n  const { selectedRowKeys } = state;\n  return (\n    <div id=\"performance\">\n      <Row gutter={16} style={{ width: \"100%\" }}>\n        <Col span={4}>\n          <div className=\"selection\">\n            <div className=\"button item\">\n              <Button\n                style={{ textAlign: \"left\" }}\n                className=\"modalButtons\"\n                onClick={() => setModalVisible(true, \"accountModalVisible\")}\n                block\n              >\n                {state.selectedAdAccount.name\n                  ? state.selectedAdAccount.name\n                  : \"Select Ad Account\"}\n              </Button>\n            </div>\n            <div className=\"select item\">\n              <Button\n                style={{ textAlign: \"left\" }}\n                onClick={() => setCampaignsModal(true)}\n                block\n                loading={state.fetchingCampaigns}\n                disabled={!!!state.selectedAdAccount.name}\n              >\n                {state.selectedCampaign.name\n                  ? state.selectedCampaign.name\n                  : \"Select Campaign\"}\n              </Button>\n            </div>\n            <div className=\"select item\">\n              <Select\n                disabled={!!!state.selectedCampaign.name}\n                value={\n                  state.selectedAdset.name\n                    ? state.selectedAdset.name\n                    : \"Select Adset\"\n                }\n                style={{ width: \"100%\" }}\n                placeholder=\"Select Adset\"\n                loading={state.fetchingAdsets}\n                showSearch\n                optionFilterProp=\"children\"\n                onSelect={handleAdsetSelect}\n                filterOption={(input, option) =>\n                  option.props.children\n                    .toLowerCase()\n                    .indexOf(input.toLowerCase()) >= 0\n                }\n              >\n                {state.adsets\n                  ? state.adsets.data.map((item, index) => {\n                      return (\n                        <Option value={item.id} key={index}>\n                          {item.name}\n                        </Option>\n                      );\n                    })\n                  : \"\"}\n              </Select>\n            </div>\n            <div className=\"select item\">\n              <Select\n                disabled={!!!state.selectedAdset.name}\n                style={{ width: \"100%\" }}\n                value={\n                  state.selectedAd.name ? state.selectedAd.name : \"Select Ad\"\n                }\n                placeholder=\"Select ad\"\n                showSearch\n                optionFilterProp=\"children\"\n                onSelect={handleAdSelect}\n                filterOption={(input, option) =>\n                  option.props.children\n                    .toLowerCase()\n                    .indexOf(input.toLowerCase()) >= 0\n                }\n              >\n                {state.ads\n                  ? state.ads.data.map((item, index) => {\n                      return (\n                        <Option value={item.id} key={index}>\n                          {item.name}\n                        </Option>\n                      );\n                    })\n                  : \"\"}\n              </Select>\n            </div>\n          </div>\n        </Col>\n        <Col span={20}>\n          <div className=\"stats\">\n            <div id=\"chart\"></div>\n            <div>\n              <Table\n                columns={performanceColumns}\n                onSelection={onSelectionChange}\n                selectedRowKeys={selectedRowKeys}\n                className=\"table\"\n              />\n            </div>\n          </div>\n        </Col>\n      </Row>\n      <Modal\n        title=\"Select an Ad account\"\n        centered\n        visible={state.accountModalVisible}\n        onOk={() => setModalVisible(false, \"accountModalVisible\")}\n        onCancel={() => setModalVisible(false, \"accountModalVisible\")}\n        okText=\"Next\"\n        cancelText=\"Previous\"\n        okButtonProps={{\n          disabled: !!!state.pagingAccounts.next,\n          onClick: () => handleAccountPagination(state.pagingAccounts.next)\n        }}\n        cancelButtonProps={{\n          disabled: !!!state.pagingAccounts.previous,\n          onClick: () => handleAccountPagination(state.pagingAccounts.previous)\n        }}\n        width={1300}\n      >\n        <div className=\"adAccounts\">\n          <div className=\"inner\">\n            {state.adAccounts\n              ? state.adAccounts.data.map((item, index) => (\n                  <div className=\"account\" key={index}>\n                    <AdAccount\n                      name={item.name}\n                      accountId={item.id}\n                      status={item.account_status}\n                      onSelect={handleAccountSelect}\n                    />\n                  </div>\n                ))\n              : \"Loading...\"}\n          </div>\n        </div>\n      </Modal>\n      <Modal\n        title=\"Select a campaign\"\n        centered\n        visible={state.campaignModalVisible}\n        onOk={() => setCampaignsModal(false, \"campaignModalVisible\")}\n        onCancel={() => setCampaignsModal(false, \"campaignModalVisible\")}\n        okText=\"Next\"\n        cancelText=\"Previous\"\n        okButtonProps={{\n          disabled: !!!state.pagingCampaigns.next,\n          onClick: () => handleCampaignPagination(state.pagingCampaigns.next)\n        }}\n        cancelButtonProps={{\n          disabled: !!!state.pagingCampaigns.previous,\n          onClick: () =>\n            handleCampaignPagination(state.pagingCampaigns.previous)\n        }}\n        width={1300}\n      >\n        <div className=\"adAccounts\">\n          <div className=\"inner\">\n            {state.campaigns\n              ? state.campaigns.data.map((item, index) => (\n                  <div className=\"account\" key={index}>\n                    <AdAccount\n                      name={item.name}\n                      accountId={item.id}\n                      // status={item.account_status}\n                      onSelect={handleCampaignSelect}\n                    />\n                  </div>\n                ))\n              : \"Loading...\"}\n          </div>\n        </div>\n      </Modal>\n      <style jsx>\n        {`\n          .modalButtons {\n          }\n          #performance {\n            display: flex;\n            position: relative;\n            margin-top: 70px;\n            width: 100%;\n          }\n\n          .selection {\n            display: flex;\n            flex-direction: column;\n            border: 1px solid #ccc;\n            border-radius: 4px;\n            height: auto;\n            padding: 10px;\n          }\n\n          .item {\n            margin-bottom: 30px;\n            width: 100%;\n          }\n          .stats {\n            display: flex;\n            flex-direction: column;\n          }\n\n          .adAccounts {\n            display: flex;\n            justify-content: center;\n          }\n\n          .adAccounts .inner {\n            display: flex;\n            flex-wrap: wrap;\n            width: 90%;\n          }\n\n          .account {\n            min-width: 20%;\n            margin: 10px;\n          }\n        `}\n      </style>\n    </div>\n  );\n}\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser,\n  fbId: state.user.fbToken.fbId\n});\n\nexport default connect(mapStateToProps)(Performance);\n"]},"metadata":{},"sourceType":"module"}