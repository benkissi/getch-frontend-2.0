{"ast":null,"code":"import \"antd/lib/slider/style\";\nimport _Slider from \"antd/lib/slider\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nvar _jsxFileName = \"/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport FacebookLogin from \"react-facebook-login/dist/facebook-login-render-props\";\nimport { ExportToCsv } from \"export-to-csv\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport Loader from 'react-loader-spinner';\nimport DashboardLayout from \"../components/dashboardLayout\";\nimport Header from \"../components/header\";\nimport InterestTable from \"../components/table\";\nimport SideBar from \"../components/sideBar\";\nimport { tableColumns } from \"../utils/table\";\nimport { addScore, getInterestNames } from \"../utils/search\";\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser, authFacebook } from \"../redux/user/user-actions\";\nimport { searchStart } from \"../redux/search/search-actions\";\nimport \"react-toastify/scss/main.scss\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nconst Index = props => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    selectedInterest: [],\n    min: null,\n    max: null\n  });\n  const {\n    token,\n    user,\n    addUser,\n    fbToken,\n    interestData,\n    searchInterest,\n    keyword,\n    interestCount,\n    searching\n  } = props;\n  const {\n    Search\n  } = _Input;\n  const router = useRouter();\n  useEffect(() => {\n    if (token) {\n      const decoded = decodeToken(token);\n      const {\n        _id,\n        name,\n        email,\n        domain\n      } = decoded;\n      const userData = {\n        id: _id,\n        name,\n        email,\n        domain\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n  useEffect(() => {\n    const max = Math.max.apply(Math, interestData.map(item => item['audience_size']));\n    const min = Math.min.apply(Math, interestData.map(item => item['audience_size']));\n    setState(_objectSpread({}, state, {\n      max: max,\n      min: min,\n      interests: interestData,\n      interestNumber: interestCount\n    }));\n  }, [interestData, interestCount]);\n\n  const faceAuthStart = () => {\n    console.log(\"#### FB auth start\");\n  };\n\n  const responseFacebook = async res => {\n    const {\n      authFb,\n      user\n    } = props;\n    const {\n      accessToken\n    } = res;\n    authFb(accessToken, user.id);\n  };\n\n  const getInterest = async value => {\n    await searchInterest(fbToken.token, value, 500);\n  };\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    console.log(\"rows\", selectedRows);\n    const selectedInterest = selectedRows.map(interest => {\n      return interest.name;\n    });\n    setState(_objectSpread({}, state, {\n      selectedRowKeys,\n      selectedInterest,\n      selectedRows\n    }));\n  };\n\n  const onCopy = () => {\n    const {\n      selectedInterest\n    } = state;\n    console.log(\"copy\", selectedInterest);\n\n    if (selectedInterest.length) {\n      navigator.clipboard.writeText(selectedInterest).then(() => {\n        console.log(\"you copied\", selectedInterest.length);\n        toast.success(`You copied ${selectedInterest.length} items`, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      });\n    } else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  const actions = [__jsx(FacebookLogin, {\n    appId: process.env.FB_APP_ID,\n    autoLoad: true,\n    fields: \"name,email,id\",\n    onClick: faceAuthStart,\n    scope: \"ads_management, email\",\n    callback: responseFacebook,\n    render: renderProps => __jsx(_Button, {\n      disabled: !!fbToken,\n      type: \"primary\",\n      onClick: renderProps.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Connect Facebook\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  })];\n\n  const sideBar = __jsx(SideBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  });\n\n  const options = {\n    fieldSeparator: \",\",\n    quoteStrings: '\"',\n    decimalSeparator: \".\",\n    showLabels: true,\n    showTitle: true,\n    title: \"Interest List\",\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true\n  };\n  const csvExporter = new ExportToCsv(options);\n\n  const handleExport = async () => {\n    // const {selectedRows} = state\n    if (interestData) {\n      let exportArray = [];\n      interestData.forEach(item => {\n        let readyExport = {};\n        readyExport.id = item.id;\n        readyExport.name = item.name;\n        readyExport.audience = item.audience_size;\n        readyExport.description = item.description;\n        readyExport.topic = item.topic;\n        readyExport.path = JSON.stringify(item.path);\n        readyExport.score = item.relevance;\n        exportArray.push(readyExport);\n      });\n      await csvExporter.generateCsv(exportArray);\n      toast.success(`You downloaded ${interestData.length} items`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    } else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  const onFilterChange = value => {\n    const filtered = interestData.filter(item => item['audience_size'] >= value[0] && item['audience_size'] <= value[1]);\n    setState(_objectSpread({}, state, {\n      interests: filtered\n    }));\n  };\n\n  const {\n    interests,\n    selectedRowKeys,\n    interestNumber,\n    max,\n    min\n  } = state;\n  return __jsx(DashboardLayout, {\n    sidebar: sideBar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"wrapper\",\n    className: \"jsx-4175416261\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, __jsx(ToastContainer, {\n    position: \"top-left\",\n    autoClose: 5000,\n    hideProgressBar: false,\n    newestOnTop: false,\n    closeOnClick: true,\n    rtl: false,\n    pauseOnVisibilityChange: true,\n    draggable: true,\n    pauseOnHover: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"top\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, __jsx(Header, {\n    actions: actions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    id: \"main-content\",\n    className: \"jsx-4175416261\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, __jsx(Search, {\n    placeholder: \"Find Facebook interest for a keyword\",\n    enterButton: \"Getch\",\n    size: \"large\",\n    onSearch: value => getInterest(value),\n    className: \"jsx-4175416261\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-4175416261\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, interestNumber ? __jsx(\"p\", {\n    className: \"jsx-4175416261\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236\n    },\n    __self: this\n  }, __jsx(\"b\", {\n    className: \"jsx-4175416261\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, interestNumber), \" interest found for \\\"\", keyword, \"\\\"\") : \"\"), __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"filter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    className: \"jsx-4175416261\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }, \"Filter audience\"), __jsx(_Slider, {\n    max: max,\n    min: min,\n    range: true,\n    defaultValue: [min, max],\n    onAfterChange: onFilterChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"actions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  }, __jsx(_Button, {\n    onClick: onCopy,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  }, \"Copy\")), __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257\n    },\n    __self: this\n  }, __jsx(_Button, {\n    onClick: handleExport,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  }, \"Download as CSV\")), __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"divider\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261\n    },\n    __self: this\n  }, __jsx(_Button, {\n    onClick: handleExport,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }, \"Save as project\")), __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264\n    },\n    __self: this\n  }, __jsx(_Button, {\n    color: \"#4e54c8\",\n    onClick: handleExport,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265\n    },\n    __self: this\n  }, \"Save to Facebook\"))))), __jsx(\"div\", {\n    id: \"table\",\n    className: \"jsx-4175416261\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  }, searching ? __jsx(\"div\", {\n    className: \"jsx-4175416261\" + \" \" + \"loader\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  }, __jsx(Loader, {\n    type: \"Bars\",\n    color: \"#4e54c8\",\n    height: 100,\n    width: 100,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275\n    },\n    __self: this\n  })) : __jsx(InterestTable, {\n    onSelection: onSelectionChange,\n    selectedRowKeys: selectedRowKeys,\n    className: \"table\",\n    columns: tableColumns,\n    dataSource: interests,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282\n    },\n    __self: this\n  }))), __jsx(_JSXStyle, {\n    id: \"4175416261\",\n    __self: this\n  }, \"#wrapper.jsx-4175416261{margin:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}#main-content.jsx-4175416261{margin-top:30px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}#table.jsx-4175416261{margin-top:30px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.controls.jsx-4175416261{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.actions.jsx-4175416261{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.actions.jsx-4175416261>*.jsx-4175416261{margin-left:5px;}.loader.jsx-4175416261{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:500px;}.divider.jsx-4175416261{height:35px;width:0;border-left:1px solid #ccc;margin:0 0 0 5px;}.filter.jsx-4175416261{width:30%;}.top.jsx-4175416261{position:fixed;bottom:0;width:inherit;background-color:white;text-align:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Jlbmtpc3NpL3Byb2plY3RzL2dldGNoL2dldGNoLWZyb250ZW5kLTIuMC9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxU29CLEFBR3lCLEFBTUksQUFJQSxBQUtILEFBTUEsQUFJRyxBQUdILEFBT0QsQUFRRixBQUlLLFVBSGpCLEVBM0NlLEFBbUNOLEdBWUUsQ0F6Q0csQUFJQSxBQWVkLElBVzZCLElBWWIsY0FDUyxTQVpOLGNBYUMsR0FYcEIsVUF4QmtCLEFBTWxCLEFBT3lCLEtBdUJ6QixPQWxEd0IsQ0FNeEIsQUFJQSxHQUtnQywwRUFkbEIsU0EyQk8sR0ExQnJCLDZCQWNBLDZEQWFlLGFBRWYiLCJmaWxlIjoiL2hvbWUvYmVua2lzc2kvcHJvamVjdHMvZ2V0Y2gvZ2V0Y2gtZnJvbnRlbmQtMi4wL3BhZ2VzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5pbXBvcnQgeyBCdXR0b24sIElucHV0LCBTbGlkZXIgIH0gZnJvbSBcImFudGRcIjtcbmltcG9ydCBGYWNlYm9va0xvZ2luIGZyb20gXCJyZWFjdC1mYWNlYm9vay1sb2dpbi9kaXN0L2ZhY2Vib29rLWxvZ2luLXJlbmRlci1wcm9wc1wiO1xuaW1wb3J0IHsgRXhwb3J0VG9Dc3YgfSBmcm9tIFwiZXhwb3J0LXRvLWNzdlwiO1xuaW1wb3J0IHsgVG9hc3RDb250YWluZXIsIHRvYXN0IH0gZnJvbSBcInJlYWN0LXRvYXN0aWZ5XCI7XG5pbXBvcnQgTG9hZGVyIGZyb20gJ3JlYWN0LWxvYWRlci1zcGlubmVyJ1xuXG5pbXBvcnQgRGFzaGJvYXJkTGF5b3V0IGZyb20gXCIuLi9jb21wb25lbnRzL2Rhc2hib2FyZExheW91dFwiO1xuaW1wb3J0IEhlYWRlciBmcm9tIFwiLi4vY29tcG9uZW50cy9oZWFkZXJcIjtcbmltcG9ydCBJbnRlcmVzdFRhYmxlIGZyb20gXCIuLi9jb21wb25lbnRzL3RhYmxlXCI7XG5pbXBvcnQgU2lkZUJhciBmcm9tIFwiLi4vY29tcG9uZW50cy9zaWRlQmFyXCI7XG5cbmltcG9ydCB7IHRhYmxlQ29sdW1ucyB9IGZyb20gXCIuLi91dGlscy90YWJsZVwiO1xuaW1wb3J0IHsgYWRkU2NvcmUsIGdldEludGVyZXN0TmFtZXMgfSBmcm9tIFwiLi4vdXRpbHMvc2VhcmNoXCI7XG5cbmltcG9ydCBkZWNvZGVUb2tlbiBmcm9tIFwiLi4vdXRpbHMvYXV0aFwiO1xuaW1wb3J0IHsgYWRkaW5nQ3VycmVudFVzZXIsIGF1dGhGYWNlYm9vayB9IGZyb20gXCIuLi9yZWR1eC91c2VyL3VzZXItYWN0aW9uc1wiO1xuaW1wb3J0IHsgc2VhcmNoU3RhcnQgfSBmcm9tIFwiLi4vcmVkdXgvc2VhcmNoL3NlYXJjaC1hY3Rpb25zXCI7XG5cbmltcG9ydCBcInJlYWN0LXRvYXN0aWZ5L3Njc3MvbWFpbi5zY3NzXCI7XG5pbXBvcnQgXCJyZWFjdC1sb2FkZXItc3Bpbm5lci9kaXN0L2xvYWRlci9jc3MvcmVhY3Qtc3Bpbm5lci1sb2FkZXIuY3NzXCJcblxuY29uc3QgSW5kZXggPSBwcm9wcyA9PiB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoeyBzZWxlY3RlZEludGVyZXN0OiBbXSwgbWluOiBudWxsLCBtYXg6IG51bGwgfSk7XG4gIGNvbnN0IHtcbiAgICB0b2tlbixcbiAgICB1c2VyLFxuICAgIGFkZFVzZXIsXG4gICAgZmJUb2tlbixcbiAgICBpbnRlcmVzdERhdGEsXG4gICAgc2VhcmNoSW50ZXJlc3QsXG4gICAga2V5d29yZCxcbiAgICBpbnRlcmVzdENvdW50LFxuICAgIHNlYXJjaGluZ1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHsgU2VhcmNoIH0gPSBJbnB1dDtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGVUb2tlbih0b2tlbik7XG4gICAgICBjb25zdCB7IF9pZCwgbmFtZSwgZW1haWwsIGRvbWFpbiB9ID0gZGVjb2RlZDtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgICBpZDogX2lkLFxuICAgICAgICBuYW1lLFxuICAgICAgICBlbWFpbCxcbiAgICAgICAgZG9tYWluXG4gICAgICB9O1xuICAgICAgYWRkVXNlcih1c2VyRGF0YSk7XG4gICAgfSBlbHNlIGlmICh1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZyh1c2VyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm91dGVyLnB1c2goXCIvc2lnbmluXCIpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbWF4ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgaW50ZXJlc3REYXRhLm1hcChpdGVtID0+IGl0ZW1bJ2F1ZGllbmNlX3NpemUnXSkpXG4gICAgY29uc3QgbWluID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgaW50ZXJlc3REYXRhLm1hcChpdGVtID0+IGl0ZW1bJ2F1ZGllbmNlX3NpemUnXSkpXG5cbiAgICBzZXRTdGF0ZSh7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIG1heDogbWF4LFxuICAgICAgbWluOiBtaW4sXG4gICAgICBpbnRlcmVzdHM6IGludGVyZXN0RGF0YSxcbiAgICAgIGludGVyZXN0TnVtYmVyOiBpbnRlcmVzdENvdW50XG4gICAgfSk7XG4gIH0sIFtpbnRlcmVzdERhdGEsIGludGVyZXN0Q291bnRdKTtcblxuICBjb25zdCBmYWNlQXV0aFN0YXJ0ID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiIyMjIyBGQiBhdXRoIHN0YXJ0XCIpO1xuICB9O1xuXG4gIGNvbnN0IHJlc3BvbnNlRmFjZWJvb2sgPSBhc3luYyByZXMgPT4ge1xuICAgIGNvbnN0IHsgYXV0aEZiLCB1c2VyIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IGFjY2Vzc1Rva2VuIH0gPSByZXM7XG4gICAgYXV0aEZiKGFjY2Vzc1Rva2VuLCB1c2VyLmlkKTtcbiAgfTtcblxuICBjb25zdCBnZXRJbnRlcmVzdCA9IGFzeW5jIHZhbHVlID0+IHtcbiAgICBhd2FpdCBzZWFyY2hJbnRlcmVzdChmYlRva2VuLnRva2VuLCB2YWx1ZSwgNTAwKTtcbiAgfTtcblxuICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IChzZWxlY3RlZFJvd0tleXMsIHNlbGVjdGVkUm93cykgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwicm93c1wiLCBzZWxlY3RlZFJvd3MpO1xuICAgIGNvbnN0IHNlbGVjdGVkSW50ZXJlc3QgPSBzZWxlY3RlZFJvd3MubWFwKGludGVyZXN0ID0+IHtcbiAgICAgIHJldHVybiBpbnRlcmVzdC5uYW1lO1xuICAgIH0pO1xuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc2VsZWN0ZWRSb3dLZXlzLFxuICAgICAgc2VsZWN0ZWRJbnRlcmVzdCxcbiAgICAgIHNlbGVjdGVkUm93c1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IG9uQ29weSA9ICgpID0+IHtcbiAgICBjb25zdCB7IHNlbGVjdGVkSW50ZXJlc3QgfSA9IHN0YXRlO1xuICAgIGNvbnNvbGUubG9nKFwiY29weVwiLCBzZWxlY3RlZEludGVyZXN0KTtcbiAgICBpZiAoc2VsZWN0ZWRJbnRlcmVzdC5sZW5ndGgpIHtcbiAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHNlbGVjdGVkSW50ZXJlc3QpLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcInlvdSBjb3BpZWRcIiwgc2VsZWN0ZWRJbnRlcmVzdC5sZW5ndGgpO1xuXG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MoYFlvdSBjb3BpZWQgJHtzZWxlY3RlZEludGVyZXN0Lmxlbmd0aH0gaXRlbXNgLCB7XG4gICAgICAgICAgcG9zaXRpb246IFwidG9wLXJpZ2h0XCIsXG4gICAgICAgICAgYXV0b0Nsb3NlOiA1MDAwLFxuICAgICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgICBkcmFnZ2FibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9ZWxzZXtcbiAgICAgIHRvYXN0LmVycm9yKGBZb3UgaGF2ZSBub3QgbWFkZSBhbnkgc2VsZWN0aW9uYCwge1xuICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgYXV0b0Nsb3NlOiA1MDAwLFxuICAgICAgICBoaWRlUHJvZ3Jlc3NCYXI6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWN0aW9ucyA9IFtcbiAgICA8RmFjZWJvb2tMb2dpblxuICAgICAgYXBwSWQ9e3Byb2Nlc3MuZW52LkZCX0FQUF9JRH1cbiAgICAgIGF1dG9Mb2FkPXt0cnVlfVxuICAgICAgZmllbGRzPVwibmFtZSxlbWFpbCxpZFwiXG4gICAgICBvbkNsaWNrPXtmYWNlQXV0aFN0YXJ0fVxuICAgICAgc2NvcGU9XCJhZHNfbWFuYWdlbWVudCwgZW1haWxcIlxuICAgICAgY2FsbGJhY2s9e3Jlc3BvbnNlRmFjZWJvb2t9XG4gICAgICByZW5kZXI9e3JlbmRlclByb3BzID0+IChcbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIGRpc2FibGVkPXshIWZiVG9rZW59XG4gICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgIG9uQ2xpY2s9e3JlbmRlclByb3BzLm9uQ2xpY2t9XG4gICAgICAgID5cbiAgICAgICAgICBDb25uZWN0IEZhY2Vib29rXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgKX1cbiAgICAvPlxuICBdO1xuXG4gIGNvbnN0IHNpZGVCYXIgPSA8U2lkZUJhciAvPjtcblxuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGZpZWxkU2VwYXJhdG9yOiBcIixcIixcbiAgICBxdW90ZVN0cmluZ3M6ICdcIicsXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogXCIuXCIsXG4gICAgc2hvd0xhYmVsczogdHJ1ZSxcbiAgICBzaG93VGl0bGU6IHRydWUsXG4gICAgdGl0bGU6IFwiSW50ZXJlc3QgTGlzdFwiLFxuICAgIHVzZVRleHRGaWxlOiBmYWxzZSxcbiAgICB1c2VCb206IHRydWUsXG4gICAgdXNlS2V5c0FzSGVhZGVyczogdHJ1ZVxuICB9O1xuICBjb25zdCBjc3ZFeHBvcnRlciA9IG5ldyBFeHBvcnRUb0NzdihvcHRpb25zKTtcblxuICBjb25zdCBoYW5kbGVFeHBvcnQgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gY29uc3Qge3NlbGVjdGVkUm93c30gPSBzdGF0ZVxuICAgIGlmKGludGVyZXN0RGF0YSl7XG4gICAgICBsZXQgZXhwb3J0QXJyYXkgPSBbXTtcbiAgICAgIGludGVyZXN0RGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBsZXQgcmVhZHlFeHBvcnQgPSB7fTtcbiAgICAgICAgcmVhZHlFeHBvcnQuaWQgPSBpdGVtLmlkO1xuICAgICAgICByZWFkeUV4cG9ydC5uYW1lID0gaXRlbS5uYW1lO1xuICAgICAgICByZWFkeUV4cG9ydC5hdWRpZW5jZSA9IGl0ZW0uYXVkaWVuY2Vfc2l6ZTtcbiAgICAgICAgcmVhZHlFeHBvcnQuZGVzY3JpcHRpb24gPSBpdGVtLmRlc2NyaXB0aW9uO1xuICAgICAgICByZWFkeUV4cG9ydC50b3BpYyA9IGl0ZW0udG9waWM7XG4gICAgICAgIHJlYWR5RXhwb3J0LnBhdGggPSBKU09OLnN0cmluZ2lmeShpdGVtLnBhdGgpO1xuICAgICAgICByZWFkeUV4cG9ydC5zY29yZSA9IGl0ZW0ucmVsZXZhbmNlO1xuICAgICAgICBleHBvcnRBcnJheS5wdXNoKHJlYWR5RXhwb3J0KTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBjc3ZFeHBvcnRlci5nZW5lcmF0ZUNzdihleHBvcnRBcnJheSk7XG4gICAgICB0b2FzdC5zdWNjZXNzKGBZb3UgZG93bmxvYWRlZCAke2ludGVyZXN0RGF0YS5sZW5ndGh9IGl0ZW1zYCwge1xuICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgYXV0b0Nsb3NlOiA1MDAwLFxuICAgICAgICBoaWRlUHJvZ3Jlc3NCYXI6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9ZWxzZSB7XG4gICAgICB0b2FzdC5lcnJvcihgWW91IGhhdmUgbm90IG1hZGUgYW55IHNlbGVjdGlvbmAsIHtcbiAgICAgICAgcG9zaXRpb246IFwidG9wLXJpZ2h0XCIsXG4gICAgICAgIGF1dG9DbG9zZTogMzAwMCxcbiAgICAgICAgaGlkZVByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uRmlsdGVyQ2hhbmdlID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgZmlsdGVyZWQgPSBpbnRlcmVzdERhdGEuZmlsdGVyKGl0ZW0gPT4gaXRlbVsnYXVkaWVuY2Vfc2l6ZSddID49IHZhbHVlWzBdICYmIGl0ZW1bJ2F1ZGllbmNlX3NpemUnXSA8PSB2YWx1ZVsxXSlcbiAgICBzZXRTdGF0ZSh7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGludGVyZXN0czogZmlsdGVyZWRcblxuICAgIH0pXG4gIH1cblxuICBjb25zdCB7IGludGVyZXN0cywgc2VsZWN0ZWRSb3dLZXlzLCBpbnRlcmVzdE51bWJlciwgbWF4LCBtaW4gfSA9IHN0YXRlO1xuICByZXR1cm4gKFxuICAgIDxEYXNoYm9hcmRMYXlvdXQgc2lkZWJhcj17c2lkZUJhcn0+XG4gICAgICA8ZGl2IGlkPVwid3JhcHBlclwiPlxuICAgICAgICA8VG9hc3RDb250YWluZXJcbiAgICAgICAgICBwb3NpdGlvbj1cInRvcC1sZWZ0XCJcbiAgICAgICAgICBhdXRvQ2xvc2U9ezUwMDB9XG4gICAgICAgICAgaGlkZVByb2dyZXNzQmFyPXtmYWxzZX1cbiAgICAgICAgICBuZXdlc3RPblRvcD17ZmFsc2V9XG4gICAgICAgICAgY2xvc2VPbkNsaWNrXG4gICAgICAgICAgcnRsPXtmYWxzZX1cbiAgICAgICAgICBwYXVzZU9uVmlzaWJpbGl0eUNoYW5nZVxuICAgICAgICAgIGRyYWdnYWJsZVxuICAgICAgICAgIHBhdXNlT25Ib3ZlclxuICAgICAgICAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvcFwiPlxuICAgICAgICA8SGVhZGVyIGFjdGlvbnM9e2FjdGlvbnN9IC8+XG4gICAgICAgIDxkaXYgaWQ9XCJtYWluLWNvbnRlbnRcIj5cbiAgICAgICAgICBcbiAgICAgICAgICA8U2VhcmNoXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkZpbmQgRmFjZWJvb2sgaW50ZXJlc3QgZm9yIGEga2V5d29yZFwiXG4gICAgICAgICAgICBlbnRlckJ1dHRvbj1cIkdldGNoXCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvblNlYXJjaD17dmFsdWUgPT4gZ2V0SW50ZXJlc3QodmFsdWUpfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sc1wiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAge2ludGVyZXN0TnVtYmVyID8gKFxuICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgPGI+e2ludGVyZXN0TnVtYmVyfTwvYj4gaW50ZXJlc3QgZm91bmQgZm9yIFwie2tleXdvcmR9XCJcbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbHRlclwiPlxuICAgICAgICAgICAgICA8cD5GaWx0ZXIgYXVkaWVuY2U8L3A+XG4gICAgICAgICAgICAgIDxTbGlkZXIgXG4gICAgICAgICAgICAgICAgbWF4PXttYXh9XG4gICAgICAgICAgICAgICAgbWluPXttaW59XG4gICAgICAgICAgICAgICAgcmFuZ2UgXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtbbWluLCBtYXhdfVxuICAgICAgICAgICAgICAgIG9uQWZ0ZXJDaGFuZ2U9e29uRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e29uQ29weX0+Q29weTwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUV4cG9ydH0+RG93bmxvYWQgYXMgQ1NWPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdmlkZXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUV4cG9ydH0+U2F2ZSBhcyBwcm9qZWN0PC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gY29sb3I9XCIjNGU1NGM4XCIgb25DbGljaz17aGFuZGxlRXhwb3J0fT5TYXZlIHRvIEZhY2Vib29rPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGlkPVwidGFibGVcIj5cbiAgICAgICAgICB7XG4gICAgICAgICAgICBzZWFyY2hpbmcgPyBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkZXJcIj5cbiAgICAgICAgICAgICAgICA8TG9hZGVyXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiQmFyc1wiXG4gICAgICAgICAgICAgICAgICBjb2xvcj1cIiM0ZTU0YzhcIlxuICAgICAgICAgICAgICAgICAgaGVpZ2h0PXsxMDB9XG4gICAgICAgICAgICAgICAgICB3aWR0aD17MTAwfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PjpcbiAgICAgICAgICAgICAgPEludGVyZXN0VGFibGVcbiAgICAgICAgICAgICAgICBvblNlbGVjdGlvbj17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3dLZXlzPXtzZWxlY3RlZFJvd0tleXN9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGVcIlxuICAgICAgICAgICAgICAgIGNvbHVtbnM9e3RhYmxlQ29sdW1uc31cbiAgICAgICAgICAgICAgICBkYXRhU291cmNlPXtpbnRlcmVzdHN9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICAjd3JhcHBlciB7XG4gICAgICAgICAgICBtYXJnaW46IDEwcHg7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICB9XG4gICAgICAgICAgI21haW4tY29udGVudCB7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICAjdGFibGUge1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcbiAgICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuY29udHJvbHMge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmFjdGlvbnMge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuYWN0aW9ucyA+ICoge1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDVweDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLmxvYWRlciB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgaGVpZ2h0OiA1MDBweDtcblxuICAgICAgICAgIH1cbiAgICAgICAgICAuZGl2aWRlcntcbiAgICAgICAgICAgIGhlaWdodDogMzVweDtcbiAgICAgICAgICAgIHdpZHRoOjA7XG4gICAgICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICBtYXJnaW46IDAgMCAwIDVweDtcblxuICAgICAgICAgIH1cblxuICAgICAgICAgIC5maWx0ZXIge1xuICAgICAgICAgICAgd2lkdGg6IDMwJTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAudG9wIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICAgIHdpZHRoOiBpbmhlcml0O1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgfVxuICAgICAgICBgfTwvc3R5bGU+XG4gICAgICA8L2Rpdj5cbiAgICA8L0Rhc2hib2FyZExheW91dD5cbiAgKTtcbn07XG5cbkluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgY29uc3QgdG9rZW4gPSBjb250ZXh0LnF1ZXJ5LmF0O1xuICByZXR1cm4ge1xuICAgIHRva2VuXG4gIH07XG59O1xuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSBzdGF0ZSA9PiAoe1xuICB1c2VyOiBzdGF0ZS51c2VyLmN1cnJlbnRVc2VyLFxuICBzZWFyY2hpbmc6IHN0YXRlLnNlYXJjaC5sb2FkaW5nLFxuICBmYlRva2VuOiBzdGF0ZS51c2VyLmZiVG9rZW4sXG4gIGludGVyZXN0RGF0YTogc3RhdGUuc2VhcmNoLmludGVyZXN0cyxcbiAgaW50ZXJlc3RDb3VudDogc3RhdGUuc2VhcmNoLmludGVyZXN0Q291bnQsXG4gIGtleXdvcmQ6IHN0YXRlLnNlYXJjaC5rZXl3b3JkXG59KTtcblxuY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0gZGlzcGF0Y2ggPT4gKHtcbiAgYWRkVXNlcjogaXRlbSA9PiBkaXNwYXRjaChhZGRpbmdDdXJyZW50VXNlcihpdGVtKSksXG4gIGF1dGhGYjogKHRva2VuLCBpZCkgPT4gZGlzcGF0Y2goYXV0aEZhY2Vib29rKHsgdG9rZW4sIGlkIH0pKSxcbiAgc2VhcmNoSW50ZXJlc3Q6ICh0b2tlbiwgdmFsdWUsIGxpbWl0KSA9PlxuICAgIGRpc3BhdGNoKHNlYXJjaFN0YXJ0KHsgdG9rZW4sIHZhbHVlLCBsaW1pdCB9KSlcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShJbmRleCk7XG4iXX0= */\\n/*@ sourceURL=/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js */\")));\n};\n\nIndex.getInitialProps = async function (context) {\n  const token = context.query.at;\n  return {\n    token\n  };\n};\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser,\n  searching: state.search.loading,\n  fbToken: state.user.fbToken,\n  interestData: state.search.interests,\n  interestCount: state.search.interestCount,\n  keyword: state.search.keyword\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addUser: item => dispatch(addingCurrentUser(item)),\n  authFb: (token, id) => dispatch(authFacebook({\n    token,\n    id\n  })),\n  searchInterest: (token, value, limit) => dispatch(searchStart({\n    token,\n    value,\n    limit\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js"],"names":["useRouter","useEffect","useState","connect","FacebookLogin","ExportToCsv","ToastContainer","toast","Loader","DashboardLayout","Header","InterestTable","SideBar","tableColumns","addScore","getInterestNames","decodeToken","addingCurrentUser","authFacebook","searchStart","Index","props","state","setState","selectedInterest","min","max","token","user","addUser","fbToken","interestData","searchInterest","keyword","interestCount","searching","Search","router","decoded","_id","name","email","domain","userData","id","console","log","push","Math","apply","map","item","interests","interestNumber","faceAuthStart","responseFacebook","res","authFb","accessToken","getInterest","value","onSelectionChange","selectedRowKeys","selectedRows","interest","onCopy","length","navigator","clipboard","writeText","then","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","error","actions","process","env","FB_APP_ID","renderProps","onClick","sideBar","options","fieldSeparator","quoteStrings","decimalSeparator","showLabels","showTitle","title","useTextFile","useBom","useKeysAsHeaders","csvExporter","handleExport","exportArray","forEach","readyExport","audience","audience_size","description","topic","path","JSON","stringify","score","relevance","generateCsv","onFilterChange","filtered","filter","getInitialProps","context","query","at","mapStateToProps","currentUser","search","loading","mapDispatchToProps","dispatch","limit"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button, Input, Slider  } from \"antd\";\nimport FacebookLogin from \"react-facebook-login/dist/facebook-login-render-props\";\nimport { ExportToCsv } from \"export-to-csv\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport Loader from 'react-loader-spinner'\n\nimport DashboardLayout from \"../components/dashboardLayout\";\nimport Header from \"../components/header\";\nimport InterestTable from \"../components/table\";\nimport SideBar from \"../components/sideBar\";\n\nimport { tableColumns } from \"../utils/table\";\nimport { addScore, getInterestNames } from \"../utils/search\";\n\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser, authFacebook } from \"../redux/user/user-actions\";\nimport { searchStart } from \"../redux/search/search-actions\";\n\nimport \"react-toastify/scss/main.scss\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\"\n\nconst Index = props => {\n  const [state, setState] = useState({ selectedInterest: [], min: null, max: null });\n  const {\n    token,\n    user,\n    addUser,\n    fbToken,\n    interestData,\n    searchInterest,\n    keyword,\n    interestCount,\n    searching\n  } = props;\n  const { Search } = Input;\n  const router = useRouter();\n\n  useEffect(() => {\n    if (token) {\n      const decoded = decodeToken(token);\n      const { _id, name, email, domain } = decoded;\n      const userData = {\n        id: _id,\n        name,\n        email,\n        domain\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n\n  useEffect(() => {\n    const max = Math.max.apply(Math, interestData.map(item => item['audience_size']))\n    const min = Math.min.apply(Math, interestData.map(item => item['audience_size']))\n\n    setState({\n      ...state,\n      max: max,\n      min: min,\n      interests: interestData,\n      interestNumber: interestCount\n    });\n  }, [interestData, interestCount]);\n\n  const faceAuthStart = () => {\n    console.log(\"#### FB auth start\");\n  };\n\n  const responseFacebook = async res => {\n    const { authFb, user } = props;\n    const { accessToken } = res;\n    authFb(accessToken, user.id);\n  };\n\n  const getInterest = async value => {\n    await searchInterest(fbToken.token, value, 500);\n  };\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    console.log(\"rows\", selectedRows);\n    const selectedInterest = selectedRows.map(interest => {\n      return interest.name;\n    });\n    setState({\n      ...state,\n      selectedRowKeys,\n      selectedInterest,\n      selectedRows\n    });\n  };\n\n  const onCopy = () => {\n    const { selectedInterest } = state;\n    console.log(\"copy\", selectedInterest);\n    if (selectedInterest.length) {\n      navigator.clipboard.writeText(selectedInterest).then(() => {\n        console.log(\"you copied\", selectedInterest.length);\n\n        toast.success(`You copied ${selectedInterest.length} items`, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      });\n    }else{\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  const actions = [\n    <FacebookLogin\n      appId={process.env.FB_APP_ID}\n      autoLoad={true}\n      fields=\"name,email,id\"\n      onClick={faceAuthStart}\n      scope=\"ads_management, email\"\n      callback={responseFacebook}\n      render={renderProps => (\n        <Button\n          disabled={!!fbToken}\n          type=\"primary\"\n          onClick={renderProps.onClick}\n        >\n          Connect Facebook\n        </Button>\n      )}\n    />\n  ];\n\n  const sideBar = <SideBar />;\n\n  const options = {\n    fieldSeparator: \",\",\n    quoteStrings: '\"',\n    decimalSeparator: \".\",\n    showLabels: true,\n    showTitle: true,\n    title: \"Interest List\",\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true\n  };\n  const csvExporter = new ExportToCsv(options);\n\n  const handleExport = async () => {\n    // const {selectedRows} = state\n    if(interestData){\n      let exportArray = [];\n      interestData.forEach(item => {\n        let readyExport = {};\n        readyExport.id = item.id;\n        readyExport.name = item.name;\n        readyExport.audience = item.audience_size;\n        readyExport.description = item.description;\n        readyExport.topic = item.topic;\n        readyExport.path = JSON.stringify(item.path);\n        readyExport.score = item.relevance;\n        exportArray.push(readyExport);\n      });\n\n      await csvExporter.generateCsv(exportArray);\n      toast.success(`You downloaded ${interestData.length} items`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  const onFilterChange = (value) => {\n    const filtered = interestData.filter(item => item['audience_size'] >= value[0] && item['audience_size'] <= value[1])\n    setState({\n      ...state,\n      interests: filtered\n\n    })\n  }\n\n  const { interests, selectedRowKeys, interestNumber, max, min } = state;\n  return (\n    <DashboardLayout sidebar={sideBar}>\n      <div id=\"wrapper\">\n        <ToastContainer\n          position=\"top-left\"\n          autoClose={5000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnVisibilityChange\n          draggable\n          pauseOnHover\n        />\n        <div className=\"top\">\n        <Header actions={actions} />\n        <div id=\"main-content\">\n          \n          <Search\n            placeholder=\"Find Facebook interest for a keyword\"\n            enterButton=\"Getch\"\n            size=\"large\"\n            onSearch={value => getInterest(value)}\n          />\n          <div className=\"controls\">\n            <div>\n              {interestNumber ? (\n                <p>\n                  <b>{interestNumber}</b> interest found for \"{keyword}\"\n                </p>\n              ) : (\n                \"\"\n              )}\n            </div>\n            <div className=\"filter\">\n              <p>Filter audience</p>\n              <Slider \n                max={max}\n                min={min}\n                range \n                defaultValue={[min, max]}\n                onAfterChange={onFilterChange}\n              />\n            </div>\n            <div className=\"actions\">\n              <div className=\"button\">\n                <Button onClick={onCopy}>Copy</Button>\n              </div>\n              <div className=\"button\">\n                <Button onClick={handleExport}>Download as CSV</Button>\n              </div>\n              <div className=\"divider\"></div>\n              <div className=\"button\">\n                <Button onClick={handleExport}>Save as project</Button>\n              </div>\n              <div className=\"button\">\n                <Button color=\"#4e54c8\" onClick={handleExport}>Save to Facebook</Button>\n              </div>\n            </div>\n          </div>\n          </div>\n\n          <div id=\"table\">\n          {\n            searching ? \n              <div className=\"loader\">\n                <Loader\n                  type=\"Bars\"\n                  color=\"#4e54c8\"\n                  height={100}\n                  width={100}\n                />\n              </div>:\n              <InterestTable\n                onSelection={onSelectionChange}\n                selectedRowKeys={selectedRowKeys}\n                className=\"table\"\n                columns={tableColumns}\n                dataSource={interests}\n              />\n          }\n            \n          </div>\n        </div>\n\n        <style jsx>{`\n          #wrapper {\n            margin: 10px;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n          }\n          #main-content {\n            margin-top: 30px;\n            flex-grow: 1;\n          }\n          #table {\n            margin-top: 30px;\n            flex-grow: 1;\n          }\n\n          .controls {\n            display: flex;\n            margin-top: 10px;\n            justify-content: space-between;\n          }\n\n          .actions {\n            display: flex;\n          }\n\n          .actions > * {\n            margin-left: 5px;\n          }\n          .loader {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 500px;\n\n          }\n          .divider{\n            height: 35px;\n            width:0;\n            border-left: 1px solid #ccc;\n            margin: 0 0 0 5px;\n\n          }\n\n          .filter {\n            width: 30%;\n          }\n\n          .top {\n            position: fixed;\n            bottom: 0;\n            width: inherit;\n            background-color: white;\n            text-align: center;\n          }\n        `}</style>\n      </div>\n    </DashboardLayout>\n  );\n};\n\nIndex.getInitialProps = async function(context) {\n  const token = context.query.at;\n  return {\n    token\n  };\n};\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser,\n  searching: state.search.loading,\n  fbToken: state.user.fbToken,\n  interestData: state.search.interests,\n  interestCount: state.search.interestCount,\n  keyword: state.search.keyword\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addUser: item => dispatch(addingCurrentUser(item)),\n  authFb: (token, id) => dispatch(authFacebook({ token, id })),\n  searchInterest: (token, value, limit) =>\n    dispatch(searchStart({ token, value, limit }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);\n"]},"metadata":{},"sourceType":"module"}