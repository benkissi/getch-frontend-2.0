{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nvar _jsxFileName = \"/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\nimport { ExportToCsv } from 'export-to-csv';\nimport { ToastContainer, toast } from 'react-toastify';\nimport DashboardLayout from '../components/dashboardLayout';\nimport Header from '../components/header';\nimport InterestTable from '../components/table';\nimport SideBar from '../components/sideBar';\nimport { tableColumns } from '../utils/table';\nimport { addScore, getInterestNames } from '../utils/search';\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser, authFacebook } from \"../redux/user/user-actions\";\nimport { searchStart } from '../redux/search/search-actions';\nimport 'react-toastify/scss/main.scss';\n\nvar Index = function Index(props) {\n  var _useState = useState({\n    selectedInterest: []\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var token = props.token,\n      user = props.user,\n      addUser = props.addUser,\n      fbToken = props.fbToken,\n      interestData = props.interestData,\n      searchInterest = props.searchInterest,\n      keyword = props.keyword,\n      interestCount = props.interestCount;\n  var Search = _Input.Search;\n  var router = useRouter();\n  useEffect(function () {\n    if (token) {\n      var decoded = decodeToken(token);\n      var _id = decoded._id,\n          name = decoded.name,\n          email = decoded.email,\n          domain = decoded.domain;\n      var userData = {\n        id: _id,\n        name: name,\n        email: email,\n        domain: domain\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n  useEffect(function () {\n    setState(_objectSpread({}, state, {\n      interests: interestData,\n      interestNumber: interestCount\n    }));\n  }, [interestData, interestCount]);\n\n  var faceAuthStart = function faceAuthStart() {\n    console.log('#### FB auth start');\n  };\n\n  var responseFacebook = function responseFacebook(res) {\n    var authFb, user, accessToken;\n    return _regeneratorRuntime.async(function responseFacebook$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            authFb = props.authFb, user = props.user;\n            accessToken = res.accessToken;\n            authFb(accessToken, user.id);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var getInterest = function getInterest(value) {\n    return _regeneratorRuntime.async(function getInterest$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(searchInterest(fbToken.token, value, 500));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  var onSelectionChange = function onSelectionChange(selectedRowKeys, selectedRows) {\n    var selectedInterest = selectedRows.map(function (interest) {\n      return interest.name;\n    });\n    console.log(selectedInterest);\n    setState(_objectSpread({}, state, {\n      selectedRowKeys: selectedRowKeys,\n      selectedInterest: selectedInterest\n    }));\n  };\n\n  var onCopy = function onCopy() {\n    var selectedInterest = state.selectedInterest;\n    console.log('copy', selectedInterest);\n\n    if (selectedInterest) {\n      navigator.clipboard.writeText(selectedInterest).then(function () {\n        console.log('you copied', selectedInterest.length);\n        toast.success(\"You copied \".concat(selectedInterest.length, \" items\"), {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      });\n    }\n  };\n\n  var actions = [__jsx(FacebookLogin, {\n    appId: process.env.FB_APP_ID,\n    autoLoad: true,\n    fields: \"name,email,id\",\n    onClick: faceAuthStart,\n    scope: \"ads_management, email\",\n    callback: responseFacebook,\n    render: function render(renderProps) {\n      return __jsx(_Button, {\n        type: \"primary\",\n        onClick: renderProps.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Connect Facebook\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  })];\n\n  var sideBar = __jsx(SideBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  });\n\n  var options = {\n    fieldSeparator: ',',\n    quoteStrings: '\"',\n    decimalSeparator: '.',\n    showLabels: true,\n    showTitle: true,\n    title: 'Interest List',\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true\n  };\n  var csvExporter = new ExportToCsv(options);\n\n  var handleExport = function handleExport() {\n    var exportArray = []; // this.state.csvExport.forEach((item)=> {\n    //     let readyExport={};\n    //     readyExport.id = item.id;\n    //     readyExport.name = item.name;\n    //     readyExport.audience = item.audience_size;\n    //     readyExport.description = item.description;\n    //     readyExport.topic = item.topic;\n    //     readyExport.path = JSON.stringify(item.path)\n    //     readyExport.score = item.rScore;\n    //     exportArray.push(readyExport);\n    // })\n    // csvExporter.generateCsv(exportArray);\n  };\n\n  var interests = state.interests,\n      selectedRowKeys = state.selectedRowKeys,\n      interestNumber = state.interestNumber;\n  return __jsx(DashboardLayout, {\n    sidebar: sideBar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"wrapper\",\n    className: \"jsx-3747502596\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, __jsx(ToastContainer, {\n    position: \"top-left\",\n    autoClose: 5000,\n    hideProgressBar: false,\n    newestOnTop: false,\n    closeOnClick: true,\n    rtl: false,\n    pauseOnVisibilityChange: true,\n    draggable: true,\n    pauseOnHover: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }), __jsx(Header, {\n    actions: actions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    id: \"main-content\",\n    className: \"jsx-3747502596\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, __jsx(Search, {\n    placeholder: \"Find Facebook interest for a keyword\",\n    enterButton: \"Getch\",\n    size: \"large\",\n    onSearch: function onSearch(value) {\n      return getInterest(value);\n    },\n    className: \"jsx-3747502596\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-3747502596\" + \" \" + \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3747502596\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, interestNumber ? __jsx(\"p\", {\n    className: \"jsx-3747502596\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, __jsx(\"b\", {\n    className: \"jsx-3747502596\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, interestNumber), \" interest found for \\\"\", keyword, \"\\\"\") : ''), __jsx(\"div\", {\n    className: \"jsx-3747502596\" + \" \" + \"actions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3747502596\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, __jsx(_Button, {\n    onClick: onCopy,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, \"Copy\")), __jsx(\"div\", {\n    className: \"jsx-3747502596\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, __jsx(_Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, \"Download as CSV\")))), __jsx(\"div\", {\n    id: \"table\",\n    className: \"jsx-3747502596\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, __jsx(InterestTable, {\n    onSelection: onSelectionChange,\n    selectedRowKeys: selectedRowKeys,\n    className: \"table\",\n    columns: tableColumns,\n    dataSource: interests,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }))), __jsx(_JSXStyle, {\n    id: \"3747502596\",\n    __self: this\n  }, \"#wrapper.jsx-3747502596{margin:10px;}#main-content.jsx-3747502596{margin-top:30px;}#table.jsx-3747502596{margin-top:30px;}.controls.jsx-3747502596{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.actions.jsx-3747502596{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.actions.jsx-3747502596>*.jsx-3747502596{margin-left:5px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Jlbmtpc3NpL3Byb2plY3RzL2dldGNoL2dldGNoLWZyb250ZW5kLTIuMC9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrTmtCLEFBR3VCLEFBR0ksQUFHQSxBQUlILEFBTUEsQUFJRyxZQW5CbEIsSUFHQSxBQUdBLEFBY0EsMERBVmtCLEFBTWxCLGdCQUxnQyxtSEFDaEMiLCJmaWxlIjoiL2hvbWUvYmVua2lzc2kvcHJvamVjdHMvZ2V0Y2gvZ2V0Y2gtZnJvbnRlbmQtMi4wL3BhZ2VzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5pbXBvcnQgeyBCdXR0b24sIElucHV0LCBUYWcgfSBmcm9tIFwiYW50ZFwiO1xuaW1wb3J0IEZhY2Vib29rTG9naW4gZnJvbSAncmVhY3QtZmFjZWJvb2stbG9naW4vZGlzdC9mYWNlYm9vay1sb2dpbi1yZW5kZXItcHJvcHMnO1xuaW1wb3J0IHsgRXhwb3J0VG9Dc3YgfSBmcm9tICdleHBvcnQtdG8tY3N2JztcbmltcG9ydCB7IFRvYXN0Q29udGFpbmVyLCB0b2FzdH0gZnJvbSAncmVhY3QtdG9hc3RpZnknO1xuXG5pbXBvcnQgRGFzaGJvYXJkTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvZGFzaGJvYXJkTGF5b3V0J1xuaW1wb3J0IEhlYWRlciBmcm9tICcuLi9jb21wb25lbnRzL2hlYWRlcidcbmltcG9ydCBJbnRlcmVzdFRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvdGFibGUnXG5pbXBvcnQgU2lkZUJhciBmcm9tICcuLi9jb21wb25lbnRzL3NpZGVCYXInXG5cbmltcG9ydCB7dGFibGVDb2x1bW5zfSBmcm9tICcuLi91dGlscy90YWJsZSdcbmltcG9ydCB7YWRkU2NvcmUsIGdldEludGVyZXN0TmFtZXN9IGZyb20gJy4uL3V0aWxzL3NlYXJjaCdcblxuaW1wb3J0IGRlY29kZVRva2VuIGZyb20gXCIuLi91dGlscy9hdXRoXCI7XG5pbXBvcnQgeyBhZGRpbmdDdXJyZW50VXNlciwgYXV0aEZhY2Vib29rIH0gZnJvbSBcIi4uL3JlZHV4L3VzZXIvdXNlci1hY3Rpb25zXCI7XG5pbXBvcnQge3NlYXJjaFN0YXJ0fSBmcm9tICcuLi9yZWR1eC9zZWFyY2gvc2VhcmNoLWFjdGlvbnMnXG5cbmltcG9ydCAncmVhY3QtdG9hc3RpZnkvc2Nzcy9tYWluLnNjc3MnXG5cblxuY29uc3QgSW5kZXggPSBwcm9wcyA9PiB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe3NlbGVjdGVkSW50ZXJlc3Q6W119KVxuICBjb25zdCB7IFxuICAgICAgdG9rZW4sIFxuICAgICAgdXNlciwgXG4gICAgICBhZGRVc2VyLCBcbiAgICAgIGZiVG9rZW4sIFxuICAgICAgaW50ZXJlc3REYXRhLCBcbiAgICAgIHNlYXJjaEludGVyZXN0LCBcbiAgICAgIGtleXdvcmQsXG4gICAgICBpbnRlcmVzdENvdW50IH0gPSBwcm9wcztcbiAgY29uc3QgeyBTZWFyY2ggfSA9IElucHV0O1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0b2tlbikge1xuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZVRva2VuKHRva2VuKTtcbiAgICAgIGNvbnN0IHsgX2lkLCBuYW1lLCBlbWFpbCwgZG9tYWluIH0gPSBkZWNvZGVkO1xuICAgICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICAgIGlkOiBfaWQsXG4gICAgICAgIG5hbWUsIFxuICAgICAgICBlbWFpbCwgXG4gICAgICAgIGRvbWFpblxuICAgICAgfTtcbiAgICAgIGFkZFVzZXIodXNlckRhdGEpO1xuICAgIH0gZWxzZSBpZiAodXNlcikge1xuICAgICAgY29uc29sZS5sb2codXNlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJvdXRlci5wdXNoKFwiL3NpZ25pblwiKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgaW50ZXJlc3RzOiBpbnRlcmVzdERhdGEsXG4gICAgICBpbnRlcmVzdE51bWJlcjogaW50ZXJlc3RDb3VudFxuICAgIH0pXG4gIH0sIFtpbnRlcmVzdERhdGEsIGludGVyZXN0Q291bnRdKVxuXG4gIGNvbnN0IGZhY2VBdXRoU3RhcnQgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJyMjIyMgRkIgYXV0aCBzdGFydCcpXG4gIH1cblxuICBjb25zdCByZXNwb25zZUZhY2Vib29rID0gYXN5bmMgKHJlcykgPT4ge1xuICAgIGNvbnN0IHthdXRoRmIsIHVzZXJ9ID0gcHJvcHNcbiAgICBjb25zdCB7YWNjZXNzVG9rZW59ID0gcmVzXG4gICAgYXV0aEZiKGFjY2Vzc1Rva2VuLCB1c2VyLmlkKVxuICB9XG5cbiAgY29uc3QgZ2V0SW50ZXJlc3QgPSBhc3luYyAodmFsdWUpID0+IHtcbiAgICBhd2FpdCBzZWFyY2hJbnRlcmVzdChmYlRva2VuLnRva2VuLCB2YWx1ZSwgNTAwKVxuICB9XG5cbiAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSAoc2VsZWN0ZWRSb3dLZXlzLCBzZWxlY3RlZFJvd3MpID0+IHtcbiAgICBcbiAgICBjb25zdCBzZWxlY3RlZEludGVyZXN0ID0gc2VsZWN0ZWRSb3dzLm1hcChpbnRlcmVzdCA9PiB7XG4gICAgICByZXR1cm4gaW50ZXJlc3QubmFtZVxuICAgIH0pXG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRJbnRlcmVzdClcbiAgICBzZXRTdGF0ZSh7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHNlbGVjdGVkUm93S2V5cyxcbiAgICAgIHNlbGVjdGVkSW50ZXJlc3RcbiAgICB9KVxuICB9XG5cbiAgY29uc3Qgb25Db3B5ID0gKCkgPT4ge1xuICAgIGNvbnN0IHtzZWxlY3RlZEludGVyZXN0fSA9IHN0YXRlXG4gICAgY29uc29sZS5sb2coJ2NvcHknLCBzZWxlY3RlZEludGVyZXN0KVxuICAgIGlmKHNlbGVjdGVkSW50ZXJlc3Qpe1xuICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc2VsZWN0ZWRJbnRlcmVzdCkudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd5b3UgY29waWVkJywgc2VsZWN0ZWRJbnRlcmVzdC5sZW5ndGgpXG5cbiAgICAgICAgdG9hc3Quc3VjY2VzcyhgWW91IGNvcGllZCAke3NlbGVjdGVkSW50ZXJlc3QubGVuZ3RofSBpdGVtc2AsIHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgICAgaGlkZVByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29uc3QgYWN0aW9ucyA9IFtcbiAgICA8RmFjZWJvb2tMb2dpblxuICAgICAgICBhcHBJZD17cHJvY2Vzcy5lbnYuRkJfQVBQX0lEfVxuICAgICAgICBhdXRvTG9hZD17dHJ1ZX1cbiAgICAgICAgZmllbGRzPVwibmFtZSxlbWFpbCxpZFwiXG4gICAgICAgIG9uQ2xpY2s9e2ZhY2VBdXRoU3RhcnR9XG4gICAgICAgIHNjb3BlPVwiYWRzX21hbmFnZW1lbnQsIGVtYWlsXCJcbiAgICAgICAgY2FsbGJhY2s9e3Jlc3BvbnNlRmFjZWJvb2t9IFxuICAgICAgICByZW5kZXI9e3JlbmRlclByb3BzID0+IChcbiAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgb25DbGljaz17cmVuZGVyUHJvcHMub25DbGlja30+Q29ubmVjdCBGYWNlYm9vazwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICAvPlxuICBdXG5cbiAgY29uc3Qgc2lkZUJhciA9IDxTaWRlQmFyLz5cblxuICBjb25zdCBvcHRpb25zID0geyBcbiAgICBmaWVsZFNlcGFyYXRvcjogJywnLFxuICAgIHF1b3RlU3RyaW5nczogJ1wiJyxcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLicsXG4gICAgc2hvd0xhYmVsczogdHJ1ZSxcbiAgICBzaG93VGl0bGU6IHRydWUsXG4gICAgdGl0bGU6ICdJbnRlcmVzdCBMaXN0JyxcbiAgICB1c2VUZXh0RmlsZTogZmFsc2UsXG4gICAgdXNlQm9tOiB0cnVlLFxuICAgIHVzZUtleXNBc0hlYWRlcnM6IHRydWUsXG59O1xuY29uc3QgY3N2RXhwb3J0ZXIgPSBuZXcgRXhwb3J0VG9Dc3Yob3B0aW9ucyk7XG5cbmNvbnN0IGhhbmRsZUV4cG9ydCA9ICgpID0+IHtcbiAgbGV0IGV4cG9ydEFycmF5ID0gW11cbiAgLy8gdGhpcy5zdGF0ZS5jc3ZFeHBvcnQuZm9yRWFjaCgoaXRlbSk9PiB7XG4gIC8vICAgICBsZXQgcmVhZHlFeHBvcnQ9e307XG4gIC8vICAgICByZWFkeUV4cG9ydC5pZCA9IGl0ZW0uaWQ7XG4gIC8vICAgICByZWFkeUV4cG9ydC5uYW1lID0gaXRlbS5uYW1lO1xuICAvLyAgICAgcmVhZHlFeHBvcnQuYXVkaWVuY2UgPSBpdGVtLmF1ZGllbmNlX3NpemU7XG4gIC8vICAgICByZWFkeUV4cG9ydC5kZXNjcmlwdGlvbiA9IGl0ZW0uZGVzY3JpcHRpb247XG4gIC8vICAgICByZWFkeUV4cG9ydC50b3BpYyA9IGl0ZW0udG9waWM7XG4gIC8vICAgICByZWFkeUV4cG9ydC5wYXRoID0gSlNPTi5zdHJpbmdpZnkoaXRlbS5wYXRoKVxuICAvLyAgICAgcmVhZHlFeHBvcnQuc2NvcmUgPSBpdGVtLnJTY29yZTtcblxuICAvLyAgICAgZXhwb3J0QXJyYXkucHVzaChyZWFkeUV4cG9ydCk7XG4gIC8vIH0pXG4gIC8vIGNzdkV4cG9ydGVyLmdlbmVyYXRlQ3N2KGV4cG9ydEFycmF5KTtcbn1cblxuXG4gIGNvbnN0IHtpbnRlcmVzdHMsIHNlbGVjdGVkUm93S2V5cywgaW50ZXJlc3ROdW1iZXJ9ID0gc3RhdGVcbiAgcmV0dXJuIChcbiAgICA8RGFzaGJvYXJkTGF5b3V0IHNpZGViYXI9e3NpZGVCYXJ9PlxuICAgIDxkaXYgaWQ9XCJ3cmFwcGVyXCI+XG4gICAgPFRvYXN0Q29udGFpbmVyXG4gICAgICAgIHBvc2l0aW9uPVwidG9wLWxlZnRcIlxuICAgICAgICBhdXRvQ2xvc2U9ezUwMDB9XG4gICAgICAgIGhpZGVQcm9ncmVzc0Jhcj17ZmFsc2V9XG4gICAgICAgIG5ld2VzdE9uVG9wPXtmYWxzZX1cbiAgICAgICAgY2xvc2VPbkNsaWNrXG4gICAgICAgIHJ0bD17ZmFsc2V9XG4gICAgICAgIHBhdXNlT25WaXNpYmlsaXR5Q2hhbmdlXG4gICAgICAgIGRyYWdnYWJsZVxuICAgICAgICBwYXVzZU9uSG92ZXJcbiAgICAgICAgLz5cbiAgICAgIDxIZWFkZXIgYWN0aW9ucz17YWN0aW9uc30vPlxuICAgICAgPGRpdiBpZD1cIm1haW4tY29udGVudFwiPlxuICAgICAgICA8U2VhcmNoXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkZpbmQgRmFjZWJvb2sgaW50ZXJlc3QgZm9yIGEga2V5d29yZFwiXG4gICAgICAgICAgICBlbnRlckJ1dHRvbj1cIkdldGNoXCJcbiAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiBnZXRJbnRlcmVzdCh2YWx1ZSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8ZGl2ID5cbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGludGVyZXN0TnVtYmVyID9cbiAgICAgICAgICAgICAgICA8cD48Yj57aW50ZXJlc3ROdW1iZXJ9PC9iPiBpbnRlcmVzdCBmb3VuZCBmb3IgXCJ7a2V5d29yZH1cIjwvcD5cbiAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb25zXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtvbkNvcHl9PkNvcHk8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvbj5Eb3dubG9hZCBhcyBDU1Y8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgaWQ9XCJ0YWJsZVwiPlxuICAgICAgICAgICAgPEludGVyZXN0VGFibGUgXG4gICAgICAgICAgICBvblNlbGVjdGlvbj17b25TZWxlY3Rpb25DaGFuZ2V9IFxuICAgICAgICAgICAgc2VsZWN0ZWRSb3dLZXlzPXtzZWxlY3RlZFJvd0tleXN9IFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGVcIiBjb2x1bW5zPXt0YWJsZUNvbHVtbnN9IFxuICAgICAgICAgICAgZGF0YVNvdXJjZT17aW50ZXJlc3RzfS8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICA8L2Rpdj5cbiAgICAgICAgXG5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgI3dyYXBwZXIge1xuICAgICAgICAgIG1hcmdpbjogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAjbWFpbi1jb250ZW50IHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgICB9XG4gICAgICAgICN0YWJsZSB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb250cm9sc3tcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICB9XG5cbiAgICAgICAgLmFjdGlvbnMge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIH1cblxuICAgICAgICAuYWN0aW9ucyA+ICoge1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgICA8L0Rhc2hib2FyZExheW91dD5cbiAgKTtcbn07XG5cbkluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgY29uc3QgdG9rZW4gPSBjb250ZXh0LnF1ZXJ5LmF0O1xuICByZXR1cm4ge1xuICAgIHRva2VuXG4gIH07XG59O1xuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSBzdGF0ZSA9PiAoe1xuICB1c2VyOiBzdGF0ZS51c2VyLmN1cnJlbnRVc2VyLFxuICBmYlRva2VuOiBzdGF0ZS51c2VyLmZiVG9rZW4sXG4gIGludGVyZXN0RGF0YTogc3RhdGUuc2VhcmNoLmludGVyZXN0cyxcbiAgaW50ZXJlc3RDb3VudDogc3RhdGUuc2VhcmNoLmludGVyZXN0Q291bnQsXG4gIGtleXdvcmQ6IHN0YXRlLnNlYXJjaC5rZXl3b3JkXG59KTtcblxuY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0gZGlzcGF0Y2ggPT4gKHtcbiAgYWRkVXNlcjogaXRlbSA9PiBkaXNwYXRjaChhZGRpbmdDdXJyZW50VXNlcihpdGVtKSksXG4gIGF1dGhGYjogKHRva2VuLCBpZCkgPT4gZGlzcGF0Y2goYXV0aEZhY2Vib29rKHt0b2tlbiwgaWR9KSksXG4gIHNlYXJjaEludGVyZXN0OiAodG9rZW4sIHZhbHVlLCBsaW1pdCkgPT4gZGlzcGF0Y2goc2VhcmNoU3RhcnQoe3Rva2VuLCB2YWx1ZSwgbGltaXR9KSlcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShJbmRleCk7XG4iXX0= */\\n/*@ sourceURL=/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js */\")));\n};\n\nIndex.getInitialProps = function _callee(context) {\n  var token;\n  return _regeneratorRuntime.async(function _callee$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          token = context.query.at;\n          return _context3.abrupt(\"return\", {\n            token: token\n          });\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user.currentUser,\n    fbToken: state.user.fbToken,\n    interestData: state.search.interests,\n    interestCount: state.search.interestCount,\n    keyword: state.search.keyword\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addUser: function addUser(item) {\n      return dispatch(addingCurrentUser(item));\n    },\n    authFb: function authFb(token, id) {\n      return dispatch(authFacebook({\n        token: token,\n        id: id\n      }));\n    },\n    searchInterest: function searchInterest(token, value, limit) {\n      return dispatch(searchStart({\n        token: token,\n        value: value,\n        limit: limit\n      }));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js"],"names":["useRouter","useEffect","useState","connect","FacebookLogin","ExportToCsv","ToastContainer","toast","DashboardLayout","Header","InterestTable","SideBar","tableColumns","addScore","getInterestNames","decodeToken","addingCurrentUser","authFacebook","searchStart","Index","props","selectedInterest","state","setState","token","user","addUser","fbToken","interestData","searchInterest","keyword","interestCount","Search","router","decoded","_id","name","email","domain","userData","id","console","log","push","interests","interestNumber","faceAuthStart","responseFacebook","res","authFb","accessToken","getInterest","value","onSelectionChange","selectedRowKeys","selectedRows","map","interest","onCopy","navigator","clipboard","writeText","then","length","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","actions","process","env","FB_APP_ID","renderProps","onClick","sideBar","options","fieldSeparator","quoteStrings","decimalSeparator","showLabels","showTitle","title","useTextFile","useBom","useKeysAsHeaders","csvExporter","handleExport","exportArray","getInitialProps","context","query","at","mapStateToProps","currentUser","search","mapDispatchToProps","dispatch","item","limit"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button, Input, Tag } from \"antd\";\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\nimport { ExportToCsv } from 'export-to-csv';\nimport { ToastContainer, toast} from 'react-toastify';\n\nimport DashboardLayout from '../components/dashboardLayout'\nimport Header from '../components/header'\nimport InterestTable from '../components/table'\nimport SideBar from '../components/sideBar'\n\nimport {tableColumns} from '../utils/table'\nimport {addScore, getInterestNames} from '../utils/search'\n\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser, authFacebook } from \"../redux/user/user-actions\";\nimport {searchStart} from '../redux/search/search-actions'\n\nimport 'react-toastify/scss/main.scss'\n\n\nconst Index = props => {\n  const [state, setState] = useState({selectedInterest:[]})\n  const { \n      token, \n      user, \n      addUser, \n      fbToken, \n      interestData, \n      searchInterest, \n      keyword,\n      interestCount } = props;\n  const { Search } = Input;\n  const router = useRouter();\n\n  useEffect(() => {\n    if (token) {\n      const decoded = decodeToken(token);\n      const { _id, name, email, domain } = decoded;\n      const userData = {\n        id: _id,\n        name, \n        email, \n        domain\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n\n  useEffect(() => {\n    setState({\n      ...state,\n      interests: interestData,\n      interestNumber: interestCount\n    })\n  }, [interestData, interestCount])\n\n  const faceAuthStart = () => {\n    console.log('#### FB auth start')\n  }\n\n  const responseFacebook = async (res) => {\n    const {authFb, user} = props\n    const {accessToken} = res\n    authFb(accessToken, user.id)\n  }\n\n  const getInterest = async (value) => {\n    await searchInterest(fbToken.token, value, 500)\n  }\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    \n    const selectedInterest = selectedRows.map(interest => {\n      return interest.name\n    })\n    console.log(selectedInterest)\n    setState({\n      ...state,\n      selectedRowKeys,\n      selectedInterest\n    })\n  }\n\n  const onCopy = () => {\n    const {selectedInterest} = state\n    console.log('copy', selectedInterest)\n    if(selectedInterest){\n      navigator.clipboard.writeText(selectedInterest).then(() => {\n        console.log('you copied', selectedInterest.length)\n\n        toast.success(`You copied ${selectedInterest.length} items`, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      })\n    }\n  }\n\n  const actions = [\n    <FacebookLogin\n        appId={process.env.FB_APP_ID}\n        autoLoad={true}\n        fields=\"name,email,id\"\n        onClick={faceAuthStart}\n        scope=\"ads_management, email\"\n        callback={responseFacebook} \n        render={renderProps => (\n          <Button type=\"primary\" onClick={renderProps.onClick}>Connect Facebook</Button>\n        )}\n        />\n  ]\n\n  const sideBar = <SideBar/>\n\n  const options = { \n    fieldSeparator: ',',\n    quoteStrings: '\"',\n    decimalSeparator: '.',\n    showLabels: true,\n    showTitle: true,\n    title: 'Interest List',\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true,\n};\nconst csvExporter = new ExportToCsv(options);\n\nconst handleExport = () => {\n  let exportArray = []\n  // this.state.csvExport.forEach((item)=> {\n  //     let readyExport={};\n  //     readyExport.id = item.id;\n  //     readyExport.name = item.name;\n  //     readyExport.audience = item.audience_size;\n  //     readyExport.description = item.description;\n  //     readyExport.topic = item.topic;\n  //     readyExport.path = JSON.stringify(item.path)\n  //     readyExport.score = item.rScore;\n\n  //     exportArray.push(readyExport);\n  // })\n  // csvExporter.generateCsv(exportArray);\n}\n\n\n  const {interests, selectedRowKeys, interestNumber} = state\n  return (\n    <DashboardLayout sidebar={sideBar}>\n    <div id=\"wrapper\">\n    <ToastContainer\n        position=\"top-left\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop={false}\n        closeOnClick\n        rtl={false}\n        pauseOnVisibilityChange\n        draggable\n        pauseOnHover\n        />\n      <Header actions={actions}/>\n      <div id=\"main-content\">\n        <Search\n            placeholder=\"Find Facebook interest for a keyword\"\n            enterButton=\"Getch\"\n            size=\"large\"\n            onSearch={(value) => getInterest(value)}\n          />\n          <div className=\"controls\">\n            <div >\n              {\n                interestNumber ?\n                <p><b>{interestNumber}</b> interest found for \"{keyword}\"</p>\n                : ''\n              }\n            </div>\n            <div className=\"actions\">\n              <div className=\"button\">\n                <Button onClick={onCopy}>Copy</Button>\n              </div>\n              <div className=\"button\">\n                <Button>Download as CSV</Button>\n              </div>\n              \n              \n            </div>\n          </div>\n          \n          <div id=\"table\">\n            <InterestTable \n            onSelection={onSelectionChange} \n            selectedRowKeys={selectedRowKeys} \n            className=\"table\" columns={tableColumns} \n            dataSource={interests}/>\n          </div>\n          \n      </div>\n        \n\n      <style jsx>{`\n        #wrapper {\n          margin: 10px;\n        }\n        #main-content {\n          margin-top: 30px;\n        }\n        #table {\n          margin-top: 30px;\n        }\n\n        .controls{\n          display: flex;\n          margin-top: 10px;\n          justify-content: space-between;\n        }\n\n        .actions {\n          display: flex;\n        }\n\n        .actions > * {\n          margin-left: 5px;\n        }\n      `}</style>\n    </div>\n    </DashboardLayout>\n  );\n};\n\nIndex.getInitialProps = async function(context) {\n  const token = context.query.at;\n  return {\n    token\n  };\n};\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser,\n  fbToken: state.user.fbToken,\n  interestData: state.search.interests,\n  interestCount: state.search.interestCount,\n  keyword: state.search.keyword\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addUser: item => dispatch(addingCurrentUser(item)),\n  authFb: (token, id) => dispatch(authFacebook({token, id})),\n  searchInterest: (token, value, limit) => dispatch(searchStart({token, value, limit}))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);\n"]},"metadata":{},"sourceType":"module"}