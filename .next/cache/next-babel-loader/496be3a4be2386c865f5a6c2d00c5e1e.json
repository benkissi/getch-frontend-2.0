{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/slider/style\";\nimport _Slider from \"antd/lib/slider\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\n\nvar _this = this,\n    _jsxFileName = \"/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js\";\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { ExportToCsv } from \"export-to-csv\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport Loader from \"react-loader-spinner\";\nimport DashboardLayout from \"../components/dashboardLayout\";\nimport InterestTable from \"../components/table\";\nimport { tableColumns } from \"../utils/table\";\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser } from \"../redux/user/user-actions\";\nimport { searchStart } from \"../redux/search/search-actions\";\nimport \"react-toastify/scss/main.scss\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nvar Index = function Index(props) {\n  var _useState = useState({\n    selectedInterest: [],\n    min: null,\n    max: null\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var token = props.token,\n      user = props.user,\n      addUser = props.addUser,\n      fbToken = props.fbToken,\n      interestData = props.interestData,\n      searchInterest = props.searchInterest,\n      keyword = props.keyword,\n      interestCount = props.interestCount,\n      searching = props.searching;\n  var Search = _Input.Search;\n  var router = useRouter();\n  useEffect(function () {\n    if (token) {\n      var decoded = decodeToken(token);\n      var _id = decoded._id,\n          name = decoded.name,\n          email = decoded.email,\n          domain = decoded.domain;\n      var userData = {\n        id: _id,\n        name: name,\n        email: email,\n        domain: domain,\n        xToken: token\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signup\");\n    }\n  }, []);\n  useEffect(function () {\n    if (interestData && interestCount) {\n      var _max = Math.max.apply(Math, interestData.map(function (item) {\n        return item[\"audience_size\"];\n      }));\n\n      var _min = Math.min.apply(Math, interestData.map(function (item) {\n        return item[\"audience_size\"];\n      }));\n\n      setState(_objectSpread({}, state, {\n        max: _max,\n        min: _min,\n        interests: interestData,\n        interestNumber: interestCount\n      }));\n    }\n  }, [interestData, interestCount]);\n\n  var getInterest = function getInterest(value) {\n    return _regeneratorRuntime.async(function getInterest$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(searchInterest(fbToken.token, value, 500));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onSelectionChange = function onSelectionChange(selectedRowKeys, selectedRows) {\n    console.log(\"rows\", selectedRows);\n    var selectedInterest = selectedRows.map(function (interest) {\n      return interest.name;\n    });\n    setState(_objectSpread({}, state, {\n      selectedRowKeys: selectedRowKeys,\n      selectedInterest: selectedInterest,\n      selectedRows: selectedRows\n    }));\n  };\n\n  var onCopy = function onCopy() {\n    var selectedInterest = state.selectedInterest;\n    console.log(\"copy\", selectedInterest);\n\n    if (selectedInterest.length) {\n      navigator.clipboard.writeText(selectedInterest).then(function () {\n        console.log(\"you copied\", selectedInterest.length);\n        toast.success(\"You copied \".concat(selectedInterest.length, \" items\"), {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      });\n    } else {\n      toast.error(\"You have not made any selection\", {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  var options = {\n    fieldSeparator: \",\",\n    quoteStrings: '\"',\n    decimalSeparator: \".\",\n    showLabels: true,\n    showTitle: true,\n    title: \"Interest List\",\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true\n  };\n  var csvExporter = new ExportToCsv(options);\n\n  var handleExport = function handleExport() {\n    var exportArray;\n    return _regeneratorRuntime.async(function handleExport$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!interestData) {\n              _context2.next = 8;\n              break;\n            }\n\n            exportArray = [];\n            interestData.forEach(function (item) {\n              var readyExport = {};\n              readyExport.id = item.id;\n              readyExport.name = item.name;\n              readyExport.audience = item.audience_size;\n              readyExport.description = item.description;\n              readyExport.topic = item.topic;\n              readyExport.path = JSON.stringify(item.path);\n              readyExport.score = item.relevance;\n              exportArray.push(readyExport);\n            });\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(csvExporter.generateCsv(exportArray));\n\n          case 5:\n            toast.success(\"You downloaded \".concat(interestData.length, \" items\"), {\n              position: \"top-right\",\n              autoClose: 5000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true\n            });\n            _context2.next = 9;\n            break;\n\n          case 8:\n            toast.error(\"You have not made any selection\", {\n              position: \"top-right\",\n              autoClose: 3000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true\n            });\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onFilterChange = function onFilterChange(value) {\n    var filtered = interestData.filter(function (item) {\n      return item[\"audience_size\"] >= value[0] && item[\"audience_size\"] <= value[1];\n    });\n    setState(_objectSpread({}, state, {\n      interests: filtered\n    }));\n  };\n\n  var interests = state.interests,\n      selectedRowKeys = state.selectedRowKeys,\n      interestNumber = state.interestNumber,\n      max = state.max,\n      min = state.min;\n  return __jsx(\"div\", {\n    id: \"wrapper\",\n    className: \"jsx-3209849346\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 5\n    }\n  }, __jsx(ToastContainer, {\n    position: \"top-left\",\n    autoClose: 5000,\n    hideProgressBar: false,\n    newestOnTop: false,\n    closeOnClick: true,\n    rtl: false,\n    pauseOnVisibilityChange: true,\n    draggable: true,\n    pauseOnHover: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    id: \"main-content\",\n    className: \"jsx-3209849346\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"top\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"inner\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 11\n    }\n  }, __jsx(Search, {\n    placeholder: \"Find Facebook interest for a keyword\",\n    enterButton: \"Getch\",\n    size: \"large\",\n    onSearch: function onSearch(value) {\n      return getInterest(value);\n    },\n    className: \"jsx-3209849346\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"controls\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3209849346\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }, interestNumber ? __jsx(\"p\", {\n    className: \"jsx-3209849346\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 19\n    }\n  }, __jsx(\"b\", {\n    className: \"jsx-3209849346\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 21\n    }\n  }, interestNumber), \" interest found for \\\"\", keyword, \"\\\"\") : \"\"), __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"filter\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 15\n    }\n  }, __jsx(\"p\", {\n    className: \"jsx-3209849346\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }\n  }, \"Filter audience\"), __jsx(_Slider, {\n    max: max,\n    min: min,\n    range: true,\n    defaultValue: [min, max],\n    onAfterChange: onFilterChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"actions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 17\n    }\n  }, __jsx(_Button, {\n    onClick: onCopy,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 19\n    }\n  }, \"Copy\")), __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, __jsx(_Button, {\n    onClick: handleExport,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 19\n    }\n  }, \"Download as CSV\")), __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"divider\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 17\n    }\n  }, __jsx(_Button, {\n    onClick: handleExport,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 19\n    }\n  }, \"Save as project\")), __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, __jsx(_Button, {\n    color: \"#4e54c8\",\n    onClick: handleExport,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 19\n    }\n  }, \"Save to Facebook\")))))), __jsx(\"div\", {\n    id: \"table\",\n    className: \"jsx-3209849346\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }\n  }, searching ? __jsx(\"div\", {\n    className: \"jsx-3209849346\" + \" \" + \"loader\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }\n  }, __jsx(Loader, {\n    type: \"Bars\",\n    color: \"#4e54c8\",\n    height: 100,\n    width: 100,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 15\n    }\n  })) : __jsx(InterestTable, {\n    onSelection: onSelectionChange,\n    selectedRowKeys: selectedRowKeys,\n    className: \"table\",\n    columns: tableColumns,\n    dataSource: interests,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  }))), __jsx(_JSXStyle, {\n    id: \"3209849346\",\n    __self: _this\n  }, \"#wrapper.jsx-3209849346{margin:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}#main-content.jsx-3209849346{margin-top:30px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}#table.jsx-3209849346{margin-top:30px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.controls.jsx-3209849346{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.actions.jsx-3209849346{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.actions.jsx-3209849346>*.jsx-3209849346{margin-left:5px;}.loader.jsx-3209849346{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:500px;}.divider.jsx-3209849346{height:35px;width:0;border-left:1px solid #ccc;margin:0 0 0 5px;}.filter.jsx-3209849346{width:30%;}.top.jsx-3209849346{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;height:130px;margin-bottom:20px;width:100%;background-color:white;}.inner.jsx-3209849346{position:fixed;top:50px;width:81%;background-color:white;z-index:100;height:150px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.header.jsx-3209849346{margin-bottom:20px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Jlbmtpc3NpL3Byb2plY3RzL2dldGNoL2dldGNoLWZyb250ZW5kLTIuMC9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0UWtCLEFBR3VCLEFBTUksQUFJQSxBQUtILEFBTUEsQUFJRyxBQUdILEFBTUQsQUFPRixBQUlHLEFBV0UsQUFZSSxVQTFCckIsRUF6Q2UsQUFrQ0wsR0FzQkMsQ0FsREcsQUFJQSxBQWVkLEdBMkNBLENBakM2QixJQXNCakIsVUFDYSxhQXRCTixVQXVCTCxPQXRCZCxLQXVCZSxLQTdDRyxBQU1sQixBQU95QixBQWlCQSxRQWdCVixJQTVEUyxDQU14QixBQUlBLEdBS2dDLGtFQThDUCxRQTVEWCxTQTJCTyxBQWlCQSxHQTNDckIsNkJBY0Esa0RBOEN3QixXQWpDVCxBQWlCSyxhQWhCcEIsS0FpQmUsYUFDTSxtQkFDUixXQUNZLE1BYXpCLGlCQVpBIiwiZmlsZSI6Ii9ob21lL2Jlbmtpc3NpL3Byb2plY3RzL2dldGNoL2dldGNoLWZyb250ZW5kLTIuMC9wYWdlcy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuaW1wb3J0IHsgQnV0dG9uLCBJbnB1dCwgU2xpZGVyIH0gZnJvbSBcImFudGRcIjtcbmltcG9ydCB7IEV4cG9ydFRvQ3N2IH0gZnJvbSBcImV4cG9ydC10by1jc3ZcIjtcbmltcG9ydCB7IFRvYXN0Q29udGFpbmVyLCB0b2FzdCB9IGZyb20gXCJyZWFjdC10b2FzdGlmeVwiO1xuaW1wb3J0IExvYWRlciBmcm9tIFwicmVhY3QtbG9hZGVyLXNwaW5uZXJcIjtcblxuaW1wb3J0IERhc2hib2FyZExheW91dCBmcm9tIFwiLi4vY29tcG9uZW50cy9kYXNoYm9hcmRMYXlvdXRcIjtcbmltcG9ydCBJbnRlcmVzdFRhYmxlIGZyb20gXCIuLi9jb21wb25lbnRzL3RhYmxlXCI7XG5cbmltcG9ydCB7IHRhYmxlQ29sdW1ucyB9IGZyb20gXCIuLi91dGlscy90YWJsZVwiO1xuXG5pbXBvcnQgZGVjb2RlVG9rZW4gZnJvbSBcIi4uL3V0aWxzL2F1dGhcIjtcbmltcG9ydCB7IGFkZGluZ0N1cnJlbnRVc2VyIH0gZnJvbSBcIi4uL3JlZHV4L3VzZXIvdXNlci1hY3Rpb25zXCI7XG5pbXBvcnQgeyBzZWFyY2hTdGFydCB9IGZyb20gXCIuLi9yZWR1eC9zZWFyY2gvc2VhcmNoLWFjdGlvbnNcIjtcblxuaW1wb3J0IFwicmVhY3QtdG9hc3RpZnkvc2Nzcy9tYWluLnNjc3NcIjtcbmltcG9ydCBcInJlYWN0LWxvYWRlci1zcGlubmVyL2Rpc3QvbG9hZGVyL2Nzcy9yZWFjdC1zcGlubmVyLWxvYWRlci5jc3NcIjtcblxuY29uc3QgSW5kZXggPSAocHJvcHMpID0+IHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgc2VsZWN0ZWRJbnRlcmVzdDogW10sXG4gICAgbWluOiBudWxsLFxuICAgIG1heDogbnVsbCxcbiAgfSk7XG4gIGNvbnN0IHtcbiAgICB0b2tlbixcbiAgICB1c2VyLFxuICAgIGFkZFVzZXIsXG4gICAgZmJUb2tlbixcbiAgICBpbnRlcmVzdERhdGEsXG4gICAgc2VhcmNoSW50ZXJlc3QsXG4gICAga2V5d29yZCxcbiAgICBpbnRlcmVzdENvdW50LFxuICAgIHNlYXJjaGluZyxcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7IFNlYXJjaCB9ID0gSW5wdXQ7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlVG9rZW4odG9rZW4pO1xuICAgICAgY29uc3QgeyBfaWQsIG5hbWUsIGVtYWlsLCBkb21haW4gfSA9IGRlY29kZWQ7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgICAgaWQ6IF9pZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZW1haWwsXG4gICAgICAgIGRvbWFpbixcbiAgICAgICAgeFRva2VuOiB0b2tlbixcbiAgICAgIH07XG4gICAgICBhZGRVc2VyKHVzZXJEYXRhKTtcbiAgICB9IGVsc2UgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3V0ZXIucHVzaChcIi9zaWdudXBcIik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaW50ZXJlc3REYXRhICYmIGludGVyZXN0Q291bnQpIHtcbiAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4LmFwcGx5KFxuICAgICAgICBNYXRoLFxuICAgICAgICBpbnRlcmVzdERhdGEubWFwKChpdGVtKSA9PiBpdGVtW1wiYXVkaWVuY2Vfc2l6ZVwiXSlcbiAgICAgICk7XG4gICAgICBjb25zdCBtaW4gPSBNYXRoLm1pbi5hcHBseShcbiAgICAgICAgTWF0aCxcbiAgICAgICAgaW50ZXJlc3REYXRhLm1hcCgoaXRlbSkgPT4gaXRlbVtcImF1ZGllbmNlX3NpemVcIl0pXG4gICAgICApO1xuXG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgbWluOiBtaW4sXG4gICAgICAgIGludGVyZXN0czogaW50ZXJlc3REYXRhLFxuICAgICAgICBpbnRlcmVzdE51bWJlcjogaW50ZXJlc3RDb3VudCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2ludGVyZXN0RGF0YSwgaW50ZXJlc3RDb3VudF0pO1xuXG4gIGNvbnN0IGdldEludGVyZXN0ID0gYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgYXdhaXQgc2VhcmNoSW50ZXJlc3QoZmJUb2tlbi50b2tlbiwgdmFsdWUsIDUwMCk7XG4gIH07XG5cbiAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSAoc2VsZWN0ZWRSb3dLZXlzLCBzZWxlY3RlZFJvd3MpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcInJvd3NcIiwgc2VsZWN0ZWRSb3dzKTtcbiAgICBjb25zdCBzZWxlY3RlZEludGVyZXN0ID0gc2VsZWN0ZWRSb3dzLm1hcCgoaW50ZXJlc3QpID0+IHtcbiAgICAgIHJldHVybiBpbnRlcmVzdC5uYW1lO1xuICAgIH0pO1xuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgc2VsZWN0ZWRSb3dLZXlzLFxuICAgICAgc2VsZWN0ZWRJbnRlcmVzdCxcbiAgICAgIHNlbGVjdGVkUm93cyxcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBvbkNvcHkgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzZWxlY3RlZEludGVyZXN0IH0gPSBzdGF0ZTtcbiAgICBjb25zb2xlLmxvZyhcImNvcHlcIiwgc2VsZWN0ZWRJbnRlcmVzdCk7XG4gICAgaWYgKHNlbGVjdGVkSW50ZXJlc3QubGVuZ3RoKSB7XG4gICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChzZWxlY3RlZEludGVyZXN0KS50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ5b3UgY29waWVkXCIsIHNlbGVjdGVkSW50ZXJlc3QubGVuZ3RoKTtcblxuICAgICAgICB0b2FzdC5zdWNjZXNzKGBZb3UgY29waWVkICR7c2VsZWN0ZWRJbnRlcmVzdC5sZW5ndGh9IGl0ZW1zYCwge1xuICAgICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICAgIGF1dG9DbG9zZTogNTAwMCxcbiAgICAgICAgICBoaWRlUHJvZ3Jlc3NCYXI6IGZhbHNlLFxuICAgICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2FzdC5lcnJvcihgWW91IGhhdmUgbm90IG1hZGUgYW55IHNlbGVjdGlvbmAsIHtcbiAgICAgICAgcG9zaXRpb246IFwidG9wLXJpZ2h0XCIsXG4gICAgICAgIGF1dG9DbG9zZTogNTAwMCxcbiAgICAgICAgaGlkZVByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGZpZWxkU2VwYXJhdG9yOiBcIixcIixcbiAgICBxdW90ZVN0cmluZ3M6ICdcIicsXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogXCIuXCIsXG4gICAgc2hvd0xhYmVsczogdHJ1ZSxcbiAgICBzaG93VGl0bGU6IHRydWUsXG4gICAgdGl0bGU6IFwiSW50ZXJlc3QgTGlzdFwiLFxuICAgIHVzZVRleHRGaWxlOiBmYWxzZSxcbiAgICB1c2VCb206IHRydWUsXG4gICAgdXNlS2V5c0FzSGVhZGVyczogdHJ1ZSxcbiAgfTtcbiAgY29uc3QgY3N2RXhwb3J0ZXIgPSBuZXcgRXhwb3J0VG9Dc3Yob3B0aW9ucyk7XG5cbiAgY29uc3QgaGFuZGxlRXhwb3J0ID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIGNvbnN0IHtzZWxlY3RlZFJvd3N9ID0gc3RhdGVcbiAgICBpZiAoaW50ZXJlc3REYXRhKSB7XG4gICAgICBsZXQgZXhwb3J0QXJyYXkgPSBbXTtcbiAgICAgIGludGVyZXN0RGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGxldCByZWFkeUV4cG9ydCA9IHt9O1xuICAgICAgICByZWFkeUV4cG9ydC5pZCA9IGl0ZW0uaWQ7XG4gICAgICAgIHJlYWR5RXhwb3J0Lm5hbWUgPSBpdGVtLm5hbWU7XG4gICAgICAgIHJlYWR5RXhwb3J0LmF1ZGllbmNlID0gaXRlbS5hdWRpZW5jZV9zaXplO1xuICAgICAgICByZWFkeUV4cG9ydC5kZXNjcmlwdGlvbiA9IGl0ZW0uZGVzY3JpcHRpb247XG4gICAgICAgIHJlYWR5RXhwb3J0LnRvcGljID0gaXRlbS50b3BpYztcbiAgICAgICAgcmVhZHlFeHBvcnQucGF0aCA9IEpTT04uc3RyaW5naWZ5KGl0ZW0ucGF0aCk7XG4gICAgICAgIHJlYWR5RXhwb3J0LnNjb3JlID0gaXRlbS5yZWxldmFuY2U7XG4gICAgICAgIGV4cG9ydEFycmF5LnB1c2gocmVhZHlFeHBvcnQpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGNzdkV4cG9ydGVyLmdlbmVyYXRlQ3N2KGV4cG9ydEFycmF5KTtcbiAgICAgIHRvYXN0LnN1Y2Nlc3MoYFlvdSBkb3dubG9hZGVkICR7aW50ZXJlc3REYXRhLmxlbmd0aH0gaXRlbXNgLCB7XG4gICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9hc3QuZXJyb3IoYFlvdSBoYXZlIG5vdCBtYWRlIGFueSBzZWxlY3Rpb25gLCB7XG4gICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICBhdXRvQ2xvc2U6IDMwMDAsXG4gICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25GaWx0ZXJDaGFuZ2UgPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCBmaWx0ZXJlZCA9IGludGVyZXN0RGF0YS5maWx0ZXIoXG4gICAgICAoaXRlbSkgPT5cbiAgICAgICAgaXRlbVtcImF1ZGllbmNlX3NpemVcIl0gPj0gdmFsdWVbMF0gJiYgaXRlbVtcImF1ZGllbmNlX3NpemVcIl0gPD0gdmFsdWVbMV1cbiAgICApO1xuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgaW50ZXJlc3RzOiBmaWx0ZXJlZCxcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCB7IGludGVyZXN0cywgc2VsZWN0ZWRSb3dLZXlzLCBpbnRlcmVzdE51bWJlciwgbWF4LCBtaW4gfSA9IHN0YXRlO1xuICByZXR1cm4gKFxuICAgIDxkaXYgaWQ9XCJ3cmFwcGVyXCI+XG4gICAgICA8VG9hc3RDb250YWluZXJcbiAgICAgICAgcG9zaXRpb249XCJ0b3AtbGVmdFwiXG4gICAgICAgIGF1dG9DbG9zZT17NTAwMH1cbiAgICAgICAgaGlkZVByb2dyZXNzQmFyPXtmYWxzZX1cbiAgICAgICAgbmV3ZXN0T25Ub3A9e2ZhbHNlfVxuICAgICAgICBjbG9zZU9uQ2xpY2tcbiAgICAgICAgcnRsPXtmYWxzZX1cbiAgICAgICAgcGF1c2VPblZpc2liaWxpdHlDaGFuZ2VcbiAgICAgICAgZHJhZ2dhYmxlXG4gICAgICAgIHBhdXNlT25Ib3ZlclxuICAgICAgLz5cblxuICAgICAgPGRpdiBpZD1cIm1haW4tY29udGVudFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvcFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5uZXJcIj5cbiAgICAgICAgICAgIDxTZWFyY2hcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJGaW5kIEZhY2Vib29rIGludGVyZXN0IGZvciBhIGtleXdvcmRcIlxuICAgICAgICAgICAgICBlbnRlckJ1dHRvbj1cIkdldGNoXCJcbiAgICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgICAgb25TZWFyY2g9eyh2YWx1ZSkgPT4gZ2V0SW50ZXJlc3QodmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICB7aW50ZXJlc3ROdW1iZXIgPyAoXG4gICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgPGI+e2ludGVyZXN0TnVtYmVyfTwvYj4gaW50ZXJlc3QgZm91bmQgZm9yIFwie2tleXdvcmR9XCJcbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbHRlclwiPlxuICAgICAgICAgICAgICAgIDxwPkZpbHRlciBhdWRpZW5jZTwvcD5cbiAgICAgICAgICAgICAgICA8U2xpZGVyXG4gICAgICAgICAgICAgICAgICBtYXg9e21heH1cbiAgICAgICAgICAgICAgICAgIG1pbj17bWlufVxuICAgICAgICAgICAgICAgICAgcmFuZ2VcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17W21pbiwgbWF4XX1cbiAgICAgICAgICAgICAgICAgIG9uQWZ0ZXJDaGFuZ2U9e29uRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtvbkNvcHl9PkNvcHk8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVFeHBvcnR9PkRvd25sb2FkIGFzIENTVjwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aWRlclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUV4cG9ydH0+U2F2ZSBhcyBwcm9qZWN0PC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b24gY29sb3I9XCIjNGU1NGM4XCIgb25DbGljaz17aGFuZGxlRXhwb3J0fT5cbiAgICAgICAgICAgICAgICAgICAgU2F2ZSB0byBGYWNlYm9va1xuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgaWQ9XCJ0YWJsZVwiPlxuICAgICAgICAgIHtzZWFyY2hpbmcgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRlclwiPlxuICAgICAgICAgICAgICA8TG9hZGVyIHR5cGU9XCJCYXJzXCIgY29sb3I9XCIjNGU1NGM4XCIgaGVpZ2h0PXsxMDB9IHdpZHRoPXsxMDB9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPEludGVyZXN0VGFibGVcbiAgICAgICAgICAgICAgb25TZWxlY3Rpb249e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAgICAgICBzZWxlY3RlZFJvd0tleXM9e3NlbGVjdGVkUm93S2V5c31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGVcIlxuICAgICAgICAgICAgICBjb2x1bW5zPXt0YWJsZUNvbHVtbnN9XG4gICAgICAgICAgICAgIGRhdGFTb3VyY2U9e2ludGVyZXN0c31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAjd3JhcHBlciB7XG4gICAgICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgI21haW4tY29udGVudCB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcbiAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgIH1cbiAgICAgICAgI3RhYmxlIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb250cm9scyB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hY3Rpb25zIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmFjdGlvbnMgPiAqIHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC5sb2FkZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBoZWlnaHQ6IDUwMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5kaXZpZGVyIHtcbiAgICAgICAgICBoZWlnaHQ6IDM1cHg7XG4gICAgICAgICAgd2lkdGg6IDA7XG4gICAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgIG1hcmdpbjogMCAwIDAgNXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmZpbHRlciB7XG4gICAgICAgICAgd2lkdGg6IDMwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC50b3Age1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgaGVpZ2h0OiAxMzBweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLmlubmVyIHtcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgdG9wOiA1MHB4O1xuICAgICAgICAgIHdpZHRoOiA4MSU7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgei1pbmRleDogMTAwO1xuICAgICAgICAgIGhlaWdodDogMTUwcHg7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG5cbiAgICAgICAgLmhlYWRlciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuSW5kZXguZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgY29uc3QgdG9rZW4gPSBjb250ZXh0LnF1ZXJ5LmF0O1xuICByZXR1cm4ge1xuICAgIHRva2VuLFxuICB9O1xufTtcblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiAoe1xuICB1c2VyOiBzdGF0ZS51c2VyLmN1cnJlbnRVc2VyLFxuICBzZWFyY2hpbmc6IHN0YXRlLnNlYXJjaC5sb2FkaW5nLFxuICBmYlRva2VuOiBzdGF0ZS51c2VyLmZiVG9rZW4sXG4gIGludGVyZXN0RGF0YTogc3RhdGUuc2VhcmNoLmludGVyZXN0cyxcbiAgaW50ZXJlc3RDb3VudDogc3RhdGUuc2VhcmNoLmludGVyZXN0Q291bnQsXG4gIGtleXdvcmQ6IHN0YXRlLnNlYXJjaC5rZXl3b3JkLFxufSk7XG5cbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IChkaXNwYXRjaCkgPT4gKHtcbiAgYWRkVXNlcjogKGl0ZW0pID0+IGRpc3BhdGNoKGFkZGluZ0N1cnJlbnRVc2VyKGl0ZW0pKSxcbiAgc2VhcmNoSW50ZXJlc3Q6ICh0b2tlbiwgdmFsdWUsIGxpbWl0KSA9PlxuICAgIGRpc3BhdGNoKHNlYXJjaFN0YXJ0KHsgdG9rZW4sIHZhbHVlLCBsaW1pdCB9KSksXG59KTtcblxuSW5kZXguTGF5b3V0ID0gRGFzaGJvYXJkTGF5b3V0O1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShJbmRleCk7XG4iXX0= */\\n/*@ sourceURL=/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js */\"));\n};\n\nIndex.getInitialProps = function _callee(context) {\n  var token;\n  return _regeneratorRuntime.async(function _callee$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          token = context.query.at;\n          return _context3.abrupt(\"return\", {\n            token: token\n          });\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user.currentUser,\n    searching: state.search.loading,\n    fbToken: state.user.fbToken,\n    interestData: state.search.interests,\n    interestCount: state.search.interestCount,\n    keyword: state.search.keyword\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addUser: function addUser(item) {\n      return dispatch(addingCurrentUser(item));\n    },\n    searchInterest: function searchInterest(token, value, limit) {\n      return dispatch(searchStart({\n        token: token,\n        value: value,\n        limit: limit\n      }));\n    }\n  };\n};\n\nIndex.Layout = DashboardLayout;\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js"],"names":["useRouter","useEffect","useState","connect","ExportToCsv","ToastContainer","toast","Loader","DashboardLayout","InterestTable","tableColumns","decodeToken","addingCurrentUser","searchStart","Index","props","selectedInterest","min","max","state","setState","token","user","addUser","fbToken","interestData","searchInterest","keyword","interestCount","searching","Search","router","decoded","_id","name","email","domain","userData","id","xToken","console","log","push","Math","apply","map","item","interests","interestNumber","getInterest","value","onSelectionChange","selectedRowKeys","selectedRows","interest","onCopy","length","navigator","clipboard","writeText","then","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","error","options","fieldSeparator","quoteStrings","decimalSeparator","showLabels","showTitle","title","useTextFile","useBom","useKeysAsHeaders","csvExporter","handleExport","exportArray","forEach","readyExport","audience","audience_size","description","topic","path","JSON","stringify","score","relevance","generateCsv","onFilterChange","filtered","filter","getInitialProps","context","query","at","mapStateToProps","currentUser","search","loading","mapDispatchToProps","dispatch","limit","Layout"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button, Input, Slider } from \"antd\";\nimport { ExportToCsv } from \"export-to-csv\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport Loader from \"react-loader-spinner\";\n\nimport DashboardLayout from \"../components/dashboardLayout\";\nimport InterestTable from \"../components/table\";\n\nimport { tableColumns } from \"../utils/table\";\n\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser } from \"../redux/user/user-actions\";\nimport { searchStart } from \"../redux/search/search-actions\";\n\nimport \"react-toastify/scss/main.scss\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nconst Index = (props) => {\n  const [state, setState] = useState({\n    selectedInterest: [],\n    min: null,\n    max: null,\n  });\n  const {\n    token,\n    user,\n    addUser,\n    fbToken,\n    interestData,\n    searchInterest,\n    keyword,\n    interestCount,\n    searching,\n  } = props;\n  const { Search } = Input;\n  const router = useRouter();\n\n  useEffect(() => {\n    if (token) {\n      const decoded = decodeToken(token);\n      const { _id, name, email, domain } = decoded;\n      const userData = {\n        id: _id,\n        name,\n        email,\n        domain,\n        xToken: token,\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signup\");\n    }\n  }, []);\n\n  useEffect(() => {\n    if (interestData && interestCount) {\n      const max = Math.max.apply(\n        Math,\n        interestData.map((item) => item[\"audience_size\"])\n      );\n      const min = Math.min.apply(\n        Math,\n        interestData.map((item) => item[\"audience_size\"])\n      );\n\n      setState({\n        ...state,\n        max: max,\n        min: min,\n        interests: interestData,\n        interestNumber: interestCount,\n      });\n    }\n  }, [interestData, interestCount]);\n\n  const getInterest = async (value) => {\n    await searchInterest(fbToken.token, value, 500);\n  };\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    console.log(\"rows\", selectedRows);\n    const selectedInterest = selectedRows.map((interest) => {\n      return interest.name;\n    });\n    setState({\n      ...state,\n      selectedRowKeys,\n      selectedInterest,\n      selectedRows,\n    });\n  };\n\n  const onCopy = () => {\n    const { selectedInterest } = state;\n    console.log(\"copy\", selectedInterest);\n    if (selectedInterest.length) {\n      navigator.clipboard.writeText(selectedInterest).then(() => {\n        console.log(\"you copied\", selectedInterest.length);\n\n        toast.success(`You copied ${selectedInterest.length} items`, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n        });\n      });\n    } else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n    }\n  };\n\n  const options = {\n    fieldSeparator: \",\",\n    quoteStrings: '\"',\n    decimalSeparator: \".\",\n    showLabels: true,\n    showTitle: true,\n    title: \"Interest List\",\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true,\n  };\n  const csvExporter = new ExportToCsv(options);\n\n  const handleExport = async () => {\n    // const {selectedRows} = state\n    if (interestData) {\n      let exportArray = [];\n      interestData.forEach((item) => {\n        let readyExport = {};\n        readyExport.id = item.id;\n        readyExport.name = item.name;\n        readyExport.audience = item.audience_size;\n        readyExport.description = item.description;\n        readyExport.topic = item.topic;\n        readyExport.path = JSON.stringify(item.path);\n        readyExport.score = item.relevance;\n        exportArray.push(readyExport);\n      });\n\n      await csvExporter.generateCsv(exportArray);\n      toast.success(`You downloaded ${interestData.length} items`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n    } else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n    }\n  };\n\n  const onFilterChange = (value) => {\n    const filtered = interestData.filter(\n      (item) =>\n        item[\"audience_size\"] >= value[0] && item[\"audience_size\"] <= value[1]\n    );\n    setState({\n      ...state,\n      interests: filtered,\n    });\n  };\n\n  const { interests, selectedRowKeys, interestNumber, max, min } = state;\n  return (\n    <div id=\"wrapper\">\n      <ToastContainer\n        position=\"top-left\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop={false}\n        closeOnClick\n        rtl={false}\n        pauseOnVisibilityChange\n        draggable\n        pauseOnHover\n      />\n\n      <div id=\"main-content\">\n        <div className=\"top\">\n          <div className=\"inner\">\n            <Search\n              placeholder=\"Find Facebook interest for a keyword\"\n              enterButton=\"Getch\"\n              size=\"large\"\n              onSearch={(value) => getInterest(value)}\n            />\n            <div className=\"controls\">\n              <div>\n                {interestNumber ? (\n                  <p>\n                    <b>{interestNumber}</b> interest found for \"{keyword}\"\n                  </p>\n                ) : (\n                  \"\"\n                )}\n              </div>\n              <div className=\"filter\">\n                <p>Filter audience</p>\n                <Slider\n                  max={max}\n                  min={min}\n                  range\n                  defaultValue={[min, max]}\n                  onAfterChange={onFilterChange}\n                />\n              </div>\n              <div className=\"actions\">\n                <div className=\"button\">\n                  <Button onClick={onCopy}>Copy</Button>\n                </div>\n                <div className=\"button\">\n                  <Button onClick={handleExport}>Download as CSV</Button>\n                </div>\n                <div className=\"divider\"></div>\n                <div className=\"button\">\n                  <Button onClick={handleExport}>Save as project</Button>\n                </div>\n                <div className=\"button\">\n                  <Button color=\"#4e54c8\" onClick={handleExport}>\n                    Save to Facebook\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div id=\"table\">\n          {searching ? (\n            <div className=\"loader\">\n              <Loader type=\"Bars\" color=\"#4e54c8\" height={100} width={100} />\n            </div>\n          ) : (\n            <InterestTable\n              onSelection={onSelectionChange}\n              selectedRowKeys={selectedRowKeys}\n              className=\"table\"\n              columns={tableColumns}\n              dataSource={interests}\n            />\n          )}\n        </div>\n      </div>\n\n      <style jsx>{`\n        #wrapper {\n          margin: 10px;\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n        }\n        #main-content {\n          margin-top: 30px;\n          flex-grow: 1;\n        }\n        #table {\n          margin-top: 30px;\n          flex-grow: 1;\n        }\n\n        .controls {\n          display: flex;\n          margin-top: 10px;\n          justify-content: space-between;\n        }\n\n        .actions {\n          display: flex;\n        }\n\n        .actions > * {\n          margin-left: 5px;\n        }\n        .loader {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          height: 500px;\n        }\n        .divider {\n          height: 35px;\n          width: 0;\n          border-left: 1px solid #ccc;\n          margin: 0 0 0 5px;\n        }\n\n        .filter {\n          width: 30%;\n        }\n\n        .top {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          position: relative;\n          height: 130px;\n          margin-bottom: 20px;\n          width: 100%;\n          background-color: white;\n        }\n\n        .inner {\n          position: fixed;\n          top: 50px;\n          width: 81%;\n          background-color: white;\n          z-index: 100;\n          height: 150px;\n          display: flex;\n          justify-content: center;\n          flex-direction: column;\n        }\n\n        .header {\n          margin-bottom: 20px;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nIndex.getInitialProps = async function (context) {\n  const token = context.query.at;\n  return {\n    token,\n  };\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user.currentUser,\n  searching: state.search.loading,\n  fbToken: state.user.fbToken,\n  interestData: state.search.interests,\n  interestCount: state.search.interestCount,\n  keyword: state.search.keyword,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  addUser: (item) => dispatch(addingCurrentUser(item)),\n  searchInterest: (token, value, limit) =>\n    dispatch(searchStart({ token, value, limit })),\n});\n\nIndex.Layout = DashboardLayout;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);\n"]},"metadata":{},"sourceType":"module"}