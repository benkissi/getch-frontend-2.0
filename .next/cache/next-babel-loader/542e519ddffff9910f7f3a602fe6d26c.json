{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/slider/style\";\nimport _Slider from \"antd/lib/slider\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nvar _jsxFileName = \"/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { ExportToCsv } from \"export-to-csv\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport Loader from 'react-loader-spinner';\nimport DashboardLayout from \"../components/dashboardLayout\";\nimport InterestTable from \"../components/table\";\nimport SideBar from \"../components/sideBar\";\nimport { tableColumns } from \"../utils/table\";\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser } from \"../redux/user/user-actions\";\nimport { searchStart } from \"../redux/search/search-actions\";\nimport \"react-toastify/scss/main.scss\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nvar Index = function Index(props) {\n  var _useState = useState({\n    selectedInterest: [],\n    min: null,\n    max: null\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var token = props.token,\n      user = props.user,\n      addUser = props.addUser,\n      fbToken = props.fbToken,\n      interestData = props.interestData,\n      searchInterest = props.searchInterest,\n      keyword = props.keyword,\n      interestCount = props.interestCount,\n      searching = props.searching;\n  var Search = _Input.Search;\n  var router = useRouter();\n  useEffect(function () {\n    if (token) {\n      var decoded = decodeToken(token);\n      var _id = decoded._id,\n          name = decoded.name,\n          email = decoded.email,\n          domain = decoded.domain;\n      var userData = {\n        id: _id,\n        name: name,\n        email: email,\n        domain: domain\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n  useEffect(function () {\n    var max = Math.max.apply(Math, interestData.map(function (item) {\n      return item['audience_size'];\n    }));\n    var min = Math.min.apply(Math, interestData.map(function (item) {\n      return item['audience_size'];\n    }));\n    setState(_objectSpread({}, state, {\n      max: max,\n      min: min,\n      interests: interestData,\n      interestNumber: interestCount\n    }));\n  }, [interestData, interestCount]);\n\n  var getInterest = function getInterest(value) {\n    return _regeneratorRuntime.async(function getInterest$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(searchInterest(fbToken.token, value, 500));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var onSelectionChange = function onSelectionChange(selectedRowKeys, selectedRows) {\n    console.log(\"rows\", selectedRows);\n    var selectedInterest = selectedRows.map(function (interest) {\n      return interest.name;\n    });\n    setState(_objectSpread({}, state, {\n      selectedRowKeys: selectedRowKeys,\n      selectedInterest: selectedInterest,\n      selectedRows: selectedRows\n    }));\n  };\n\n  var onCopy = function onCopy() {\n    var selectedInterest = state.selectedInterest;\n    console.log(\"copy\", selectedInterest);\n\n    if (selectedInterest.length) {\n      navigator.clipboard.writeText(selectedInterest).then(function () {\n        console.log(\"you copied\", selectedInterest.length);\n        toast.success(\"You copied \".concat(selectedInterest.length, \" items\"), {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      });\n    } else {\n      toast.error(\"You have not made any selection\", {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  var sideBar = __jsx(SideBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  });\n\n  var options = {\n    fieldSeparator: \",\",\n    quoteStrings: '\"',\n    decimalSeparator: \".\",\n    showLabels: true,\n    showTitle: true,\n    title: \"Interest List\",\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true\n  };\n  var csvExporter = new ExportToCsv(options);\n\n  var handleExport = function handleExport() {\n    var exportArray;\n    return _regeneratorRuntime.async(function handleExport$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!interestData) {\n              _context2.next = 8;\n              break;\n            }\n\n            exportArray = [];\n            interestData.forEach(function (item) {\n              var readyExport = {};\n              readyExport.id = item.id;\n              readyExport.name = item.name;\n              readyExport.audience = item.audience_size;\n              readyExport.description = item.description;\n              readyExport.topic = item.topic;\n              readyExport.path = _JSON$stringify(item.path);\n              readyExport.score = item.relevance;\n              exportArray.push(readyExport);\n            });\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(csvExporter.generateCsv(exportArray));\n\n          case 5:\n            toast.success(\"You downloaded \".concat(interestData.length, \" items\"), {\n              position: \"top-right\",\n              autoClose: 5000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true\n            });\n            _context2.next = 9;\n            break;\n\n          case 8:\n            toast.error(\"You have not made any selection\", {\n              position: \"top-right\",\n              autoClose: 3000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true\n            });\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  var onFilterChange = function onFilterChange(value) {\n    var filtered = interestData.filter(function (item) {\n      return item['audience_size'] >= value[0] && item['audience_size'] <= value[1];\n    });\n    setState(_objectSpread({}, state, {\n      interests: filtered\n    }));\n  };\n\n  var interests = state.interests,\n      selectedRowKeys = state.selectedRowKeys,\n      interestNumber = state.interestNumber,\n      max = state.max,\n      min = state.min;\n  return __jsx(DashboardLayout, {\n    sidebar: sideBar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"wrapper\",\n    className: \"jsx-3599733485\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, __jsx(ToastContainer, {\n    position: \"top-left\",\n    autoClose: 5000,\n    hideProgressBar: false,\n    newestOnTop: false,\n    closeOnClick: true,\n    rtl: false,\n    pauseOnVisibilityChange: true,\n    draggable: true,\n    pauseOnHover: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    id: \"main-content\",\n    className: \"jsx-3599733485\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"top\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, __jsx(Search, {\n    placeholder: \"Find Facebook interest for a keyword\",\n    enterButton: \"Getch\",\n    size: \"large\",\n    onSearch: function onSearch(value) {\n      return getInterest(value);\n    },\n    className: \"jsx-3599733485\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3599733485\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, interestNumber ? __jsx(\"p\", {\n    className: \"jsx-3599733485\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, __jsx(\"b\", {\n    className: \"jsx-3599733485\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, interestNumber), \" interest found for \\\"\", keyword, \"\\\"\") : \"\"), __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"filter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    className: \"jsx-3599733485\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, \"Filter audience\"), __jsx(_Slider, {\n    max: max,\n    min: min,\n    range: true,\n    defaultValue: [min, max],\n    onAfterChange: onFilterChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"actions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, __jsx(_Button, {\n    onClick: onCopy,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, \"Copy\")), __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, __jsx(_Button, {\n    onClick: handleExport,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, \"Download as CSV\")), __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"divider\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }, __jsx(_Button, {\n    onClick: handleExport,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, \"Save as project\")), __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, __jsx(_Button, {\n    color: \"#4e54c8\",\n    onClick: handleExport,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, \"Save to Facebook\")))))), __jsx(\"div\", {\n    id: \"table\",\n    className: \"jsx-3599733485\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }, searching ? __jsx(\"div\", {\n    className: \"jsx-3599733485\" + \" \" + \"loader\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242\n    },\n    __self: this\n  }, __jsx(Loader, {\n    type: \"Bars\",\n    color: \"#4e54c8\",\n    height: 100,\n    width: 100,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  })) : __jsx(InterestTable, {\n    onSelection: onSelectionChange,\n    selectedRowKeys: selectedRowKeys,\n    className: \"table\",\n    columns: tableColumns,\n    dataSource: interests,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  }))), __jsx(_JSXStyle, {\n    id: \"3599733485\",\n    __self: this\n  }, \"#wrapper.jsx-3599733485{margin:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}#main-content.jsx-3599733485{margin-top:30px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}#table.jsx-3599733485{margin-top:30px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.controls.jsx-3599733485{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.actions.jsx-3599733485{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.actions.jsx-3599733485>*.jsx-3599733485{margin-left:5px;}.loader.jsx-3599733485{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:500px;}.divider.jsx-3599733485{height:35px;width:0;border-left:1px solid #ccc;margin:0 0 0 5px;}.filter.jsx-3599733485{width:30%;}.top.jsx-3599733485{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;height:130px;margin-bottom:20px;width:100%;background-color:white;z-index:100;}.inner.jsx-3599733485{position:fixed;top:80px;width:80%;background-color:white;z-index:100;height:inherit;}.header.jsx-3599733485{margin-bottom:20px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Jlbmtpc3NpL3Byb2plY3RzL2dldGNoL2dldGNoLWZyb250ZW5kLTIuMC9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxUW9CLEFBR3lCLEFBTUksQUFJQSxBQUtILEFBTUEsQUFJRyxBQUdILEFBT0QsQUFRRixBQUlHLEFBV0UsQUFTSSxVQXZCckIsRUEzQ2UsQUFtQ04sR0F1QkUsQ0FwREcsQUFJQSxBQWVkLEdBMENBLENBL0I2QixJQXVCakIsVUFDYSxhQXZCTixVQXdCTCxPQXRCZCxLQXVCaUIsS0EvQ0MsQUFNbEIsQUFPeUIsQUFtQkEsVUFnQnpCLEVBOUR3QixDQU14QixBQUlBLEdBS2dDLDBFQWRsQixTQTJCTyxBQW1CRCxHQTdDcEIsZUE4Q2UsYUFDTSxDQWpDckIsa0JBa0NhLFdBQ1ksdUJBQ1gsU0F2QkMsR0F3QmYsVUF0QkEiLCJmaWxlIjoiL2hvbWUvYmVua2lzc2kvcHJvamVjdHMvZ2V0Y2gvZ2V0Y2gtZnJvbnRlbmQtMi4wL3BhZ2VzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5pbXBvcnQgeyBCdXR0b24sIElucHV0LCBTbGlkZXIgIH0gZnJvbSBcImFudGRcIjtcbmltcG9ydCB7IEV4cG9ydFRvQ3N2IH0gZnJvbSBcImV4cG9ydC10by1jc3ZcIjtcbmltcG9ydCB7IFRvYXN0Q29udGFpbmVyLCB0b2FzdCB9IGZyb20gXCJyZWFjdC10b2FzdGlmeVwiO1xuaW1wb3J0IExvYWRlciBmcm9tICdyZWFjdC1sb2FkZXItc3Bpbm5lcidcblxuaW1wb3J0IERhc2hib2FyZExheW91dCBmcm9tIFwiLi4vY29tcG9uZW50cy9kYXNoYm9hcmRMYXlvdXRcIjtcbmltcG9ydCBJbnRlcmVzdFRhYmxlIGZyb20gXCIuLi9jb21wb25lbnRzL3RhYmxlXCI7XG5pbXBvcnQgU2lkZUJhciBmcm9tIFwiLi4vY29tcG9uZW50cy9zaWRlQmFyXCI7XG5cbmltcG9ydCB7IHRhYmxlQ29sdW1ucyB9IGZyb20gXCIuLi91dGlscy90YWJsZVwiO1xuXG5pbXBvcnQgZGVjb2RlVG9rZW4gZnJvbSBcIi4uL3V0aWxzL2F1dGhcIjtcbmltcG9ydCB7IGFkZGluZ0N1cnJlbnRVc2VyIH0gZnJvbSBcIi4uL3JlZHV4L3VzZXIvdXNlci1hY3Rpb25zXCI7XG5pbXBvcnQgeyBzZWFyY2hTdGFydCB9IGZyb20gXCIuLi9yZWR1eC9zZWFyY2gvc2VhcmNoLWFjdGlvbnNcIjtcblxuaW1wb3J0IFwicmVhY3QtdG9hc3RpZnkvc2Nzcy9tYWluLnNjc3NcIjtcbmltcG9ydCBcInJlYWN0LWxvYWRlci1zcGlubmVyL2Rpc3QvbG9hZGVyL2Nzcy9yZWFjdC1zcGlubmVyLWxvYWRlci5jc3NcIlxuXG5jb25zdCBJbmRleCA9IHByb3BzID0+IHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7IHNlbGVjdGVkSW50ZXJlc3Q6IFtdLCBtaW46IG51bGwsIG1heDogbnVsbCB9KTtcbiAgY29uc3Qge1xuICAgIHRva2VuLFxuICAgIHVzZXIsXG4gICAgYWRkVXNlcixcbiAgICBmYlRva2VuLFxuICAgIGludGVyZXN0RGF0YSxcbiAgICBzZWFyY2hJbnRlcmVzdCxcbiAgICBrZXl3b3JkLFxuICAgIGludGVyZXN0Q291bnQsXG4gICAgc2VhcmNoaW5nXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgeyBTZWFyY2ggfSA9IElucHV0O1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0b2tlbikge1xuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZVRva2VuKHRva2VuKTtcbiAgICAgIGNvbnN0IHsgX2lkLCBuYW1lLCBlbWFpbCwgZG9tYWluIH0gPSBkZWNvZGVkO1xuICAgICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICAgIGlkOiBfaWQsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBkb21haW5cbiAgICAgIH07XG4gICAgICBhZGRVc2VyKHVzZXJEYXRhKTtcbiAgICB9IGVsc2UgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3V0ZXIucHVzaChcIi9zaWduaW5cIik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBtYXggPSBNYXRoLm1heC5hcHBseShNYXRoLCBpbnRlcmVzdERhdGEubWFwKGl0ZW0gPT4gaXRlbVsnYXVkaWVuY2Vfc2l6ZSddKSlcbiAgICBjb25zdCBtaW4gPSBNYXRoLm1pbi5hcHBseShNYXRoLCBpbnRlcmVzdERhdGEubWFwKGl0ZW0gPT4gaXRlbVsnYXVkaWVuY2Vfc2l6ZSddKSlcblxuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgbWF4OiBtYXgsXG4gICAgICBtaW46IG1pbixcbiAgICAgIGludGVyZXN0czogaW50ZXJlc3REYXRhLFxuICAgICAgaW50ZXJlc3ROdW1iZXI6IGludGVyZXN0Q291bnRcbiAgICB9KTtcbiAgfSwgW2ludGVyZXN0RGF0YSwgaW50ZXJlc3RDb3VudF0pO1xuXG4gIGNvbnN0IGdldEludGVyZXN0ID0gYXN5bmMgdmFsdWUgPT4ge1xuICAgIGF3YWl0IHNlYXJjaEludGVyZXN0KGZiVG9rZW4udG9rZW4sIHZhbHVlLCA1MDApO1xuICB9O1xuXG4gIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gKHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJyb3dzXCIsIHNlbGVjdGVkUm93cyk7XG4gICAgY29uc3Qgc2VsZWN0ZWRJbnRlcmVzdCA9IHNlbGVjdGVkUm93cy5tYXAoaW50ZXJlc3QgPT4ge1xuICAgICAgcmV0dXJuIGludGVyZXN0Lm5hbWU7XG4gICAgfSk7XG4gICAgc2V0U3RhdGUoe1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBzZWxlY3RlZFJvd0tleXMsXG4gICAgICBzZWxlY3RlZEludGVyZXN0LFxuICAgICAgc2VsZWN0ZWRSb3dzXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgb25Db3B5ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgc2VsZWN0ZWRJbnRlcmVzdCB9ID0gc3RhdGU7XG4gICAgY29uc29sZS5sb2coXCJjb3B5XCIsIHNlbGVjdGVkSW50ZXJlc3QpO1xuICAgIGlmIChzZWxlY3RlZEludGVyZXN0Lmxlbmd0aCkge1xuICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc2VsZWN0ZWRJbnRlcmVzdCkudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwieW91IGNvcGllZFwiLCBzZWxlY3RlZEludGVyZXN0Lmxlbmd0aCk7XG5cbiAgICAgICAgdG9hc3Quc3VjY2VzcyhgWW91IGNvcGllZCAke3NlbGVjdGVkSW50ZXJlc3QubGVuZ3RofSBpdGVtc2AsIHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgICAgaGlkZVByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1lbHNle1xuICAgICAgdG9hc3QuZXJyb3IoYFlvdSBoYXZlIG5vdCBtYWRlIGFueSBzZWxlY3Rpb25gLCB7XG4gICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzaWRlQmFyID0gPFNpZGVCYXIgLz47XG5cbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBmaWVsZFNlcGFyYXRvcjogXCIsXCIsXG4gICAgcXVvdGVTdHJpbmdzOiAnXCInLFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6IFwiLlwiLFxuICAgIHNob3dMYWJlbHM6IHRydWUsXG4gICAgc2hvd1RpdGxlOiB0cnVlLFxuICAgIHRpdGxlOiBcIkludGVyZXN0IExpc3RcIixcbiAgICB1c2VUZXh0RmlsZTogZmFsc2UsXG4gICAgdXNlQm9tOiB0cnVlLFxuICAgIHVzZUtleXNBc0hlYWRlcnM6IHRydWVcbiAgfTtcbiAgY29uc3QgY3N2RXhwb3J0ZXIgPSBuZXcgRXhwb3J0VG9Dc3Yob3B0aW9ucyk7XG5cbiAgY29uc3QgaGFuZGxlRXhwb3J0ID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIGNvbnN0IHtzZWxlY3RlZFJvd3N9ID0gc3RhdGVcbiAgICBpZihpbnRlcmVzdERhdGEpe1xuICAgICAgbGV0IGV4cG9ydEFycmF5ID0gW107XG4gICAgICBpbnRlcmVzdERhdGEuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgbGV0IHJlYWR5RXhwb3J0ID0ge307XG4gICAgICAgIHJlYWR5RXhwb3J0LmlkID0gaXRlbS5pZDtcbiAgICAgICAgcmVhZHlFeHBvcnQubmFtZSA9IGl0ZW0ubmFtZTtcbiAgICAgICAgcmVhZHlFeHBvcnQuYXVkaWVuY2UgPSBpdGVtLmF1ZGllbmNlX3NpemU7XG4gICAgICAgIHJlYWR5RXhwb3J0LmRlc2NyaXB0aW9uID0gaXRlbS5kZXNjcmlwdGlvbjtcbiAgICAgICAgcmVhZHlFeHBvcnQudG9waWMgPSBpdGVtLnRvcGljO1xuICAgICAgICByZWFkeUV4cG9ydC5wYXRoID0gSlNPTi5zdHJpbmdpZnkoaXRlbS5wYXRoKTtcbiAgICAgICAgcmVhZHlFeHBvcnQuc2NvcmUgPSBpdGVtLnJlbGV2YW5jZTtcbiAgICAgICAgZXhwb3J0QXJyYXkucHVzaChyZWFkeUV4cG9ydCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgY3N2RXhwb3J0ZXIuZ2VuZXJhdGVDc3YoZXhwb3J0QXJyYXkpO1xuICAgICAgdG9hc3Quc3VjY2VzcyhgWW91IGRvd25sb2FkZWQgJHtpbnRlcmVzdERhdGEubGVuZ3RofSBpdGVtc2AsIHtcbiAgICAgICAgcG9zaXRpb246IFwidG9wLXJpZ2h0XCIsXG4gICAgICAgIGF1dG9DbG9zZTogNTAwMCxcbiAgICAgICAgaGlkZVByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfWVsc2Uge1xuICAgICAgdG9hc3QuZXJyb3IoYFlvdSBoYXZlIG5vdCBtYWRlIGFueSBzZWxlY3Rpb25gLCB7XG4gICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICBhdXRvQ2xvc2U6IDMwMDAsXG4gICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvbkZpbHRlckNoYW5nZSA9ICh2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IGZpbHRlcmVkID0gaW50ZXJlc3REYXRhLmZpbHRlcihpdGVtID0+IGl0ZW1bJ2F1ZGllbmNlX3NpemUnXSA+PSB2YWx1ZVswXSAmJiBpdGVtWydhdWRpZW5jZV9zaXplJ10gPD0gdmFsdWVbMV0pXG4gICAgc2V0U3RhdGUoe1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBpbnRlcmVzdHM6IGZpbHRlcmVkXG5cbiAgICB9KVxuICB9XG5cbiAgY29uc3QgeyBpbnRlcmVzdHMsIHNlbGVjdGVkUm93S2V5cywgaW50ZXJlc3ROdW1iZXIsIG1heCwgbWluIH0gPSBzdGF0ZTtcbiAgcmV0dXJuIChcbiAgICA8RGFzaGJvYXJkTGF5b3V0IHNpZGViYXI9e3NpZGVCYXJ9PlxuICAgICAgPGRpdiBpZD1cIndyYXBwZXJcIj5cbiAgICAgICAgPFRvYXN0Q29udGFpbmVyXG4gICAgICAgICAgcG9zaXRpb249XCJ0b3AtbGVmdFwiXG4gICAgICAgICAgYXV0b0Nsb3NlPXs1MDAwfVxuICAgICAgICAgIGhpZGVQcm9ncmVzc0Jhcj17ZmFsc2V9XG4gICAgICAgICAgbmV3ZXN0T25Ub3A9e2ZhbHNlfVxuICAgICAgICAgIGNsb3NlT25DbGlja1xuICAgICAgICAgIHJ0bD17ZmFsc2V9XG4gICAgICAgICAgcGF1c2VPblZpc2liaWxpdHlDaGFuZ2VcbiAgICAgICAgICBkcmFnZ2FibGVcbiAgICAgICAgICBwYXVzZU9uSG92ZXJcbiAgICAgICAgLz5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgaWQ9XCJtYWluLWNvbnRlbnRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvcFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbm5lclwiPlxuICAgICAgICAgIDxTZWFyY2hcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRmluZCBGYWNlYm9vayBpbnRlcmVzdCBmb3IgYSBrZXl3b3JkXCJcbiAgICAgICAgICAgIGVudGVyQnV0dG9uPVwiR2V0Y2hcIlxuICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgIG9uU2VhcmNoPXt2YWx1ZSA9PiBnZXRJbnRlcmVzdCh2YWx1ZSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICB7aW50ZXJlc3ROdW1iZXIgPyAoXG4gICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICA8Yj57aW50ZXJlc3ROdW1iZXJ9PC9iPiBpbnRlcmVzdCBmb3VuZCBmb3IgXCJ7a2V5d29yZH1cIlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsdGVyXCI+XG4gICAgICAgICAgICAgIDxwPkZpbHRlciBhdWRpZW5jZTwvcD5cbiAgICAgICAgICAgICAgPFNsaWRlciBcbiAgICAgICAgICAgICAgICBtYXg9e21heH1cbiAgICAgICAgICAgICAgICBtaW49e21pbn1cbiAgICAgICAgICAgICAgICByYW5nZSBcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e1ttaW4sIG1heF19XG4gICAgICAgICAgICAgICAgb25BZnRlckNoYW5nZT17b25GaWx0ZXJDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uc1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17b25Db3B5fT5Db3B5PC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlRXhwb3J0fT5Eb3dubG9hZCBhcyBDU1Y8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aWRlclwiPjwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlRXhwb3J0fT5TYXZlIGFzIHByb2plY3Q8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvbiBjb2xvcj1cIiM0ZTU0YzhcIiBvbkNsaWNrPXtoYW5kbGVFeHBvcnR9PlNhdmUgdG8gRmFjZWJvb2s8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgaWQ9XCJ0YWJsZVwiPlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNlYXJjaGluZyA/IFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRlclwiPlxuICAgICAgICAgICAgICAgIDxMb2FkZXJcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJCYXJzXCJcbiAgICAgICAgICAgICAgICAgIGNvbG9yPVwiIzRlNTRjOFwiXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ9ezEwMH1cbiAgICAgICAgICAgICAgICAgIHdpZHRoPXsxMDB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+OlxuICAgICAgICAgICAgICA8SW50ZXJlc3RUYWJsZVxuICAgICAgICAgICAgICAgIG9uU2VsZWN0aW9uPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd0tleXM9e3NlbGVjdGVkUm93S2V5c31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZVwiXG4gICAgICAgICAgICAgICAgY29sdW1ucz17dGFibGVDb2x1bW5zfVxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e2ludGVyZXN0c31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAgICN3cmFwcGVyIHtcbiAgICAgICAgICAgIG1hcmdpbjogMTBweDtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAjbWFpbi1jb250ZW50IHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDMwcHg7XG4gICAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgICN0YWJsZSB7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5jb250cm9scyB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuYWN0aW9ucyB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5hY3Rpb25zID4gKiB7XG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogNXB4O1xuICAgICAgICAgIH1cbiAgICAgICAgICAubG9hZGVyIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICBoZWlnaHQ6IDUwMHB4O1xuXG4gICAgICAgICAgfVxuICAgICAgICAgIC5kaXZpZGVye1xuICAgICAgICAgICAgaGVpZ2h0OiAzNXB4O1xuICAgICAgICAgICAgd2lkdGg6MDtcbiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICAgIG1hcmdpbjogMCAwIDAgNXB4O1xuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmZpbHRlciB7XG4gICAgICAgICAgICB3aWR0aDogMzAlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC50b3Age1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMzBweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgei1pbmRleDogMTAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5pbm5lciB7XG4gICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICB0b3A6IDgwcHg7XG4gICAgICAgICAgICB3aWR0aDogODAlO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICB6LWluZGV4OiAxMDA7XG4gICAgICAgICAgICBoZWlnaHQ6IGluaGVyaXQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmhlYWRlciB7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgYH08L3N0eWxlPlxuICAgICAgPC9kaXY+XG4gICAgPC9EYXNoYm9hcmRMYXlvdXQ+XG4gICk7XG59O1xuXG5JbmRleC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyBmdW5jdGlvbihjb250ZXh0KSB7XG4gIGNvbnN0IHRva2VuID0gY29udGV4dC5xdWVyeS5hdDtcbiAgcmV0dXJuIHtcbiAgICB0b2tlblxuICB9O1xufTtcblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gc3RhdGUgPT4gKHtcbiAgdXNlcjogc3RhdGUudXNlci5jdXJyZW50VXNlcixcbiAgc2VhcmNoaW5nOiBzdGF0ZS5zZWFyY2gubG9hZGluZyxcbiAgZmJUb2tlbjogc3RhdGUudXNlci5mYlRva2VuLFxuICBpbnRlcmVzdERhdGE6IHN0YXRlLnNlYXJjaC5pbnRlcmVzdHMsXG4gIGludGVyZXN0Q291bnQ6IHN0YXRlLnNlYXJjaC5pbnRlcmVzdENvdW50LFxuICBrZXl3b3JkOiBzdGF0ZS5zZWFyY2gua2V5d29yZFxufSk7XG5cbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IGRpc3BhdGNoID0+ICh7XG4gIGFkZFVzZXI6IGl0ZW0gPT4gZGlzcGF0Y2goYWRkaW5nQ3VycmVudFVzZXIoaXRlbSkpLFxuICBzZWFyY2hJbnRlcmVzdDogKHRva2VuLCB2YWx1ZSwgbGltaXQpID0+XG4gICAgZGlzcGF0Y2goc2VhcmNoU3RhcnQoeyB0b2tlbiwgdmFsdWUsIGxpbWl0IH0pKVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKEluZGV4KTtcbiJdfQ== */\\n/*@ sourceURL=/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js */\")));\n};\n\nIndex.getInitialProps = function _callee(context) {\n  var token;\n  return _regeneratorRuntime.async(function _callee$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          token = context.query.at;\n          return _context3.abrupt(\"return\", {\n            token: token\n          });\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user.currentUser,\n    searching: state.search.loading,\n    fbToken: state.user.fbToken,\n    interestData: state.search.interests,\n    interestCount: state.search.interestCount,\n    keyword: state.search.keyword\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addUser: function addUser(item) {\n      return dispatch(addingCurrentUser(item));\n    },\n    searchInterest: function searchInterest(token, value, limit) {\n      return dispatch(searchStart({\n        token: token,\n        value: value,\n        limit: limit\n      }));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/home/benkissi/projects/getch/getch-frontend-2.0/pages/index.js"],"names":["useRouter","useEffect","useState","connect","ExportToCsv","ToastContainer","toast","Loader","DashboardLayout","InterestTable","SideBar","tableColumns","decodeToken","addingCurrentUser","searchStart","Index","props","selectedInterest","min","max","state","setState","token","user","addUser","fbToken","interestData","searchInterest","keyword","interestCount","searching","Search","router","decoded","_id","name","email","domain","userData","id","console","log","push","Math","apply","map","item","interests","interestNumber","getInterest","value","onSelectionChange","selectedRowKeys","selectedRows","interest","onCopy","length","navigator","clipboard","writeText","then","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","error","sideBar","options","fieldSeparator","quoteStrings","decimalSeparator","showLabels","showTitle","title","useTextFile","useBom","useKeysAsHeaders","csvExporter","handleExport","exportArray","forEach","readyExport","audience","audience_size","description","topic","path","score","relevance","generateCsv","onFilterChange","filtered","filter","getInitialProps","context","query","at","mapStateToProps","currentUser","search","loading","mapDispatchToProps","dispatch","limit"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button, Input, Slider  } from \"antd\";\nimport { ExportToCsv } from \"export-to-csv\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport Loader from 'react-loader-spinner'\n\nimport DashboardLayout from \"../components/dashboardLayout\";\nimport InterestTable from \"../components/table\";\nimport SideBar from \"../components/sideBar\";\n\nimport { tableColumns } from \"../utils/table\";\n\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser } from \"../redux/user/user-actions\";\nimport { searchStart } from \"../redux/search/search-actions\";\n\nimport \"react-toastify/scss/main.scss\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\"\n\nconst Index = props => {\n  const [state, setState] = useState({ selectedInterest: [], min: null, max: null });\n  const {\n    token,\n    user,\n    addUser,\n    fbToken,\n    interestData,\n    searchInterest,\n    keyword,\n    interestCount,\n    searching\n  } = props;\n  const { Search } = Input;\n  const router = useRouter();\n\n  useEffect(() => {\n    if (token) {\n      const decoded = decodeToken(token);\n      const { _id, name, email, domain } = decoded;\n      const userData = {\n        id: _id,\n        name,\n        email,\n        domain\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n\n  useEffect(() => {\n    const max = Math.max.apply(Math, interestData.map(item => item['audience_size']))\n    const min = Math.min.apply(Math, interestData.map(item => item['audience_size']))\n\n    setState({\n      ...state,\n      max: max,\n      min: min,\n      interests: interestData,\n      interestNumber: interestCount\n    });\n  }, [interestData, interestCount]);\n\n  const getInterest = async value => {\n    await searchInterest(fbToken.token, value, 500);\n  };\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    console.log(\"rows\", selectedRows);\n    const selectedInterest = selectedRows.map(interest => {\n      return interest.name;\n    });\n    setState({\n      ...state,\n      selectedRowKeys,\n      selectedInterest,\n      selectedRows\n    });\n  };\n\n  const onCopy = () => {\n    const { selectedInterest } = state;\n    console.log(\"copy\", selectedInterest);\n    if (selectedInterest.length) {\n      navigator.clipboard.writeText(selectedInterest).then(() => {\n        console.log(\"you copied\", selectedInterest.length);\n\n        toast.success(`You copied ${selectedInterest.length} items`, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      });\n    }else{\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  const sideBar = <SideBar />;\n\n  const options = {\n    fieldSeparator: \",\",\n    quoteStrings: '\"',\n    decimalSeparator: \".\",\n    showLabels: true,\n    showTitle: true,\n    title: \"Interest List\",\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true\n  };\n  const csvExporter = new ExportToCsv(options);\n\n  const handleExport = async () => {\n    // const {selectedRows} = state\n    if(interestData){\n      let exportArray = [];\n      interestData.forEach(item => {\n        let readyExport = {};\n        readyExport.id = item.id;\n        readyExport.name = item.name;\n        readyExport.audience = item.audience_size;\n        readyExport.description = item.description;\n        readyExport.topic = item.topic;\n        readyExport.path = JSON.stringify(item.path);\n        readyExport.score = item.relevance;\n        exportArray.push(readyExport);\n      });\n\n      await csvExporter.generateCsv(exportArray);\n      toast.success(`You downloaded ${interestData.length} items`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  const onFilterChange = (value) => {\n    const filtered = interestData.filter(item => item['audience_size'] >= value[0] && item['audience_size'] <= value[1])\n    setState({\n      ...state,\n      interests: filtered\n\n    })\n  }\n\n  const { interests, selectedRowKeys, interestNumber, max, min } = state;\n  return (\n    <DashboardLayout sidebar={sideBar}>\n      <div id=\"wrapper\">\n        <ToastContainer\n          position=\"top-left\"\n          autoClose={5000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnVisibilityChange\n          draggable\n          pauseOnHover\n        />\n        \n        <div id=\"main-content\">\n          <div className=\"top\">\n            <div className=\"inner\">\n          <Search\n            placeholder=\"Find Facebook interest for a keyword\"\n            enterButton=\"Getch\"\n            size=\"large\"\n            onSearch={value => getInterest(value)}\n          />\n          <div className=\"controls\">\n            <div>\n              {interestNumber ? (\n                <p>\n                  <b>{interestNumber}</b> interest found for \"{keyword}\"\n                </p>\n              ) : (\n                \"\"\n              )}\n            </div>\n            <div className=\"filter\">\n              <p>Filter audience</p>\n              <Slider \n                max={max}\n                min={min}\n                range \n                defaultValue={[min, max]}\n                onAfterChange={onFilterChange}\n              />\n            </div>\n            <div className=\"actions\">\n              <div className=\"button\">\n                <Button onClick={onCopy}>Copy</Button>\n              </div>\n              <div className=\"button\">\n                <Button onClick={handleExport}>Download as CSV</Button>\n              </div>\n              <div className=\"divider\"></div>\n              <div className=\"button\">\n                <Button onClick={handleExport}>Save as project</Button>\n              </div>\n              <div className=\"button\">\n                <Button color=\"#4e54c8\" onClick={handleExport}>Save to Facebook</Button>\n              </div>\n            </div>\n          </div>\n          </div>\n          </div>\n\n          <div id=\"table\">\n          {\n            searching ? \n              <div className=\"loader\">\n                <Loader\n                  type=\"Bars\"\n                  color=\"#4e54c8\"\n                  height={100}\n                  width={100}\n                />\n              </div>:\n              <InterestTable\n                onSelection={onSelectionChange}\n                selectedRowKeys={selectedRowKeys}\n                className=\"table\"\n                columns={tableColumns}\n                dataSource={interests}\n              />\n          }\n            \n          </div>\n        </div>\n\n        <style jsx>{`\n          #wrapper {\n            margin: 10px;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n          }\n          #main-content {\n            margin-top: 30px;\n            flex-grow: 1;\n          }\n          #table {\n            margin-top: 30px;\n            flex-grow: 1;\n          }\n\n          .controls {\n            display: flex;\n            margin-top: 10px;\n            justify-content: space-between;\n          }\n\n          .actions {\n            display: flex;\n          }\n\n          .actions > * {\n            margin-left: 5px;\n          }\n          .loader {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 500px;\n\n          }\n          .divider{\n            height: 35px;\n            width:0;\n            border-left: 1px solid #ccc;\n            margin: 0 0 0 5px;\n\n          }\n\n          .filter {\n            width: 30%;\n          }\n\n          .top {\n            display: flex;\n            justify-content: center;\n            position: relative;\n            height: 130px;\n            margin-bottom: 20px;\n            width: 100%;\n            background-color: white;\n            z-index: 100;\n          }\n\n          .inner {\n            position: fixed;\n            top: 80px;\n            width: 80%;\n            background-color: white;\n            z-index: 100;\n            height: inherit;\n          }\n\n          .header {\n            margin-bottom: 20px;\n          }\n        `}</style>\n      </div>\n    </DashboardLayout>\n  );\n};\n\nIndex.getInitialProps = async function(context) {\n  const token = context.query.at;\n  return {\n    token\n  };\n};\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser,\n  searching: state.search.loading,\n  fbToken: state.user.fbToken,\n  interestData: state.search.interests,\n  interestCount: state.search.interestCount,\n  keyword: state.search.keyword\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addUser: item => dispatch(addingCurrentUser(item)),\n  searchInterest: (token, value, limit) =>\n    dispatch(searchStart({ token, value, limit }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);\n"]},"metadata":{},"sourceType":"module"}