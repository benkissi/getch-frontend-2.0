{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nvar _jsxFileName = \"/code/ben/getch/frontend/pages/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser } from \"../redux/user/user-actions\";\n\nconst Index = props => {\n  const router = useRouter();\n  useEffect(() => {\n    const {\n      token,\n      user,\n      addUser\n    } = props;\n\n    if (token) {\n      const decoded = decodeToken(props.token);\n      const {\n        _id\n      } = decoded;\n      const userData = {\n        id: _id\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n  return __jsx(\"div\", {\n    id: \"wrapper\",\n    className: \"jsx-1857536138\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    className: \"jsx-1857536138\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, \"Hello Next.js\"), __jsx(_Button, {\n    type: \"danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, \"Primary\"), __jsx(\"p\", {\n    className: \"jsx-1857536138\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, \"Secret: \", process.env.JWT_SECRET), __jsx(_JSXStyle, {\n    id: \"1857536138\",\n    __self: this\n  }, \"#wrapper.jsx-1857536138{margin:10px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9jb2RlL2Jlbi9nZXRjaC9mcm9udGVuZC9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnQ2tCLEFBR3VCLFlBQ2QiLCJmaWxlIjoiL2NvZGUvYmVuL2dldGNoL2Zyb250ZW5kL3BhZ2VzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tIFwicmVhY3QtcmVkdXhcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJhbnRkXCI7XG5cbmltcG9ydCBkZWNvZGVUb2tlbiBmcm9tIFwiLi4vdXRpbHMvYXV0aFwiO1xuaW1wb3J0IHsgYWRkaW5nQ3VycmVudFVzZXIgfSBmcm9tIFwiLi4vcmVkdXgvdXNlci91c2VyLWFjdGlvbnNcIjtcblxuY29uc3QgSW5kZXggPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHsgdG9rZW4sIHVzZXIsIGFkZFVzZXIgfSA9IHByb3BzO1xuICAgIGlmICh0b2tlbikge1xuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZVRva2VuKHByb3BzLnRva2VuKTtcbiAgICAgIGNvbnN0IHsgX2lkIH0gPSBkZWNvZGVkO1xuICAgICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICAgIGlkOiBfaWRcbiAgICAgIH07XG4gICAgICBhZGRVc2VyKHVzZXJEYXRhKTtcbiAgICB9IGVsc2UgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3V0ZXIucHVzaChcIi9zaWduaW5cIik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGlkPVwid3JhcHBlclwiPlxuICAgICAgPHA+SGVsbG8gTmV4dC5qczwvcD5cbiAgICAgIDxCdXR0b24gdHlwZT1cImRhbmdlclwiPlByaW1hcnk8L0J1dHRvbj5cbiAgICAgIDxwPlNlY3JldDoge3Byb2Nlc3MuZW52LkpXVF9TRUNSRVR9PC9wPlxuXG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICN3cmFwcGVyIHtcbiAgICAgICAgICBtYXJnaW46IDEwcHg7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbkluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgY29uc3QgdG9rZW4gPSBjb250ZXh0LnF1ZXJ5LmF0O1xuICByZXR1cm4ge1xuICAgIHRva2VuXG4gIH07XG59O1xuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSBzdGF0ZSA9PiAoe1xuICB1c2VyOiBzdGF0ZS51c2VyLmN1cnJlbnRVc2VyXG59KTtcblxuY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0gZGlzcGF0Y2ggPT4gKHtcbiAgYWRkVXNlcjogaXRlbSA9PiBkaXNwYXRjaChhZGRpbmdDdXJyZW50VXNlcihpdGVtKSlcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShJbmRleCk7XG4iXX0= */\\n/*@ sourceURL=/code/ben/getch/frontend/pages/index.js */\"));\n};\n\nIndex.getInitialProps = async function (context) {\n  const token = context.query.at;\n  return {\n    token\n  };\n};\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addUser: item => dispatch(addingCurrentUser(item))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/code/ben/getch/frontend/pages/index.js"],"names":["useRouter","useEffect","connect","decodeToken","addingCurrentUser","Index","props","router","token","user","addUser","decoded","_id","userData","id","console","log","push","process","env","JWT_SECRET","getInitialProps","context","query","at","mapStateToProps","state","currentUser","mapDispatchToProps","dispatch","item"],"mappings":";;;;;;AAAA,SAASA,SAAT,QAA0B,aAA1B;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,OAAT,QAAwB,aAAxB;AAGA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,iBAAT,QAAkC,4BAAlC;;AAEA,MAAMC,KAAK,GAAGC,KAAK,IAAI;AACrB,QAAMC,MAAM,GAAGP,SAAS,EAAxB;AACAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM;AAAEO,MAAAA,KAAF;AAASC,MAAAA,IAAT;AAAeC,MAAAA;AAAf,QAA2BJ,KAAjC;;AACA,QAAIE,KAAJ,EAAW;AACT,YAAMG,OAAO,GAAGR,WAAW,CAACG,KAAK,CAACE,KAAP,CAA3B;AACA,YAAM;AAAEI,QAAAA;AAAF,UAAUD,OAAhB;AACA,YAAME,QAAQ,GAAG;AACfC,QAAAA,EAAE,EAAEF;AADW,OAAjB;AAGAF,MAAAA,OAAO,CAACG,QAAD,CAAP;AACD,KAPD,MAOO,IAAIJ,IAAJ,EAAU;AACfM,MAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ;AACD,KAFM,MAEA;AACLF,MAAAA,MAAM,CAACU,IAAP,CAAY,SAAZ;AACD;AACF,GAdQ,EAcN,EAdM,CAAT;AAgBA,SACE;AAAK,IAAA,EAAE,EAAC,SAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAYC,OAAO,CAACC,GAAR,CAAYC,UAAxB,CAHF;AAAA;AAAA;AAAA,6pEADF;AAaD,CA/BD;;AAiCAf,KAAK,CAACgB,eAAN,GAAwB,gBAAeC,OAAf,EAAwB;AAC9C,QAAMd,KAAK,GAAGc,OAAO,CAACC,KAAR,CAAcC,EAA5B;AACA,SAAO;AACLhB,IAAAA;AADK,GAAP;AAGD,CALD;;AAOA,MAAMiB,eAAe,GAAGC,KAAK,KAAK;AAChCjB,EAAAA,IAAI,EAAEiB,KAAK,CAACjB,IAAN,CAAWkB;AADe,CAAL,CAA7B;;AAIA,MAAMC,kBAAkB,GAAGC,QAAQ,KAAK;AACtCnB,EAAAA,OAAO,EAAEoB,IAAI,IAAID,QAAQ,CAACzB,iBAAiB,CAAC0B,IAAD,CAAlB;AADa,CAAL,CAAnC;;AAIA,eAAe5B,OAAO,CAACuB,eAAD,EAAkBG,kBAAlB,CAAP,CAA6CvB,KAA7C,CAAf","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button } from \"antd\";\n\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser } from \"../redux/user/user-actions\";\n\nconst Index = props => {\n  const router = useRouter();\n  useEffect(() => {\n    const { token, user, addUser } = props;\n    if (token) {\n      const decoded = decodeToken(props.token);\n      const { _id } = decoded;\n      const userData = {\n        id: _id\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(user);\n    } else {\n      router.push(\"/signin\");\n    }\n  }, []);\n\n  return (\n    <div id=\"wrapper\">\n      <p>Hello Next.js</p>\n      <Button type=\"danger\">Primary</Button>\n      <p>Secret: {process.env.JWT_SECRET}</p>\n\n      <style jsx>{`\n        #wrapper {\n          margin: 10px;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nIndex.getInitialProps = async function(context) {\n  const token = context.query.at;\n  return {\n    token\n  };\n};\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addUser: item => dispatch(addingCurrentUser(item))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);\n"]},"metadata":{},"sourceType":"module"}