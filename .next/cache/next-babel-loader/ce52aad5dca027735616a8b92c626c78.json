{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/slider/style\";\nimport _Slider from \"antd/lib/slider\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nvar _jsxFileName = \"/home/ben/code/million/getch-frontend-2.0/pages/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Router from \"next/router\";\nimport { connect } from \"react-redux\";\nimport { ExportToCsv } from \"export-to-csv\";\nimport { toast } from \"react-toastify\";\nimport Loader from \"react-loader-spinner\";\nimport DashboardLayout from \"../components/dashboardLayout\";\nimport InterestTable from \"../components/table\";\nimport { tableColumns } from \"../utils/table\";\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser } from \"../redux/user/user-actions\";\nimport { searchStart } from \"../redux/search/search-actions\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nconst Index = props => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    selectedInterest: [],\n    min: null,\n    max: null\n  });\n  const {\n    token,\n    user,\n    addUser,\n    fbToken,\n    interestData,\n    searchInterest,\n    keyword,\n    interestCount,\n    searching,\n    searchCount\n  } = props;\n  const {\n    Search\n  } = _Input;\n  const router = useRouter();\n  useEffect(() => {\n    if (token) {\n      const decoded = decodeToken(token);\n      const {\n        _id,\n        name,\n        email,\n        domain\n      } = decoded;\n      const userData = {\n        id: _id,\n        name,\n        email,\n        domain,\n        xToken: token\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(\"user available\");\n    } else {\n      router.push(\"/signup\");\n    }\n  }, []);\n  useEffect(() => {\n    if (interestData && interestCount) {\n      const formattedInterest = interestData.map(item => {\n        return _objectSpread(_objectSpread({}, item), {}, {\n          audience_size: item.audience_size ? item.audience_size : item.audience_size_upper_bound\n        });\n      });\n      const max = Math.max.apply(Math, formattedInterest.map(item => item[\"audience_size\"]));\n      const min = Math.min.apply(Math, formattedInterest.map(item => item[\"audience_size\"]));\n      console.log('-----', min);\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        max: max,\n        min: min,\n        interests: interestData,\n        interestNumber: interestCount\n      }));\n    }\n  }, [interestData, interestCount]);\n\n  const getInterest = async value => {\n    if (searchCount >= 3 && user.plan === \"PL001\") {\n      Router.push(\"/plans\");\n      return;\n    }\n\n    await searchInterest(fbToken.token, value, 500, user.xToken);\n  };\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    console.log(\"rows\", selectedRows);\n    const selectedInterest = selectedRows.map(interest => {\n      return interest.name;\n    });\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      selectedRowKeys,\n      selectedInterest,\n      selectedRows\n    }));\n  };\n\n  const onCopy = () => {\n    const {\n      selectedInterest\n    } = state;\n    console.log(\"copy\", selectedInterest);\n\n    if (selectedInterest.length) {\n      navigator.clipboard.writeText(selectedInterest).then(() => {\n        console.log(\"you copied\", selectedInterest.length);\n        toast.success(`You copied ${selectedInterest.length} items`, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      });\n    } else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  const options = {\n    fieldSeparator: \",\",\n    quoteStrings: '\"',\n    decimalSeparator: \".\",\n    showLabels: true,\n    showTitle: true,\n    title: \"Interest List\",\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true\n  };\n  const csvExporter = new ExportToCsv(options);\n\n  const handleExport = async () => {\n    // const {selectedRows} = state\n    if (interestData) {\n      let exportArray = [];\n      interestData.forEach(item => {\n        let readyExport = {};\n        readyExport.id = item.id;\n        readyExport.name = item.name;\n        readyExport.audience = item.audience_size;\n        readyExport.description = item.description;\n        readyExport.topic = item.topic;\n        readyExport.path = JSON.stringify(item.path);\n        readyExport.score = item.relevance;\n        exportArray.push(readyExport);\n      });\n      await csvExporter.generateCsv(exportArray);\n      toast.success(`You downloaded ${interestData.length} items`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    } else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  const onFilterChange = value => {\n    const filtered = interestData.filter(item => item[\"audience_size_upper_bound\"] >= value[0] && item[\"audience_size_upper_bound\"] <= value[1]);\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      interests: filtered\n    }));\n  };\n\n  const {\n    interests,\n    selectedRowKeys,\n    interestNumber,\n    max,\n    min\n  } = state;\n  console.log(max, min, interestData);\n  return __jsx(\"div\", {\n    id: \"wrapper\",\n    className: \"jsx-2607887817\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    id: \"main-content\",\n    className: \"jsx-2607887817\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2607887817\" + \" \" + \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2607887817\" + \" \" + \"inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, __jsx(Search, {\n    placeholder: \"Find Facebook interest for a keyword\",\n    enterButton: \"Getch\",\n    size: \"large\",\n    onSearch: value => getInterest(value),\n    className: \"jsx-2607887817\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-2607887817\" + \" \" + \"controls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2607887817\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, interestNumber ? __jsx(\"p\", {\n    className: \"jsx-2607887817\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 19\n    }\n  }, __jsx(\"b\", {\n    className: \"jsx-2607887817\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 21\n    }\n  }, interestNumber), \" interest found for \\\"\", keyword, \"\\\"\") : \"\"), __jsx(\"div\", {\n    className: \"jsx-2607887817\" + \" \" + \"filter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 15\n    }\n  }, __jsx(\"p\", {\n    className: \"jsx-2607887817\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  }, \"Filter audience\"), __jsx(_Slider, {\n    max: max,\n    min: min,\n    range: true,\n    defaultValue: [min, max],\n    onAfterChange: onFilterChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"jsx-2607887817\" + \" \" + \"actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2607887817\" + \" \" + \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, __jsx(_Button, {\n    onClick: onCopy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 19\n    }\n  }, \"Copy\")), __jsx(\"div\", {\n    className: \"jsx-2607887817\" + \" \" + \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }\n  }, __jsx(_Button, {\n    onClick: handleExport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 19\n    }\n  }, \"Download as CSV\")))))), __jsx(\"div\", {\n    id: \"table\",\n    className: \"jsx-2607887817\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  }, searching ? __jsx(\"div\", {\n    className: \"jsx-2607887817\" + \" \" + \"loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }, __jsx(Loader, {\n    type: \"Bars\",\n    color: \"#4e54c8\",\n    height: 100,\n    width: 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 15\n    }\n  })) : __jsx(InterestTable, {\n    onSelection: onSelectionChange,\n    selectedRowKeys: selectedRowKeys,\n    className: \"table\",\n    columns: tableColumns,\n    dataSource: interests,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }))), __jsx(_JSXStyle, {\n    id: \"2607887817\",\n    __self: this\n  }, \"#wrapper.jsx-2607887817{margin:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}#main-content.jsx-2607887817{margin-top:30px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}#table.jsx-2607887817{margin-top:90px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.controls.jsx-2607887817{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.actions.jsx-2607887817{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.actions.jsx-2607887817>*.jsx-2607887817{margin-left:5px;}.loader.jsx-2607887817{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:500px;}.divider.jsx-2607887817{height:35px;width:0;border-left:1px solid #ccc;margin:0 0 0 5px;}.filter.jsx-2607887817{width:30%;}.top.jsx-2607887817{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;height:130px;margin-bottom:20px;width:100%;background-color:white;}.inner.jsx-2607887817{position:fixed;top:60px;width:81%;background-color:white;z-index:100;height:200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.header.jsx-2607887817{margin-bottom:20px;}.links{margin-right:15px;}.links img{width:20px;}@media screen and (max-width:480px){.wrapper.jsx-2607887817{width:100%;}.top.jsx-2607887817{margin-top:50px;}.inner.jsx-2607887817{right:0;width:100%;padding:20px;}.inner.jsx-2607887817 .controls.jsx-2607887817{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Jlbi9jb2RlL21pbGxpb24vZ2V0Y2gtZnJvbnRlbmQtMi4wL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXFRa0IsQUFHdUIsQUFNSSxBQUlBLEFBS0gsQUFNQSxBQUlHLEFBR0gsQUFNRCxBQU9GLEFBSUcsQUFXRSxBQVlJLEFBSUQsQUFJUCxBQUtFLEFBSUssQUFJUixBQU1jLFFBTFgsRUFoRGYsQ0FtQ0EsQUFLRSxDQWpGYSxBQWtDTCxHQXNCQyxDQWxERyxBQUlBLEFBZWQsQUE0REUsRUFiRixDQUpBLEFBc0JpQixDQXZEWSxJQXNCakIsUUFrQ1YsRUFqQ3VCLGFBdEJOLFVBdUJMLE9BdEJkLEtBdUJlLEtBN0NHLEFBTWxCLEFBT3lCLEFBaUJBLElBa0R2QixJQWxDYSxJQTVEUyxDQU14QixBQUlBLEdBS2dDLGtFQThDUCxRQTVEWCxTQTJCTyxBQWlCQSxHQTNDckIsNkJBY0Esa0RBOEN3QixXQWpDVCxBQWlCSyxhQWhCcEIsS0FpQmUsYUFDTSxtQkFDUixXQUNZLE1BYXpCLGlCQVpBIiwiZmlsZSI6Ii9ob21lL2Jlbi9jb2RlL21pbGxpb24vZ2V0Y2gtZnJvbnRlbmQtMi4wL3BhZ2VzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgUm91dGVyIGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuaW1wb3J0IHsgQnV0dG9uLCBJbnB1dCwgU2xpZGVyIH0gZnJvbSBcImFudGRcIjtcbmltcG9ydCB7IEV4cG9ydFRvQ3N2IH0gZnJvbSBcImV4cG9ydC10by1jc3ZcIjtcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSBcInJlYWN0LXRvYXN0aWZ5XCI7XG5pbXBvcnQgTG9hZGVyIGZyb20gXCJyZWFjdC1sb2FkZXItc3Bpbm5lclwiO1xuXG5pbXBvcnQgRGFzaGJvYXJkTGF5b3V0IGZyb20gXCIuLi9jb21wb25lbnRzL2Rhc2hib2FyZExheW91dFwiO1xuaW1wb3J0IEludGVyZXN0VGFibGUgZnJvbSBcIi4uL2NvbXBvbmVudHMvdGFibGVcIjtcblxuaW1wb3J0IHsgdGFibGVDb2x1bW5zIH0gZnJvbSBcIi4uL3V0aWxzL3RhYmxlXCI7XG5cbmltcG9ydCBkZWNvZGVUb2tlbiBmcm9tIFwiLi4vdXRpbHMvYXV0aFwiO1xuaW1wb3J0IHsgYWRkaW5nQ3VycmVudFVzZXIgfSBmcm9tIFwiLi4vcmVkdXgvdXNlci91c2VyLWFjdGlvbnNcIjtcbmltcG9ydCB7IHNlYXJjaFN0YXJ0IH0gZnJvbSBcIi4uL3JlZHV4L3NlYXJjaC9zZWFyY2gtYWN0aW9uc1wiO1xuXG5pbXBvcnQgXCJyZWFjdC1sb2FkZXItc3Bpbm5lci9kaXN0L2xvYWRlci9jc3MvcmVhY3Qtc3Bpbm5lci1sb2FkZXIuY3NzXCI7XG5cbmNvbnN0IEluZGV4ID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIHNlbGVjdGVkSW50ZXJlc3Q6IFtdLFxuICAgIG1pbjogbnVsbCxcbiAgICBtYXg6IG51bGwsXG4gIH0pO1xuICBjb25zdCB7XG4gICAgdG9rZW4sXG4gICAgdXNlcixcbiAgICBhZGRVc2VyLFxuICAgIGZiVG9rZW4sXG4gICAgaW50ZXJlc3REYXRhLFxuICAgIHNlYXJjaEludGVyZXN0LFxuICAgIGtleXdvcmQsXG4gICAgaW50ZXJlc3RDb3VudCxcbiAgICBzZWFyY2hpbmcsXG4gICAgc2VhcmNoQ291bnQsXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgeyBTZWFyY2ggfSA9IElucHV0O1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0b2tlbikge1xuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZVRva2VuKHRva2VuKTtcbiAgICAgIGNvbnN0IHsgX2lkLCBuYW1lLCBlbWFpbCwgZG9tYWluIH0gPSBkZWNvZGVkO1xuICAgICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICAgIGlkOiBfaWQsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBkb21haW4sXG4gICAgICAgIHhUb2tlbjogdG9rZW4sXG4gICAgICB9O1xuICAgICAgYWRkVXNlcih1c2VyRGF0YSk7XG4gICAgfSBlbHNlIGlmICh1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInVzZXIgYXZhaWxhYmxlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3V0ZXIucHVzaChcIi9zaWdudXBcIik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaW50ZXJlc3REYXRhICYmIGludGVyZXN0Q291bnQpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZEludGVyZXN0ID0gaW50ZXJlc3REYXRhLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgYXVkaWVuY2Vfc2l6ZTogaXRlbS5hdWRpZW5jZV9zaXplID8gaXRlbS5hdWRpZW5jZV9zaXplIDogaXRlbS5hdWRpZW5jZV9zaXplX3VwcGVyX2JvdW5kXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4LmFwcGx5KFxuICAgICAgICBNYXRoLFxuICAgICAgICBmb3JtYXR0ZWRJbnRlcmVzdC5tYXAoKGl0ZW0pID0+IGl0ZW1bXCJhdWRpZW5jZV9zaXplXCJdKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IG1pbiA9IE1hdGgubWluLmFwcGx5KFxuICAgICAgICBNYXRoLFxuICAgICAgICBmb3JtYXR0ZWRJbnRlcmVzdC5tYXAoKGl0ZW0pID0+IGl0ZW1bXCJhdWRpZW5jZV9zaXplXCJdKVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKCctLS0tLScsIG1pbilcblxuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgbWF4OiBtYXgsXG4gICAgICAgIG1pbjogbWluLFxuICAgICAgICBpbnRlcmVzdHM6IGludGVyZXN0RGF0YSxcbiAgICAgICAgaW50ZXJlc3ROdW1iZXI6IGludGVyZXN0Q291bnQsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtpbnRlcmVzdERhdGEsIGludGVyZXN0Q291bnRdKTtcblxuICBjb25zdCBnZXRJbnRlcmVzdCA9IGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgIGlmIChzZWFyY2hDb3VudCA+PSAzICYmIHVzZXIucGxhbiA9PT0gXCJQTDAwMVwiKSB7XG4gICAgICBSb3V0ZXIucHVzaChcIi9wbGFuc1wiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgc2VhcmNoSW50ZXJlc3QoZmJUb2tlbi50b2tlbiwgdmFsdWUsIDUwMCwgdXNlci54VG9rZW4pO1xuICB9O1xuXG4gIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gKHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJyb3dzXCIsIHNlbGVjdGVkUm93cyk7XG4gICAgY29uc3Qgc2VsZWN0ZWRJbnRlcmVzdCA9IHNlbGVjdGVkUm93cy5tYXAoKGludGVyZXN0KSA9PiB7XG4gICAgICByZXR1cm4gaW50ZXJlc3QubmFtZTtcbiAgICB9KTtcbiAgICBzZXRTdGF0ZSh7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIHNlbGVjdGVkUm93S2V5cyxcbiAgICAgIHNlbGVjdGVkSW50ZXJlc3QsXG4gICAgICBzZWxlY3RlZFJvd3MsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgb25Db3B5ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgc2VsZWN0ZWRJbnRlcmVzdCB9ID0gc3RhdGU7XG4gICAgY29uc29sZS5sb2coXCJjb3B5XCIsIHNlbGVjdGVkSW50ZXJlc3QpO1xuICAgIGlmIChzZWxlY3RlZEludGVyZXN0Lmxlbmd0aCkge1xuICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc2VsZWN0ZWRJbnRlcmVzdCkudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwieW91IGNvcGllZFwiLCBzZWxlY3RlZEludGVyZXN0Lmxlbmd0aCk7XG5cbiAgICAgICAgdG9hc3Quc3VjY2VzcyhgWW91IGNvcGllZCAke3NlbGVjdGVkSW50ZXJlc3QubGVuZ3RofSBpdGVtc2AsIHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgICAgaGlkZVByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9hc3QuZXJyb3IoYFlvdSBoYXZlIG5vdCBtYWRlIGFueSBzZWxlY3Rpb25gLCB7XG4gICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxuICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBmaWVsZFNlcGFyYXRvcjogXCIsXCIsXG4gICAgcXVvdGVTdHJpbmdzOiAnXCInLFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6IFwiLlwiLFxuICAgIHNob3dMYWJlbHM6IHRydWUsXG4gICAgc2hvd1RpdGxlOiB0cnVlLFxuICAgIHRpdGxlOiBcIkludGVyZXN0IExpc3RcIixcbiAgICB1c2VUZXh0RmlsZTogZmFsc2UsXG4gICAgdXNlQm9tOiB0cnVlLFxuICAgIHVzZUtleXNBc0hlYWRlcnM6IHRydWUsXG4gIH07XG4gIGNvbnN0IGNzdkV4cG9ydGVyID0gbmV3IEV4cG9ydFRvQ3N2KG9wdGlvbnMpO1xuXG4gIGNvbnN0IGhhbmRsZUV4cG9ydCA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBjb25zdCB7c2VsZWN0ZWRSb3dzfSA9IHN0YXRlXG4gICAgaWYgKGludGVyZXN0RGF0YSkge1xuICAgICAgbGV0IGV4cG9ydEFycmF5ID0gW107XG4gICAgICBpbnRlcmVzdERhdGEuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBsZXQgcmVhZHlFeHBvcnQgPSB7fTtcbiAgICAgICAgcmVhZHlFeHBvcnQuaWQgPSBpdGVtLmlkO1xuICAgICAgICByZWFkeUV4cG9ydC5uYW1lID0gaXRlbS5uYW1lO1xuICAgICAgICByZWFkeUV4cG9ydC5hdWRpZW5jZSA9IGl0ZW0uYXVkaWVuY2Vfc2l6ZTtcbiAgICAgICAgcmVhZHlFeHBvcnQuZGVzY3JpcHRpb24gPSBpdGVtLmRlc2NyaXB0aW9uO1xuICAgICAgICByZWFkeUV4cG9ydC50b3BpYyA9IGl0ZW0udG9waWM7XG4gICAgICAgIHJlYWR5RXhwb3J0LnBhdGggPSBKU09OLnN0cmluZ2lmeShpdGVtLnBhdGgpO1xuICAgICAgICByZWFkeUV4cG9ydC5zY29yZSA9IGl0ZW0ucmVsZXZhbmNlO1xuICAgICAgICBleHBvcnRBcnJheS5wdXNoKHJlYWR5RXhwb3J0KTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBjc3ZFeHBvcnRlci5nZW5lcmF0ZUNzdihleHBvcnRBcnJheSk7XG4gICAgICB0b2FzdC5zdWNjZXNzKGBZb3UgZG93bmxvYWRlZCAke2ludGVyZXN0RGF0YS5sZW5ndGh9IGl0ZW1zYCwge1xuICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgYXV0b0Nsb3NlOiA1MDAwLFxuICAgICAgICBoaWRlUHJvZ3Jlc3NCYXI6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvYXN0LmVycm9yKGBZb3UgaGF2ZSBub3QgbWFkZSBhbnkgc2VsZWN0aW9uYCwge1xuICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgYXV0b0Nsb3NlOiAzMDAwLFxuICAgICAgICBoaWRlUHJvZ3Jlc3NCYXI6IGZhbHNlLFxuICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uRmlsdGVyQ2hhbmdlID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgZmlsdGVyZWQgPSBpbnRlcmVzdERhdGEuZmlsdGVyKFxuICAgICAgKGl0ZW0pID0+XG4gICAgICAgIGl0ZW1bXCJhdWRpZW5jZV9zaXplX3VwcGVyX2JvdW5kXCJdID49IHZhbHVlWzBdICYmIGl0ZW1bXCJhdWRpZW5jZV9zaXplX3VwcGVyX2JvdW5kXCJdIDw9IHZhbHVlWzFdXG4gICAgKTtcbiAgICBzZXRTdGF0ZSh7XG4gICAgICAuLi5zdGF0ZSxcbiAgICAgIGludGVyZXN0czogZmlsdGVyZWQsXG4gICAgfSk7XG4gIH07XG4gIFxuICBjb25zdCB7IGludGVyZXN0cywgc2VsZWN0ZWRSb3dLZXlzLCBpbnRlcmVzdE51bWJlciwgbWF4LCBtaW4gfSA9IHN0YXRlO1xuICBjb25zb2xlLmxvZyhtYXgsIG1pbiwgaW50ZXJlc3REYXRhKVxuICByZXR1cm4gKFxuICAgIDxkaXYgaWQ9XCJ3cmFwcGVyXCI+XG4gICAgICA8ZGl2IGlkPVwibWFpbi1jb250ZW50XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9wXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbm5lclwiPlxuICAgICAgICAgICAgPFNlYXJjaFxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkZpbmQgRmFjZWJvb2sgaW50ZXJlc3QgZm9yIGEga2V5d29yZFwiXG4gICAgICAgICAgICAgIGVudGVyQnV0dG9uPVwiR2V0Y2hcIlxuICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICBvblNlYXJjaD17KHZhbHVlKSA9PiBnZXRJbnRlcmVzdCh2YWx1ZSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sc1wiPlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIHtpbnRlcmVzdE51bWJlciA/IChcbiAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8Yj57aW50ZXJlc3ROdW1iZXJ9PC9iPiBpbnRlcmVzdCBmb3VuZCBmb3IgXCJ7a2V5d29yZH1cIlxuICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsdGVyXCI+XG4gICAgICAgICAgICAgICAgPHA+RmlsdGVyIGF1ZGllbmNlPC9wPlxuICAgICAgICAgICAgICAgIDxTbGlkZXJcbiAgICAgICAgICAgICAgICAgIG1heD17bWF4fVxuICAgICAgICAgICAgICAgICAgbWluPXttaW59XG4gICAgICAgICAgICAgICAgICByYW5nZVxuICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtbbWluLCBtYXhdfVxuICAgICAgICAgICAgICAgICAgb25BZnRlckNoYW5nZT17b25GaWx0ZXJDaGFuZ2V9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e29uQ29weX0+Q29weTwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUV4cG9ydH0+RG93bmxvYWQgYXMgQ1NWPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgaWQ9XCJ0YWJsZVwiPlxuICAgICAgICAgIHtzZWFyY2hpbmcgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRlclwiPlxuICAgICAgICAgICAgICA8TG9hZGVyIHR5cGU9XCJCYXJzXCIgY29sb3I9XCIjNGU1NGM4XCIgaGVpZ2h0PXsxMDB9IHdpZHRoPXsxMDB9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPEludGVyZXN0VGFibGVcbiAgICAgICAgICAgICAgb25TZWxlY3Rpb249e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAgICAgICBzZWxlY3RlZFJvd0tleXM9e3NlbGVjdGVkUm93S2V5c31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGVcIlxuICAgICAgICAgICAgICBjb2x1bW5zPXt0YWJsZUNvbHVtbnN9XG4gICAgICAgICAgICAgIGRhdGFTb3VyY2U9e2ludGVyZXN0c31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAjd3JhcHBlciB7XG4gICAgICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgI21haW4tY29udGVudCB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcbiAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgIH1cbiAgICAgICAgI3RhYmxlIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA5MHB4O1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb250cm9scyB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hY3Rpb25zIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmFjdGlvbnMgPiAqIHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC5sb2FkZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBoZWlnaHQ6IDUwMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5kaXZpZGVyIHtcbiAgICAgICAgICBoZWlnaHQ6IDM1cHg7XG4gICAgICAgICAgd2lkdGg6IDA7XG4gICAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgIG1hcmdpbjogMCAwIDAgNXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmZpbHRlciB7XG4gICAgICAgICAgd2lkdGg6IDMwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC50b3Age1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgaGVpZ2h0OiAxMzBweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLmlubmVyIHtcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgdG9wOiA2MHB4O1xuICAgICAgICAgIHdpZHRoOiA4MSU7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgei1pbmRleDogMTAwO1xuICAgICAgICAgIGhlaWdodDogMjAwcHg7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG5cbiAgICAgICAgLmhlYWRlciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIDpnbG9iYWwoLmxpbmtzKSB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgOmdsb2JhbCgubGlua3MgaW1nKSB7XG4gICAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgIH1cblxuICAgICAgICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0ODBweCkge1xuICAgICAgICAgIC53cmFwcGVyIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC50b3Age1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogNTBweDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuaW5uZXIge1xuICAgICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmlubmVyIC5jb250cm9scyB7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuSW5kZXguZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgY29uc3QgdG9rZW4gPSBjb250ZXh0LnF1ZXJ5LmF0O1xuICByZXR1cm4ge1xuICAgIHRva2VuLFxuICB9O1xufTtcblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiAoe1xuICB1c2VyOiBzdGF0ZS51c2VyLmN1cnJlbnRVc2VyLFxuICBzZWFyY2hpbmc6IHN0YXRlLnNlYXJjaC5sb2FkaW5nLFxuICBzZWFyY2hDb3VudDogc3RhdGUuc2VhcmNoLnNlYXJjaENvdW50LFxuICBmYlRva2VuOiBzdGF0ZS51c2VyLmZiVG9rZW4sXG4gIGludGVyZXN0RGF0YTogc3RhdGUuc2VhcmNoLmludGVyZXN0cyxcbiAgaW50ZXJlc3RDb3VudDogc3RhdGUuc2VhcmNoLmludGVyZXN0Q291bnQsXG4gIGtleXdvcmQ6IHN0YXRlLnNlYXJjaC5rZXl3b3JkLFxufSk7XG5cbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IChkaXNwYXRjaCkgPT4gKHtcbiAgYWRkVXNlcjogKGl0ZW0pID0+IGRpc3BhdGNoKGFkZGluZ0N1cnJlbnRVc2VyKGl0ZW0pKSxcbiAgc2VhcmNoSW50ZXJlc3Q6ICh0b2tlbiwgdmFsdWUsIGxpbWl0LCB4VG9rZW4pID0+XG4gICAgZGlzcGF0Y2goc2VhcmNoU3RhcnQoeyB0b2tlbiwgdmFsdWUsIGxpbWl0LCB4VG9rZW4gfSkpLFxufSk7XG5cbkluZGV4LkxheW91dCA9IERhc2hib2FyZExheW91dDtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoSW5kZXgpO1xuIl19 */\\n/*@ sourceURL=/home/ben/code/million/getch-frontend-2.0/pages/index.js */\"));\n};\n\nIndex.getInitialProps = async function (context) {\n  const token = context.query.at;\n  return {\n    token\n  };\n};\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser,\n  searching: state.search.loading,\n  searchCount: state.search.searchCount,\n  fbToken: state.user.fbToken,\n  interestData: state.search.interests,\n  interestCount: state.search.interestCount,\n  keyword: state.search.keyword\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addUser: item => dispatch(addingCurrentUser(item)),\n  searchInterest: (token, value, limit, xToken) => dispatch(searchStart({\n    token,\n    value,\n    limit,\n    xToken\n  }))\n});\n\nIndex.Layout = DashboardLayout;\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":{"version":3,"sources":["/home/ben/code/million/getch-frontend-2.0/pages/index.js"],"names":["useRouter","useEffect","useState","Router","connect","ExportToCsv","toast","Loader","DashboardLayout","InterestTable","tableColumns","decodeToken","addingCurrentUser","searchStart","Index","props","state","setState","selectedInterest","min","max","token","user","addUser","fbToken","interestData","searchInterest","keyword","interestCount","searching","searchCount","Search","router","decoded","_id","name","email","domain","userData","id","xToken","console","log","push","formattedInterest","map","item","audience_size","audience_size_upper_bound","Math","apply","interests","interestNumber","getInterest","value","plan","onSelectionChange","selectedRowKeys","selectedRows","interest","onCopy","length","navigator","clipboard","writeText","then","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","error","options","fieldSeparator","quoteStrings","decimalSeparator","showLabels","showTitle","title","useTextFile","useBom","useKeysAsHeaders","csvExporter","handleExport","exportArray","forEach","readyExport","audience","description","topic","path","JSON","stringify","score","relevance","generateCsv","onFilterChange","filtered","filter","getInitialProps","context","query","at","mapStateToProps","currentUser","search","loading","mapDispatchToProps","dispatch","limit","Layout"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport Router from \"next/router\";\nimport { connect } from \"react-redux\";\nimport { Button, Input, Slider } from \"antd\";\nimport { ExportToCsv } from \"export-to-csv\";\nimport { toast } from \"react-toastify\";\nimport Loader from \"react-loader-spinner\";\n\nimport DashboardLayout from \"../components/dashboardLayout\";\nimport InterestTable from \"../components/table\";\n\nimport { tableColumns } from \"../utils/table\";\n\nimport decodeToken from \"../utils/auth\";\nimport { addingCurrentUser } from \"../redux/user/user-actions\";\nimport { searchStart } from \"../redux/search/search-actions\";\n\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nconst Index = (props) => {\n  const [state, setState] = useState({\n    selectedInterest: [],\n    min: null,\n    max: null,\n  });\n  const {\n    token,\n    user,\n    addUser,\n    fbToken,\n    interestData,\n    searchInterest,\n    keyword,\n    interestCount,\n    searching,\n    searchCount,\n  } = props;\n  const { Search } = Input;\n  const router = useRouter();\n\n  useEffect(() => {\n    if (token) {\n      const decoded = decodeToken(token);\n      const { _id, name, email, domain } = decoded;\n      const userData = {\n        id: _id,\n        name,\n        email,\n        domain,\n        xToken: token,\n      };\n      addUser(userData);\n    } else if (user) {\n      console.log(\"user available\");\n    } else {\n      router.push(\"/signup\");\n    }\n  }, []);\n\n  useEffect(() => {\n    if (interestData && interestCount) {\n      const formattedInterest = interestData.map((item) => {\n        return {\n          ...item,\n          audience_size: item.audience_size ? item.audience_size : item.audience_size_upper_bound\n        }\n      })\n\n      const max = Math.max.apply(\n        Math,\n        formattedInterest.map((item) => item[\"audience_size\"])\n      );\n      const min = Math.min.apply(\n        Math,\n        formattedInterest.map((item) => item[\"audience_size\"])\n      );\n      console.log('-----', min)\n\n      setState({\n        ...state,\n        max: max,\n        min: min,\n        interests: interestData,\n        interestNumber: interestCount,\n      });\n    }\n  }, [interestData, interestCount]);\n\n  const getInterest = async (value) => {\n    if (searchCount >= 3 && user.plan === \"PL001\") {\n      Router.push(\"/plans\");\n      return;\n    }\n    await searchInterest(fbToken.token, value, 500, user.xToken);\n  };\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    console.log(\"rows\", selectedRows);\n    const selectedInterest = selectedRows.map((interest) => {\n      return interest.name;\n    });\n    setState({\n      ...state,\n      selectedRowKeys,\n      selectedInterest,\n      selectedRows,\n    });\n  };\n\n  const onCopy = () => {\n    const { selectedInterest } = state;\n    console.log(\"copy\", selectedInterest);\n    if (selectedInterest.length) {\n      navigator.clipboard.writeText(selectedInterest).then(() => {\n        console.log(\"you copied\", selectedInterest.length);\n\n        toast.success(`You copied ${selectedInterest.length} items`, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n        });\n      });\n    } else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n    }\n  };\n\n  const options = {\n    fieldSeparator: \",\",\n    quoteStrings: '\"',\n    decimalSeparator: \".\",\n    showLabels: true,\n    showTitle: true,\n    title: \"Interest List\",\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true,\n  };\n  const csvExporter = new ExportToCsv(options);\n\n  const handleExport = async () => {\n    // const {selectedRows} = state\n    if (interestData) {\n      let exportArray = [];\n      interestData.forEach((item) => {\n        let readyExport = {};\n        readyExport.id = item.id;\n        readyExport.name = item.name;\n        readyExport.audience = item.audience_size;\n        readyExport.description = item.description;\n        readyExport.topic = item.topic;\n        readyExport.path = JSON.stringify(item.path);\n        readyExport.score = item.relevance;\n        exportArray.push(readyExport);\n      });\n\n      await csvExporter.generateCsv(exportArray);\n      toast.success(`You downloaded ${interestData.length} items`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n    } else {\n      toast.error(`You have not made any selection`, {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n    }\n  };\n\n  const onFilterChange = (value) => {\n    const filtered = interestData.filter(\n      (item) =>\n        item[\"audience_size_upper_bound\"] >= value[0] && item[\"audience_size_upper_bound\"] <= value[1]\n    );\n    setState({\n      ...state,\n      interests: filtered,\n    });\n  };\n  \n  const { interests, selectedRowKeys, interestNumber, max, min } = state;\n  console.log(max, min, interestData)\n  return (\n    <div id=\"wrapper\">\n      <div id=\"main-content\">\n        <div className=\"top\">\n          <div className=\"inner\">\n            <Search\n              placeholder=\"Find Facebook interest for a keyword\"\n              enterButton=\"Getch\"\n              size=\"large\"\n              onSearch={(value) => getInterest(value)}\n            />\n            <div className=\"controls\">\n              <div>\n                {interestNumber ? (\n                  <p>\n                    <b>{interestNumber}</b> interest found for \"{keyword}\"\n                  </p>\n                ) : (\n                  \"\"\n                )}\n              </div>\n              <div className=\"filter\">\n                <p>Filter audience</p>\n                <Slider\n                  max={max}\n                  min={min}\n                  range\n                  defaultValue={[min, max]}\n                  onAfterChange={onFilterChange}\n                />\n              </div>\n              <div className=\"actions\">\n                <div className=\"button\">\n                  <Button onClick={onCopy}>Copy</Button>\n                </div>\n                <div className=\"button\">\n                  <Button onClick={handleExport}>Download as CSV</Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div id=\"table\">\n          {searching ? (\n            <div className=\"loader\">\n              <Loader type=\"Bars\" color=\"#4e54c8\" height={100} width={100} />\n            </div>\n          ) : (\n            <InterestTable\n              onSelection={onSelectionChange}\n              selectedRowKeys={selectedRowKeys}\n              className=\"table\"\n              columns={tableColumns}\n              dataSource={interests}\n            />\n          )}\n        </div>\n      </div>\n\n      <style jsx>{`\n        #wrapper {\n          margin: 10px;\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n        }\n        #main-content {\n          margin-top: 30px;\n          flex-grow: 1;\n        }\n        #table {\n          margin-top: 90px;\n          flex-grow: 1;\n        }\n\n        .controls {\n          display: flex;\n          margin-top: 10px;\n          justify-content: space-between;\n        }\n\n        .actions {\n          display: flex;\n        }\n\n        .actions > * {\n          margin-left: 5px;\n        }\n        .loader {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          height: 500px;\n        }\n        .divider {\n          height: 35px;\n          width: 0;\n          border-left: 1px solid #ccc;\n          margin: 0 0 0 5px;\n        }\n\n        .filter {\n          width: 30%;\n        }\n\n        .top {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          position: relative;\n          height: 130px;\n          margin-bottom: 20px;\n          width: 100%;\n          background-color: white;\n        }\n\n        .inner {\n          position: fixed;\n          top: 60px;\n          width: 81%;\n          background-color: white;\n          z-index: 100;\n          height: 200px;\n          display: flex;\n          justify-content: center;\n          flex-direction: column;\n        }\n\n        .header {\n          margin-bottom: 20px;\n        }\n\n        :global(.links) {\n          margin-right: 15px;\n        }\n\n        :global(.links img) {\n          width: 20px;\n        }\n\n        @media screen and (max-width: 480px) {\n          .wrapper {\n            width: 100%;\n          }\n\n          .top {\n            margin-top: 50px;\n          }\n\n          .inner {\n            right: 0;\n            width: 100%;\n            padding: 20px;\n          }\n\n          .inner .controls {\n            flex-direction: column;\n          }\n        }\n      `}</style>\n    </div>\n  );\n};\n\nIndex.getInitialProps = async function (context) {\n  const token = context.query.at;\n  return {\n    token,\n  };\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user.currentUser,\n  searching: state.search.loading,\n  searchCount: state.search.searchCount,\n  fbToken: state.user.fbToken,\n  interestData: state.search.interests,\n  interestCount: state.search.interestCount,\n  keyword: state.search.keyword,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  addUser: (item) => dispatch(addingCurrentUser(item)),\n  searchInterest: (token, value, limit, xToken) =>\n    dispatch(searchStart({ token, value, limit, xToken })),\n});\n\nIndex.Layout = DashboardLayout;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);\n"]},"metadata":{},"sourceType":"module"}