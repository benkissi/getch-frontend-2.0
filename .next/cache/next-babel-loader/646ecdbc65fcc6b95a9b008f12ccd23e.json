{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/benkissi/projects/getch/getch-frontend-2.0/pages/performance.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { chartData } from \"../utils/table\";\nimport Table from \"../components/table\";\nimport AdAccount from \"../components/adAccount\";\nimport { performanceColumns } from \"../utils/table\";\nimport { truncate } from \"../utils/common\";\nimport { getAdAccounts, fbPaginate, getCampaigns, getAdsets, getAds, getInterestStats } from \"../api/api\";\n\nfunction Performance(props) {\n  var _useState = useState({\n    accountModalVisible: false,\n    campaignModalVisible: false,\n    selectedRowKeys: null,\n    pagingAccounts: {\n      next: \"\",\n      previous: \"\"\n    },\n    pagingCampaigns: {\n      next: \"\",\n      previous: \"\"\n    },\n    selectedAdAccount: {},\n    selectedCampaign: {},\n    selectedAdset: {},\n    selectedAd: {},\n    fetchingCampaigns: false,\n    fetchingAdsets: false\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var fbId = props.fbId,\n      user = props.user;\n  useEffect(function () {\n    if (true) {\n      console.log(\"on browser\");\n\n      var _require = require(\"@antv/g2plot\"),\n          Column = _require.Column;\n\n      var chart = new Column(document.getElementById(\"chart\"), {\n        data: chartData,\n        xField: \"name\",\n        yField: \"value\",\n        padding: \"auto\",\n        title: {\n          visible: true,\n          text: \"Interest stats\"\n        },\n        forceFit: true\n      });\n      console.log(\"el\", document.getElementById(\"chart\"));\n      chart.render();\n    }\n  }, []);\n  useEffect(function () {\n    if (state.accountModalVisible) {\n      fetchAdAccounts();\n    }\n  }, [state.accountModalVisible]);\n  useEffect(function () {\n    if (state.selectedAdAccount.id) {\n      setModalVisible(false, \"accountModalVisible\");\n      fetchCampaigns();\n    }\n  }, [state.selectedAdAccount]);\n  useEffect(function () {\n    if (state.selectedCampaign.id) {\n      fetchAdsets();\n    }\n  }, [state.selectedCampaign]);\n  useEffect(function () {\n    if (state.selectedAdset.id) {\n      fetchAds();\n    }\n  }, [state.selectedAdset]);\n  useEffect(function () {\n    if (state.selectedAd.id) {\n      fetchStats();\n    }\n  }, [state.selectedAd]);\n\n  var setModalVisible = function setModalVisible(status, modalName) {\n    setState(function (prevState) {\n      return _objectSpread({}, prevState, _defineProperty({}, modalName, status));\n    });\n  };\n\n  var setCampaignsModal = function setCampaignsModal(modalVisible) {\n    setState(function (prevState) {\n      return _objectSpread({}, prevState, {\n        campaignModalVisible: modalVisible\n      });\n    });\n  };\n\n  var fetchAdAccounts = function fetchAdAccounts() {\n    var adAccounts;\n    return _regeneratorRuntime.async(function fetchAdAccounts$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!state.accountModalVisible) {\n              _context.next = 7;\n              break;\n            }\n\n            console.log(\"fetch ad accounts\");\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(getAdAccounts(fbId, user.xToken));\n\n          case 4:\n            adAccounts = _context.sent;\n            console.log(\"AD accoutns\", adAccounts);\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                adAccounts: adAccounts,\n                pagingAccounts: {\n                  next: adAccounts.paging.next && adAccounts.paging.next,\n                  previous: adAccounts.paging.previous && adAccounts.paging.previous\n                },\n                selectedAdAccount: {},\n                selectedCampaign: {},\n                selectedAdset: {}\n              });\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var fetchCampaigns = function fetchCampaigns() {\n    var accountId, res;\n    return _regeneratorRuntime.async(function fetchCampaigns$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                fetchingCampaigns: true,\n                selectedCampaign: {}\n              });\n            });\n            accountId = state.selectedAdAccount.id;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(getCampaigns(accountId, user.xToken));\n\n          case 4:\n            res = _context2.sent;\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                campaigns: res,\n                fetchingCampaigns: false,\n                pagingCampaigns: {\n                  next: res.paging && res.paging.next,\n                  previous: res.paging && res.paging.previous\n                }\n              });\n            });\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  var fetchAdsets = function fetchAdsets() {\n    var campaignId, res;\n    return _regeneratorRuntime.async(function fetchAdsets$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                fetchingAdsets: true,\n                selectedAdset: {}\n              });\n            });\n            campaignId = state.selectedCampaign.id;\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(getAdsets(campaignId, user.xToken));\n\n          case 4:\n            res = _context3.sent;\n            console.log(\"sets\", res.data);\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                adsets: res,\n                fetchingAdsets: false\n              });\n            });\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  };\n\n  var fetchAds = function fetchAds() {\n    var adsetId, res;\n    return _regeneratorRuntime.async(function fetchAds$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                fetchingAds: true\n              });\n            });\n            adsetId = state.selectedAdset.id;\n            _context4.next = 4;\n            return _regeneratorRuntime.awrap(getAds(adsetId, user.xToken));\n\n          case 4:\n            res = _context4.sent;\n            console.log(\"ads\", res);\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                ads: res,\n                fetchingAds: false\n              });\n            });\n\n          case 7:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  };\n\n  var fetchStats = function fetchStats() {\n    var adId, res;\n    return _regeneratorRuntime.async(function fetchStats$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                fetchingStats: true\n              });\n            });\n            adId = state.selectedAd.id;\n            _context5.next = 4;\n            return _regeneratorRuntime.awrap(getInterestStats(adId, user.xToken));\n\n          case 4:\n            res = _context5.sent;\n            console.log(\"stats\", res);\n\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    });\n  };\n\n  var handleAccountPagination = function handleAccountPagination(page) {\n    var adAccounts;\n    return _regeneratorRuntime.async(function handleAccountPagination$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return _regeneratorRuntime.awrap(fbPaginate(page));\n\n          case 2:\n            adAccounts = _context6.sent;\n            console.log(\"paginate\", adAccounts);\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                adAccounts: adAccounts,\n                pagingAccounts: {\n                  next: adAccounts.paging && adAccounts.paging.next,\n                  previous: adAccounts.paging && adAccounts.paging.previous\n                }\n              });\n            });\n\n          case 5:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    });\n  };\n\n  var handleCampaignPagination = function handleCampaignPagination(page) {\n    var campaigns;\n    return _regeneratorRuntime.async(function handleCampaignPagination$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return _regeneratorRuntime.awrap(fbPaginate(page));\n\n          case 2:\n            campaigns = _context7.sent;\n            console.log(\"paginate\", campaigns);\n            setState(function (prevState) {\n              return _objectSpread({}, prevState, {\n                campaigns: campaigns,\n                pagingCampaigns: {\n                  next: campaigns.paging && campaigns.paging.next,\n                  previous: campaigns.paging && campaigns.paging.previous\n                }\n              });\n            });\n\n          case 5:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    });\n  };\n\n  var onSelectionChange = function onSelectionChange(selectedRowKeys, selectedRows) {\n    console.log(\"rows\", selectedRows);\n    var selectedInterest = selectedRows.map(function (interest) {\n      return interest.name;\n    });\n    setState(function (prevState) {\n      return _objectSpread({}, prevState, {\n        selectedRowKeys: selectedRowKeys,\n        selectedInterest: selectedInterest,\n        selectedRows: selectedRows\n      });\n    });\n  };\n\n  var handleAccountSelect = function handleAccountSelect(id, name) {\n    setState(function (prevState) {\n      return _objectSpread({}, prevState, {\n        selectedAdAccount: {\n          id: id,\n          name: name\n        }\n      });\n    });\n  };\n\n  var handleCampaignSelect = function handleCampaignSelect(id, name) {\n    setState(function (prevState) {\n      return _objectSpread({}, prevState, {\n        selectedCampaign: {\n          id: id,\n          name: name\n        },\n        campaignModalVisible: false\n      });\n    });\n  };\n\n  var handleAdsetSelect = function handleAdsetSelect(value, option) {\n    console.log(\"selected\", option.props.children);\n    setState(function (prevState) {\n      return _objectSpread({}, prevState, {\n        selectedAdset: {\n          id: option.props.value,\n          name: option.props.children\n        }\n      });\n    });\n  };\n\n  var handleAdSelect = function handleAdSelect(value, option) {\n    setState(function (prevState) {\n      return _objectSpread({}, prevState, {\n        selectedAd: {\n          id: option.props.value,\n          name: option.props.children\n        }\n      });\n    });\n  };\n\n  var Option = _Select.Option;\n  var selectedRowKeys = state.selectedRowKeys;\n  return __jsx(\"div\", {\n    id: \"performance\",\n    className: \"jsx-290073997\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273\n    },\n    __self: this\n  }, __jsx(_Row, {\n    gutter: 16,\n    style: {\n      width: \"100%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  }, __jsx(_Col, {\n    span: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"selection\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"button item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277\n    },\n    __self: this\n  }, __jsx(_Button, {\n    style: {\n      textAlign: \"left\"\n    },\n    className: \"modalButtons\",\n    onClick: function onClick() {\n      return setModalVisible(true, \"accountModalVisible\");\n    },\n    block: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278\n    },\n    __self: this\n  }, state.selectedAdAccount.name ? truncate(state.selectedAdAccount.name, 30) : \"Select Ad Account\")), __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"select item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289\n    },\n    __self: this\n  }, __jsx(_Button, {\n    style: {\n      textAlign: \"left\"\n    },\n    onClick: function onClick() {\n      return setCampaignsModal(true);\n    },\n    block: true,\n    loading: state.fetchingCampaigns,\n    disabled: !!!state.selectedAdAccount.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }, state.selectedCampaign.name ? truncate(state.selectedCampaign.name, 30) : \"Select Campaign\")), __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"select item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, __jsx(_Select, {\n    disabled: !!!state.selectedCampaign.name,\n    value: state.selectedAdset.name ? state.selectedAdset.name : \"Select Adset\",\n    style: {\n      width: \"100%\"\n    },\n    placeholder: \"Select Adset\",\n    loading: state.fetchingAdsets,\n    showSearch: true,\n    optionFilterProp: \"children\",\n    onSelect: handleAdsetSelect,\n    filterOption: function filterOption(input, option) {\n      return option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303\n    },\n    __self: this\n  }, state.adsets ? state.adsets.data.map(function (item, index) {\n    return __jsx(Option, {\n      value: item.id,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, item.name);\n  }) : \"\")), __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"select item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333\n    },\n    __self: this\n  }, __jsx(_Select, {\n    disabled: !!!state.selectedAdset.name,\n    style: {\n      width: \"100%\"\n    },\n    value: state.selectedAd.name ? state.selectedAd.name : \"Select Ad\",\n    placeholder: \"Select ad\",\n    showSearch: true,\n    optionFilterProp: \"children\",\n    onSelect: handleAdSelect,\n    filterOption: function filterOption(input, option) {\n      return option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  }, state.ads ? state.ads.data.map(function (item, index) {\n    return __jsx(Option, {\n      value: item.id,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, item.name);\n  }) : \"\")))), __jsx(_Col, {\n    span: 20,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"stats\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"chart\",\n    className: \"jsx-290073997\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-290073997\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366\n    },\n    __self: this\n  }, __jsx(Table, {\n    columns: performanceColumns,\n    onSelection: onSelectionChange,\n    selectedRowKeys: selectedRowKeys,\n    className: \"table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367\n    },\n    __self: this\n  }))))), __jsx(_Modal, {\n    title: \"Select an Ad account\",\n    centered: true,\n    visible: state.accountModalVisible,\n    onOk: function onOk() {\n      return setModalVisible(false, \"accountModalVisible\");\n    },\n    onCancel: function onCancel() {\n      return setModalVisible(false, \"accountModalVisible\");\n    },\n    okText: \"Next\",\n    cancelText: \"Previous\",\n    okButtonProps: {\n      disabled: !!!state.pagingAccounts.next,\n      onClick: function onClick() {\n        return handleAccountPagination(state.pagingAccounts.next);\n      }\n    },\n    cancelButtonProps: {\n      disabled: !!!state.pagingAccounts.previous,\n      onClick: function onClick() {\n        return handleAccountPagination(state.pagingAccounts.previous);\n      }\n    },\n    width: 1300,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"adAccounts\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396\n    },\n    __self: this\n  }, state.adAccounts ? state.adAccounts.data.map(function (item, index) {\n    return __jsx(\"div\", {\n      key: index,\n      className: \"jsx-290073997\" + \" \" + \"account\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, __jsx(AdAccount, {\n      name: item.name,\n      accountId: item.id,\n      status: item.account_status,\n      onSelect: handleAccountSelect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }));\n  }) : \"Loading...\"))), __jsx(_Modal, {\n    title: \"Select a campaign\",\n    centered: true,\n    visible: state.campaignModalVisible,\n    onOk: function onOk() {\n      return setCampaignsModal(false, \"campaignModalVisible\");\n    },\n    onCancel: function onCancel() {\n      return setCampaignsModal(false, \"campaignModalVisible\");\n    },\n    okText: \"Next\",\n    cancelText: \"Previous\",\n    okButtonProps: {\n      disabled: !!!state.pagingCampaigns.next,\n      onClick: function onClick() {\n        return handleCampaignPagination(state.pagingCampaigns.next);\n      }\n    },\n    cancelButtonProps: {\n      disabled: !!!state.pagingCampaigns.previous,\n      onClick: function onClick() {\n        return handleCampaignPagination(state.pagingCampaigns.previous);\n      }\n    },\n    width: 1300,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"adAccounts\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-290073997\" + \" \" + \"inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432\n    },\n    __self: this\n  }, state.campaigns ? state.campaigns.data.map(function (item, index) {\n    return __jsx(\"div\", {\n      key: index,\n      className: \"jsx-290073997\" + \" \" + \"account\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435\n      },\n      __self: this\n    }, __jsx(AdAccount, {\n      name: item.name,\n      accountId: item.id // status={item.account_status}\n      ,\n      onSelect: handleCampaignSelect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436\n      },\n      __self: this\n    }));\n  }) : \"Loading...\"))), __jsx(_JSXStyle, {\n    id: \"290073997\",\n    __self: this\n  }, \"#performance.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;margin-top:70px;width:100%;}.selection.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border:1px solid #ccc;border-radius:4px;height:auto;padding:10px;}.item.jsx-290073997{margin-bottom:30px;width:100%;}.stats.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.adAccounts.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.adAccounts.jsx-290073997 .inner.jsx-290073997{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:90%;}.account.jsx-290073997{min-width:20%;margin:10px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Jlbmtpc3NpL3Byb2plY3RzL2dldGNoL2dldGNoLWZyb250ZW5kLTIuMC9wYWdlcy9wZXJmb3JtYW5jZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnY1MsQUFLMEIsQUFPQSxBQVNNLEFBSU4sQUFLQSxBQUtBLEFBTUMsY0FDRixLQXBCRCxPQXFCYixJQXBCQSw0Q0FqQm9CLEFBT0ksQUFhQSxBQUtDLEFBS1Isa0JBN0JDLGdCQUNMLFdBQ2IsWUE0QlksVUFDWixXQXhCd0IsQUFheEIscUJBS0EsQ0FqQm9CLGtCQUNOLFlBQ0MsYUFDZiIsImZpbGUiOiIvaG9tZS9iZW5raXNzaS9wcm9qZWN0cy9nZXRjaC9nZXRjaC1mcm9udGVuZC0yLjAvcGFnZXMvcGVyZm9ybWFuY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5pbXBvcnQgeyBNb2RhbCwgQnV0dG9uLCBTZWxlY3QsIFJvdywgQ29sIH0gZnJvbSBcImFudGRcIjtcblxuaW1wb3J0IHsgY2hhcnREYXRhIH0gZnJvbSBcIi4uL3V0aWxzL3RhYmxlXCI7XG5cbmltcG9ydCBUYWJsZSBmcm9tIFwiLi4vY29tcG9uZW50cy90YWJsZVwiO1xuaW1wb3J0IEFkQWNjb3VudCBmcm9tIFwiLi4vY29tcG9uZW50cy9hZEFjY291bnRcIjtcbmltcG9ydCB7IHBlcmZvcm1hbmNlQ29sdW1ucyB9IGZyb20gXCIuLi91dGlscy90YWJsZVwiO1xuaW1wb3J0IHsgdHJ1bmNhdGUgfSBmcm9tIFwiLi4vdXRpbHMvY29tbW9uXCJcbmltcG9ydCB7XG4gIGdldEFkQWNjb3VudHMsXG4gIGZiUGFnaW5hdGUsXG4gIGdldENhbXBhaWducyxcbiAgZ2V0QWRzZXRzLFxuICBnZXRBZHMsXG4gIGdldEludGVyZXN0U3RhdHNcbn0gZnJvbSBcIi4uL2FwaS9hcGlcIjtcblxuZnVuY3Rpb24gUGVyZm9ybWFuY2UocHJvcHMpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgYWNjb3VudE1vZGFsVmlzaWJsZTogZmFsc2UsXG4gICAgY2FtcGFpZ25Nb2RhbFZpc2libGU6IGZhbHNlLFxuICAgIHNlbGVjdGVkUm93S2V5czogbnVsbCxcbiAgICBwYWdpbmdBY2NvdW50czoge1xuICAgICAgbmV4dDogXCJcIixcbiAgICAgIHByZXZpb3VzOiBcIlwiXG4gICAgfSxcbiAgICBwYWdpbmdDYW1wYWlnbnM6IHtcbiAgICAgIG5leHQ6IFwiXCIsXG4gICAgICBwcmV2aW91czogXCJcIlxuICAgIH0sXG4gICAgc2VsZWN0ZWRBZEFjY291bnQ6IHt9LFxuICAgIHNlbGVjdGVkQ2FtcGFpZ246IHt9LFxuICAgIHNlbGVjdGVkQWRzZXQ6IHt9LFxuICAgIHNlbGVjdGVkQWQ6IHt9LFxuICAgIGZldGNoaW5nQ2FtcGFpZ25zOiBmYWxzZSxcbiAgICBmZXRjaGluZ0Fkc2V0czogZmFsc2VcbiAgfSk7XG5cbiAgY29uc3QgeyBmYklkLCB1c2VyIH0gPSBwcm9wcztcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIm9uIGJyb3dzZXJcIik7XG4gICAgICBjb25zdCB7IENvbHVtbiB9ID0gcmVxdWlyZShcIkBhbnR2L2cycGxvdFwiKTtcblxuICAgICAgY29uc3QgY2hhcnQgPSBuZXcgQ29sdW1uKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcnRcIiksIHtcbiAgICAgICAgZGF0YTogY2hhcnREYXRhLFxuICAgICAgICB4RmllbGQ6IFwibmFtZVwiLFxuICAgICAgICB5RmllbGQ6IFwidmFsdWVcIixcbiAgICAgICAgcGFkZGluZzogXCJhdXRvXCIsXG4gICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICB0ZXh0OiBcIkludGVyZXN0IHN0YXRzXCJcbiAgICAgICAgfSxcbiAgICAgICAgZm9yY2VGaXQ6IHRydWVcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coXCJlbFwiLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXJ0XCIpKTtcbiAgICAgIGNoYXJ0LnJlbmRlcigpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN0YXRlLmFjY291bnRNb2RhbFZpc2libGUpIHtcbiAgICAgIGZldGNoQWRBY2NvdW50cygpO1xuICAgIH1cbiAgfSwgW3N0YXRlLmFjY291bnRNb2RhbFZpc2libGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzdGF0ZS5zZWxlY3RlZEFkQWNjb3VudC5pZCkge1xuICAgICAgc2V0TW9kYWxWaXNpYmxlKGZhbHNlLCBcImFjY291bnRNb2RhbFZpc2libGVcIik7XG4gICAgICBmZXRjaENhbXBhaWducygpO1xuICAgIH1cbiAgfSwgW3N0YXRlLnNlbGVjdGVkQWRBY2NvdW50XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc3RhdGUuc2VsZWN0ZWRDYW1wYWlnbi5pZCkge1xuICAgICAgZmV0Y2hBZHNldHMoKTtcbiAgICB9XG4gIH0sIFtzdGF0ZS5zZWxlY3RlZENhbXBhaWduXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc3RhdGUuc2VsZWN0ZWRBZHNldC5pZCkge1xuICAgICAgZmV0Y2hBZHMoKTtcbiAgICB9XG4gIH0sIFtzdGF0ZS5zZWxlY3RlZEFkc2V0XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc3RhdGUuc2VsZWN0ZWRBZC5pZCkge1xuICAgICAgZmV0Y2hTdGF0cygpO1xuICAgIH1cbiAgfSwgW3N0YXRlLnNlbGVjdGVkQWRdKTtcblxuICBjb25zdCBzZXRNb2RhbFZpc2libGUgPSAoc3RhdHVzLCBtb2RhbE5hbWUpID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIFttb2RhbE5hbWVdOiBzdGF0dXNcbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3Qgc2V0Q2FtcGFpZ25zTW9kYWwgPSBtb2RhbFZpc2libGUgPT4ge1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgY2FtcGFpZ25Nb2RhbFZpc2libGU6IG1vZGFsVmlzaWJsZVxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBmZXRjaEFkQWNjb3VudHMgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKHN0YXRlLmFjY291bnRNb2RhbFZpc2libGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZmV0Y2ggYWQgYWNjb3VudHNcIik7XG4gICAgICBjb25zdCBhZEFjY291bnRzID0gYXdhaXQgZ2V0QWRBY2NvdW50cyhmYklkLCB1c2VyLnhUb2tlbik7XG4gICAgICBjb25zb2xlLmxvZyhcIkFEIGFjY291dG5zXCIsIGFkQWNjb3VudHMpO1xuICAgICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgICAgYWRBY2NvdW50czogYWRBY2NvdW50cyxcbiAgICAgICAgcGFnaW5nQWNjb3VudHM6IHtcbiAgICAgICAgICBuZXh0OiBhZEFjY291bnRzLnBhZ2luZy5uZXh0ICYmIGFkQWNjb3VudHMucGFnaW5nLm5leHQsXG4gICAgICAgICAgcHJldmlvdXM6IGFkQWNjb3VudHMucGFnaW5nLnByZXZpb3VzICYmIGFkQWNjb3VudHMucGFnaW5nLnByZXZpb3VzXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdGVkQWRBY2NvdW50OiB7fSxcbiAgICAgICAgc2VsZWN0ZWRDYW1wYWlnbjoge30sXG4gICAgICAgIHNlbGVjdGVkQWRzZXQ6IHt9XG4gICAgICB9KSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGZldGNoQ2FtcGFpZ25zID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgZmV0Y2hpbmdDYW1wYWlnbnM6IHRydWUsXG4gICAgICBzZWxlY3RlZENhbXBhaWduOiB7fVxuICAgIH0pKTtcbiAgICBjb25zdCBhY2NvdW50SWQgPSBzdGF0ZS5zZWxlY3RlZEFkQWNjb3VudC5pZDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRDYW1wYWlnbnMoYWNjb3VudElkLCB1c2VyLnhUb2tlbik7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBjYW1wYWlnbnM6IHJlcyxcbiAgICAgIGZldGNoaW5nQ2FtcGFpZ25zOiBmYWxzZSxcbiAgICAgIHBhZ2luZ0NhbXBhaWduczoge1xuICAgICAgICBuZXh0OiByZXMucGFnaW5nICYmIHJlcy5wYWdpbmcubmV4dCxcbiAgICAgICAgcHJldmlvdXM6IHJlcy5wYWdpbmcgJiYgcmVzLnBhZ2luZy5wcmV2aW91c1xuICAgICAgfVxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBmZXRjaEFkc2V0cyA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIGZldGNoaW5nQWRzZXRzOiB0cnVlLFxuICAgICAgc2VsZWN0ZWRBZHNldDoge31cbiAgICB9KSk7XG4gICAgY29uc3QgY2FtcGFpZ25JZCA9IHN0YXRlLnNlbGVjdGVkQ2FtcGFpZ24uaWQ7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0QWRzZXRzKGNhbXBhaWduSWQsIHVzZXIueFRva2VuKTtcbiAgICBjb25zb2xlLmxvZyhcInNldHNcIiwgcmVzLmRhdGEpO1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgYWRzZXRzOiByZXMsXG4gICAgICBmZXRjaGluZ0Fkc2V0czogZmFsc2VcbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgZmV0Y2hBZHMgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBmZXRjaGluZ0FkczogdHJ1ZVxuICAgIH0pKTtcbiAgICBjb25zdCBhZHNldElkID0gc3RhdGUuc2VsZWN0ZWRBZHNldC5pZDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRBZHMoYWRzZXRJZCwgdXNlci54VG9rZW4pO1xuICAgIGNvbnNvbGUubG9nKFwiYWRzXCIsIHJlcyk7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBhZHM6IHJlcyxcbiAgICAgIGZldGNoaW5nQWRzOiBmYWxzZVxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBmZXRjaFN0YXRzID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgZmV0Y2hpbmdTdGF0czogdHJ1ZVxuICAgIH0pKTtcblxuICAgIGNvbnN0IGFkSWQgPSBzdGF0ZS5zZWxlY3RlZEFkLmlkO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldEludGVyZXN0U3RhdHMoYWRJZCwgdXNlci54VG9rZW4pO1xuICAgIGNvbnNvbGUubG9nKFwic3RhdHNcIiwgcmVzKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVBY2NvdW50UGFnaW5hdGlvbiA9IGFzeW5jIHBhZ2UgPT4ge1xuICAgIGNvbnN0IGFkQWNjb3VudHMgPSBhd2FpdCBmYlBhZ2luYXRlKHBhZ2UpO1xuICAgIGNvbnNvbGUubG9nKFwicGFnaW5hdGVcIiwgYWRBY2NvdW50cyk7XG4gICAgc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBhZEFjY291bnRzOiBhZEFjY291bnRzLFxuICAgICAgcGFnaW5nQWNjb3VudHM6IHtcbiAgICAgICAgbmV4dDogYWRBY2NvdW50cy5wYWdpbmcgJiYgYWRBY2NvdW50cy5wYWdpbmcubmV4dCxcbiAgICAgICAgcHJldmlvdXM6IGFkQWNjb3VudHMucGFnaW5nICYmIGFkQWNjb3VudHMucGFnaW5nLnByZXZpb3VzXG4gICAgICB9XG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNhbXBhaWduUGFnaW5hdGlvbiA9IGFzeW5jIHBhZ2UgPT4ge1xuICAgIGNvbnN0IGNhbXBhaWducyA9IGF3YWl0IGZiUGFnaW5hdGUocGFnZSk7XG4gICAgY29uc29sZS5sb2coXCJwYWdpbmF0ZVwiLCBjYW1wYWlnbnMpO1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgY2FtcGFpZ25zOiBjYW1wYWlnbnMsXG4gICAgICBwYWdpbmdDYW1wYWlnbnM6IHtcbiAgICAgICAgbmV4dDogY2FtcGFpZ25zLnBhZ2luZyAmJiBjYW1wYWlnbnMucGFnaW5nLm5leHQsXG4gICAgICAgIHByZXZpb3VzOiBjYW1wYWlnbnMucGFnaW5nICYmIGNhbXBhaWducy5wYWdpbmcucHJldmlvdXNcbiAgICAgIH1cbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSAoc2VsZWN0ZWRSb3dLZXlzLCBzZWxlY3RlZFJvd3MpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcInJvd3NcIiwgc2VsZWN0ZWRSb3dzKTtcbiAgICBjb25zdCBzZWxlY3RlZEludGVyZXN0ID0gc2VsZWN0ZWRSb3dzLm1hcChpbnRlcmVzdCA9PiB7XG4gICAgICByZXR1cm4gaW50ZXJlc3QubmFtZTtcbiAgICB9KTtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIHNlbGVjdGVkUm93S2V5cyxcbiAgICAgIHNlbGVjdGVkSW50ZXJlc3QsXG4gICAgICBzZWxlY3RlZFJvd3NcbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQWNjb3VudFNlbGVjdCA9IChpZCwgbmFtZSkgPT4ge1xuICAgIHNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgc2VsZWN0ZWRBZEFjY291bnQ6IHtcbiAgICAgICAgaWQsXG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2FtcGFpZ25TZWxlY3QgPSAoaWQsIG5hbWUpID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIHNlbGVjdGVkQ2FtcGFpZ246IHtcbiAgICAgICAgaWQsXG4gICAgICAgIG5hbWVcbiAgICAgIH0sXG4gICAgICBjYW1wYWlnbk1vZGFsVmlzaWJsZTogZmFsc2VcbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQWRzZXRTZWxlY3QgPSAodmFsdWUsIG9wdGlvbikgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwic2VsZWN0ZWRcIiwgb3B0aW9uLnByb3BzLmNoaWxkcmVuKTtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIHNlbGVjdGVkQWRzZXQ6IHtcbiAgICAgICAgaWQ6IG9wdGlvbi5wcm9wcy52YWx1ZSxcbiAgICAgICAgbmFtZTogb3B0aW9uLnByb3BzLmNoaWxkcmVuXG4gICAgICB9XG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFkU2VsZWN0ID0gKHZhbHVlLCBvcHRpb24pID0+IHtcbiAgICBzZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIHNlbGVjdGVkQWQ6IHtcbiAgICAgICAgaWQ6IG9wdGlvbi5wcm9wcy52YWx1ZSxcbiAgICAgICAgbmFtZTogb3B0aW9uLnByb3BzLmNoaWxkcmVuXG4gICAgICB9XG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IHsgT3B0aW9uIH0gPSBTZWxlY3Q7XG4gIGNvbnN0IHsgc2VsZWN0ZWRSb3dLZXlzIH0gPSBzdGF0ZTtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGlkPVwicGVyZm9ybWFuY2VcIj5cbiAgICAgIDxSb3cgZ3V0dGVyPXsxNn0gc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiIH19PlxuICAgICAgICA8Q29sIHNwYW49ezR9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VsZWN0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbiBpdGVtXCI+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBzdHlsZT17eyB0ZXh0QWxpZ246IFwibGVmdFwiIH19XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibW9kYWxCdXR0b25zXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRNb2RhbFZpc2libGUodHJ1ZSwgXCJhY2NvdW50TW9kYWxWaXNpYmxlXCIpfVxuICAgICAgICAgICAgICAgIGJsb2NrXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7c3RhdGUuc2VsZWN0ZWRBZEFjY291bnQubmFtZVxuICAgICAgICAgICAgICAgICAgPyB0cnVuY2F0ZShzdGF0ZS5zZWxlY3RlZEFkQWNjb3VudC5uYW1lLCAzMClcbiAgICAgICAgICAgICAgICAgIDogXCJTZWxlY3QgQWQgQWNjb3VudFwifVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3QgaXRlbVwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgdGV4dEFsaWduOiBcImxlZnRcIiB9fVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldENhbXBhaWduc01vZGFsKHRydWUpfVxuICAgICAgICAgICAgICAgIGJsb2NrXG4gICAgICAgICAgICAgICAgbG9hZGluZz17c3RhdGUuZmV0Y2hpbmdDYW1wYWlnbnN9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyEhIXN0YXRlLnNlbGVjdGVkQWRBY2NvdW50Lm5hbWV9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7c3RhdGUuc2VsZWN0ZWRDYW1wYWlnbi5uYW1lXG4gICAgICAgICAgICAgICAgICA/IHRydW5jYXRlKHN0YXRlLnNlbGVjdGVkQ2FtcGFpZ24ubmFtZSwgMzApXG4gICAgICAgICAgICAgICAgICA6IFwiU2VsZWN0IENhbXBhaWduXCJ9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlbGVjdCBpdGVtXCI+XG4gICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ISEhc3RhdGUuc2VsZWN0ZWRDYW1wYWlnbi5uYW1lfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtcbiAgICAgICAgICAgICAgICAgIHN0YXRlLnNlbGVjdGVkQWRzZXQubmFtZVxuICAgICAgICAgICAgICAgICAgICA/IHN0YXRlLnNlbGVjdGVkQWRzZXQubmFtZVxuICAgICAgICAgICAgICAgICAgICA6IFwiU2VsZWN0IEFkc2V0XCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiIH19XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWxlY3QgQWRzZXRcIlxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e3N0YXRlLmZldGNoaW5nQWRzZXRzfVxuICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICBvcHRpb25GaWx0ZXJQcm9wPVwiY2hpbGRyZW5cIlxuICAgICAgICAgICAgICAgIG9uU2VsZWN0PXtoYW5kbGVBZHNldFNlbGVjdH1cbiAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb249eyhpbnB1dCwgb3B0aW9uKSA9PlxuICAgICAgICAgICAgICAgICAgb3B0aW9uLnByb3BzLmNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGlucHV0LnRvTG93ZXJDYXNlKCkpID49IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7c3RhdGUuYWRzZXRzXG4gICAgICAgICAgICAgICAgICA/IHN0YXRlLmFkc2V0cy5kYXRhLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPE9wdGlvbiB2YWx1ZT17aXRlbS5pZH0ga2V5PXtpbmRleH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L09wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3QgaXRlbVwiPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyEhIXN0YXRlLnNlbGVjdGVkQWRzZXQubmFtZX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogXCIxMDAlXCIgfX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5zZWxlY3RlZEFkLm5hbWUgPyBzdGF0ZS5zZWxlY3RlZEFkLm5hbWUgOiBcIlNlbGVjdCBBZFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VsZWN0IGFkXCJcbiAgICAgICAgICAgICAgICBzaG93U2VhcmNoXG4gICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcD1cImNoaWxkcmVuXCJcbiAgICAgICAgICAgICAgICBvblNlbGVjdD17aGFuZGxlQWRTZWxlY3R9XG4gICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsoaW5wdXQsIG9wdGlvbikgPT5cbiAgICAgICAgICAgICAgICAgIG9wdGlvbi5wcm9wcy5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihpbnB1dC50b0xvd2VyQ2FzZSgpKSA+PSAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3N0YXRlLmFkc1xuICAgICAgICAgICAgICAgICAgPyBzdGF0ZS5hZHMuZGF0YS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxPcHRpb24gdmFsdWU9e2l0ZW0uaWR9IGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9PcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9Db2w+XG4gICAgICAgIDxDb2wgc3Bhbj17MjB9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RhdHNcIj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJjaGFydFwiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPFRhYmxlXG4gICAgICAgICAgICAgICAgY29sdW1ucz17cGVyZm9ybWFuY2VDb2x1bW5zfVxuICAgICAgICAgICAgICAgIG9uU2VsZWN0aW9uPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd0tleXM9e3NlbGVjdGVkUm93S2V5c31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZVwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9Db2w+XG4gICAgICA8L1Jvdz5cbiAgICAgIDxNb2RhbFxuICAgICAgICB0aXRsZT1cIlNlbGVjdCBhbiBBZCBhY2NvdW50XCJcbiAgICAgICAgY2VudGVyZWRcbiAgICAgICAgdmlzaWJsZT17c3RhdGUuYWNjb3VudE1vZGFsVmlzaWJsZX1cbiAgICAgICAgb25Paz17KCkgPT4gc2V0TW9kYWxWaXNpYmxlKGZhbHNlLCBcImFjY291bnRNb2RhbFZpc2libGVcIil9XG4gICAgICAgIG9uQ2FuY2VsPXsoKSA9PiBzZXRNb2RhbFZpc2libGUoZmFsc2UsIFwiYWNjb3VudE1vZGFsVmlzaWJsZVwiKX1cbiAgICAgICAgb2tUZXh0PVwiTmV4dFwiXG4gICAgICAgIGNhbmNlbFRleHQ9XCJQcmV2aW91c1wiXG4gICAgICAgIG9rQnV0dG9uUHJvcHM9e3tcbiAgICAgICAgICBkaXNhYmxlZDogISEhc3RhdGUucGFnaW5nQWNjb3VudHMubmV4dCxcbiAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBoYW5kbGVBY2NvdW50UGFnaW5hdGlvbihzdGF0ZS5wYWdpbmdBY2NvdW50cy5uZXh0KVxuICAgICAgICB9fVxuICAgICAgICBjYW5jZWxCdXR0b25Qcm9wcz17e1xuICAgICAgICAgIGRpc2FibGVkOiAhISFzdGF0ZS5wYWdpbmdBY2NvdW50cy5wcmV2aW91cyxcbiAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBoYW5kbGVBY2NvdW50UGFnaW5hdGlvbihzdGF0ZS5wYWdpbmdBY2NvdW50cy5wcmV2aW91cylcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezEzMDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWRBY2NvdW50c1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5uZXJcIj5cbiAgICAgICAgICAgIHtzdGF0ZS5hZEFjY291bnRzXG4gICAgICAgICAgICAgID8gc3RhdGUuYWRBY2NvdW50cy5kYXRhLm1hcCgoaXRlbSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWNjb3VudFwiIGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgICAgICA8QWRBY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT17aXRlbS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZD17aXRlbS5pZH1cbiAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM9e2l0ZW0uYWNjb3VudF9zdGF0dXN9XG4gICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9e2hhbmRsZUFjY291bnRTZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICA6IFwiTG9hZGluZy4uLlwifVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWxcbiAgICAgICAgdGl0bGU9XCJTZWxlY3QgYSBjYW1wYWlnblwiXG4gICAgICAgIGNlbnRlcmVkXG4gICAgICAgIHZpc2libGU9e3N0YXRlLmNhbXBhaWduTW9kYWxWaXNpYmxlfVxuICAgICAgICBvbk9rPXsoKSA9PiBzZXRDYW1wYWlnbnNNb2RhbChmYWxzZSwgXCJjYW1wYWlnbk1vZGFsVmlzaWJsZVwiKX1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHNldENhbXBhaWduc01vZGFsKGZhbHNlLCBcImNhbXBhaWduTW9kYWxWaXNpYmxlXCIpfVxuICAgICAgICBva1RleHQ9XCJOZXh0XCJcbiAgICAgICAgY2FuY2VsVGV4dD1cIlByZXZpb3VzXCJcbiAgICAgICAgb2tCdXR0b25Qcm9wcz17e1xuICAgICAgICAgIGRpc2FibGVkOiAhISFzdGF0ZS5wYWdpbmdDYW1wYWlnbnMubmV4dCxcbiAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBoYW5kbGVDYW1wYWlnblBhZ2luYXRpb24oc3RhdGUucGFnaW5nQ2FtcGFpZ25zLm5leHQpXG4gICAgICAgIH19XG4gICAgICAgIGNhbmNlbEJ1dHRvblByb3BzPXt7XG4gICAgICAgICAgZGlzYWJsZWQ6ICEhIXN0YXRlLnBhZ2luZ0NhbXBhaWducy5wcmV2aW91cyxcbiAgICAgICAgICBvbkNsaWNrOiAoKSA9PlxuICAgICAgICAgICAgaGFuZGxlQ2FtcGFpZ25QYWdpbmF0aW9uKHN0YXRlLnBhZ2luZ0NhbXBhaWducy5wcmV2aW91cylcbiAgICAgICAgfX1cbiAgICAgICAgd2lkdGg9ezEzMDB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWRBY2NvdW50c1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5uZXJcIj5cbiAgICAgICAgICAgIHtzdGF0ZS5jYW1wYWlnbnNcbiAgICAgICAgICAgICAgPyBzdGF0ZS5jYW1wYWlnbnMuZGF0YS5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFjY291bnRcIiBrZXk9e2luZGV4fT5cbiAgICAgICAgICAgICAgICAgICAgPEFkQWNjb3VudFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e2l0ZW0ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ9e2l0ZW0uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgLy8gc3RhdHVzPXtpdGVtLmFjY291bnRfc3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXtoYW5kbGVDYW1wYWlnblNlbGVjdH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgIDogXCJMb2FkaW5nLi4uXCJ9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgIHtgXG4gICAgICAgICAgLm1vZGFsQnV0dG9ucyB7XG4gICAgICAgICAgfVxuICAgICAgICAgICNwZXJmb3JtYW5jZSB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogNzBweDtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5zZWxlY3Rpb24ge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuaXRlbSB7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC5zdGF0cyB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuYWRBY2NvdW50cyB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmFkQWNjb3VudHMgLmlubmVyIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgICAgICB3aWR0aDogOTAlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5hY2NvdW50IHtcbiAgICAgICAgICAgIG1pbi13aWR0aDogMjAlO1xuICAgICAgICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgYH1cbiAgICAgIDwvc3R5bGU+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IHN0YXRlID0+ICh7XG4gIHVzZXI6IHN0YXRlLnVzZXIuY3VycmVudFVzZXIsXG4gIGZiSWQ6IHN0YXRlLnVzZXIuZmJUb2tlbi5mYklkXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpKFBlcmZvcm1hbmNlKTtcbiJdfQ== */\\n/*@ sourceURL=/home/benkissi/projects/getch/getch-frontend-2.0/pages/performance.js */\"));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user.currentUser,\n    fbId: state.user.fbToken.fbId\n  };\n};\n\nexport default connect(mapStateToProps)(Performance);","map":{"version":3,"sources":["/home/benkissi/projects/getch/getch-frontend-2.0/pages/performance.js"],"names":["useState","useEffect","connect","chartData","Table","AdAccount","performanceColumns","truncate","getAdAccounts","fbPaginate","getCampaigns","getAdsets","getAds","getInterestStats","Performance","props","accountModalVisible","campaignModalVisible","selectedRowKeys","pagingAccounts","next","previous","pagingCampaigns","selectedAdAccount","selectedCampaign","selectedAdset","selectedAd","fetchingCampaigns","fetchingAdsets","state","setState","fbId","user","console","log","require","Column","chart","document","getElementById","data","xField","yField","padding","title","visible","text","forceFit","render","fetchAdAccounts","id","setModalVisible","fetchCampaigns","fetchAdsets","fetchAds","fetchStats","status","modalName","prevState","setCampaignsModal","modalVisible","xToken","adAccounts","paging","accountId","res","campaigns","campaignId","adsets","fetchingAds","adsetId","ads","fetchingStats","adId","handleAccountPagination","page","handleCampaignPagination","onSelectionChange","selectedRows","selectedInterest","map","interest","name","handleAccountSelect","handleCampaignSelect","handleAdsetSelect","value","option","children","handleAdSelect","Option","width","textAlign","input","toLowerCase","indexOf","item","index","disabled","onClick","account_status","mapStateToProps","currentUser","fbToken"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Modal, Button, Select, Row, Col } from \"antd\";\n\nimport { chartData } from \"../utils/table\";\n\nimport Table from \"../components/table\";\nimport AdAccount from \"../components/adAccount\";\nimport { performanceColumns } from \"../utils/table\";\nimport { truncate } from \"../utils/common\"\nimport {\n  getAdAccounts,\n  fbPaginate,\n  getCampaigns,\n  getAdsets,\n  getAds,\n  getInterestStats\n} from \"../api/api\";\n\nfunction Performance(props) {\n  const [state, setState] = useState({\n    accountModalVisible: false,\n    campaignModalVisible: false,\n    selectedRowKeys: null,\n    pagingAccounts: {\n      next: \"\",\n      previous: \"\"\n    },\n    pagingCampaigns: {\n      next: \"\",\n      previous: \"\"\n    },\n    selectedAdAccount: {},\n    selectedCampaign: {},\n    selectedAdset: {},\n    selectedAd: {},\n    fetchingCampaigns: false,\n    fetchingAdsets: false\n  });\n\n  const { fbId, user } = props;\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      console.log(\"on browser\");\n      const { Column } = require(\"@antv/g2plot\");\n\n      const chart = new Column(document.getElementById(\"chart\"), {\n        data: chartData,\n        xField: \"name\",\n        yField: \"value\",\n        padding: \"auto\",\n        title: {\n          visible: true,\n          text: \"Interest stats\"\n        },\n        forceFit: true\n      });\n      console.log(\"el\", document.getElementById(\"chart\"));\n      chart.render();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (state.accountModalVisible) {\n      fetchAdAccounts();\n    }\n  }, [state.accountModalVisible]);\n\n  useEffect(() => {\n    if (state.selectedAdAccount.id) {\n      setModalVisible(false, \"accountModalVisible\");\n      fetchCampaigns();\n    }\n  }, [state.selectedAdAccount]);\n\n  useEffect(() => {\n    if (state.selectedCampaign.id) {\n      fetchAdsets();\n    }\n  }, [state.selectedCampaign]);\n\n  useEffect(() => {\n    if (state.selectedAdset.id) {\n      fetchAds();\n    }\n  }, [state.selectedAdset]);\n\n  useEffect(() => {\n    if (state.selectedAd.id) {\n      fetchStats();\n    }\n  }, [state.selectedAd]);\n\n  const setModalVisible = (status, modalName) => {\n    setState(prevState => ({\n      ...prevState,\n      [modalName]: status\n    }));\n  };\n\n  const setCampaignsModal = modalVisible => {\n    setState(prevState => ({\n      ...prevState,\n      campaignModalVisible: modalVisible\n    }));\n  };\n\n  const fetchAdAccounts = async () => {\n    if (state.accountModalVisible) {\n      console.log(\"fetch ad accounts\");\n      const adAccounts = await getAdAccounts(fbId, user.xToken);\n      console.log(\"AD accoutns\", adAccounts);\n      setState(prevState => ({\n        ...prevState,\n        adAccounts: adAccounts,\n        pagingAccounts: {\n          next: adAccounts.paging.next && adAccounts.paging.next,\n          previous: adAccounts.paging.previous && adAccounts.paging.previous\n        },\n        selectedAdAccount: {},\n        selectedCampaign: {},\n        selectedAdset: {}\n      }));\n    }\n  };\n\n  const fetchCampaigns = async () => {\n    setState(prevState => ({\n      ...prevState,\n      fetchingCampaigns: true,\n      selectedCampaign: {}\n    }));\n    const accountId = state.selectedAdAccount.id;\n    const res = await getCampaigns(accountId, user.xToken);\n    setState(prevState => ({\n      ...prevState,\n      campaigns: res,\n      fetchingCampaigns: false,\n      pagingCampaigns: {\n        next: res.paging && res.paging.next,\n        previous: res.paging && res.paging.previous\n      }\n    }));\n  };\n\n  const fetchAdsets = async () => {\n    setState(prevState => ({\n      ...prevState,\n      fetchingAdsets: true,\n      selectedAdset: {}\n    }));\n    const campaignId = state.selectedCampaign.id;\n    const res = await getAdsets(campaignId, user.xToken);\n    console.log(\"sets\", res.data);\n    setState(prevState => ({\n      ...prevState,\n      adsets: res,\n      fetchingAdsets: false\n    }));\n  };\n\n  const fetchAds = async () => {\n    setState(prevState => ({\n      ...prevState,\n      fetchingAds: true\n    }));\n    const adsetId = state.selectedAdset.id;\n    const res = await getAds(adsetId, user.xToken);\n    console.log(\"ads\", res);\n    setState(prevState => ({\n      ...prevState,\n      ads: res,\n      fetchingAds: false\n    }));\n  };\n\n  const fetchStats = async () => {\n    setState(prevState => ({\n      ...prevState,\n      fetchingStats: true\n    }));\n\n    const adId = state.selectedAd.id;\n    const res = await getInterestStats(adId, user.xToken);\n    console.log(\"stats\", res);\n  };\n\n  const handleAccountPagination = async page => {\n    const adAccounts = await fbPaginate(page);\n    console.log(\"paginate\", adAccounts);\n    setState(prevState => ({\n      ...prevState,\n      adAccounts: adAccounts,\n      pagingAccounts: {\n        next: adAccounts.paging && adAccounts.paging.next,\n        previous: adAccounts.paging && adAccounts.paging.previous\n      }\n    }));\n  };\n\n  const handleCampaignPagination = async page => {\n    const campaigns = await fbPaginate(page);\n    console.log(\"paginate\", campaigns);\n    setState(prevState => ({\n      ...prevState,\n      campaigns: campaigns,\n      pagingCampaigns: {\n        next: campaigns.paging && campaigns.paging.next,\n        previous: campaigns.paging && campaigns.paging.previous\n      }\n    }));\n  };\n\n  const onSelectionChange = (selectedRowKeys, selectedRows) => {\n    console.log(\"rows\", selectedRows);\n    const selectedInterest = selectedRows.map(interest => {\n      return interest.name;\n    });\n    setState(prevState => ({\n      ...prevState,\n      selectedRowKeys,\n      selectedInterest,\n      selectedRows\n    }));\n  };\n\n  const handleAccountSelect = (id, name) => {\n    setState(prevState => ({\n      ...prevState,\n      selectedAdAccount: {\n        id,\n        name\n      }\n    }));\n  };\n\n  const handleCampaignSelect = (id, name) => {\n    setState(prevState => ({\n      ...prevState,\n      selectedCampaign: {\n        id,\n        name\n      },\n      campaignModalVisible: false\n    }));\n  };\n\n  const handleAdsetSelect = (value, option) => {\n    console.log(\"selected\", option.props.children);\n    setState(prevState => ({\n      ...prevState,\n      selectedAdset: {\n        id: option.props.value,\n        name: option.props.children\n      }\n    }));\n  };\n\n  const handleAdSelect = (value, option) => {\n    setState(prevState => ({\n      ...prevState,\n      selectedAd: {\n        id: option.props.value,\n        name: option.props.children\n      }\n    }));\n  };\n\n  const { Option } = Select;\n  const { selectedRowKeys } = state;\n  return (\n    <div id=\"performance\">\n      <Row gutter={16} style={{ width: \"100%\" }}>\n        <Col span={4}>\n          <div className=\"selection\">\n            <div className=\"button item\">\n              <Button\n                style={{ textAlign: \"left\" }}\n                className=\"modalButtons\"\n                onClick={() => setModalVisible(true, \"accountModalVisible\")}\n                block\n              >\n                {state.selectedAdAccount.name\n                  ? truncate(state.selectedAdAccount.name, 30)\n                  : \"Select Ad Account\"}\n              </Button>\n            </div>\n            <div className=\"select item\">\n              <Button\n                style={{ textAlign: \"left\" }}\n                onClick={() => setCampaignsModal(true)}\n                block\n                loading={state.fetchingCampaigns}\n                disabled={!!!state.selectedAdAccount.name}\n              >\n                {state.selectedCampaign.name\n                  ? truncate(state.selectedCampaign.name, 30)\n                  : \"Select Campaign\"}\n              </Button>\n            </div>\n            <div className=\"select item\">\n              <Select\n                disabled={!!!state.selectedCampaign.name}\n                value={\n                  state.selectedAdset.name\n                    ? state.selectedAdset.name\n                    : \"Select Adset\"\n                }\n                style={{ width: \"100%\" }}\n                placeholder=\"Select Adset\"\n                loading={state.fetchingAdsets}\n                showSearch\n                optionFilterProp=\"children\"\n                onSelect={handleAdsetSelect}\n                filterOption={(input, option) =>\n                  option.props.children\n                    .toLowerCase()\n                    .indexOf(input.toLowerCase()) >= 0\n                }\n              >\n                {state.adsets\n                  ? state.adsets.data.map((item, index) => {\n                      return (\n                        <Option value={item.id} key={index}>\n                          {item.name}\n                        </Option>\n                      );\n                    })\n                  : \"\"}\n              </Select>\n            </div>\n            <div className=\"select item\">\n              <Select\n                disabled={!!!state.selectedAdset.name}\n                style={{ width: \"100%\" }}\n                value={\n                  state.selectedAd.name ? state.selectedAd.name : \"Select Ad\"\n                }\n                placeholder=\"Select ad\"\n                showSearch\n                optionFilterProp=\"children\"\n                onSelect={handleAdSelect}\n                filterOption={(input, option) =>\n                  option.props.children\n                    .toLowerCase()\n                    .indexOf(input.toLowerCase()) >= 0\n                }\n              >\n                {state.ads\n                  ? state.ads.data.map((item, index) => {\n                      return (\n                        <Option value={item.id} key={index}>\n                          {item.name}\n                        </Option>\n                      );\n                    })\n                  : \"\"}\n              </Select>\n            </div>\n          </div>\n        </Col>\n        <Col span={20}>\n          <div className=\"stats\">\n            <div id=\"chart\"></div>\n            <div>\n              <Table\n                columns={performanceColumns}\n                onSelection={onSelectionChange}\n                selectedRowKeys={selectedRowKeys}\n                className=\"table\"\n              />\n            </div>\n          </div>\n        </Col>\n      </Row>\n      <Modal\n        title=\"Select an Ad account\"\n        centered\n        visible={state.accountModalVisible}\n        onOk={() => setModalVisible(false, \"accountModalVisible\")}\n        onCancel={() => setModalVisible(false, \"accountModalVisible\")}\n        okText=\"Next\"\n        cancelText=\"Previous\"\n        okButtonProps={{\n          disabled: !!!state.pagingAccounts.next,\n          onClick: () => handleAccountPagination(state.pagingAccounts.next)\n        }}\n        cancelButtonProps={{\n          disabled: !!!state.pagingAccounts.previous,\n          onClick: () => handleAccountPagination(state.pagingAccounts.previous)\n        }}\n        width={1300}\n      >\n        <div className=\"adAccounts\">\n          <div className=\"inner\">\n            {state.adAccounts\n              ? state.adAccounts.data.map((item, index) => (\n                  <div className=\"account\" key={index}>\n                    <AdAccount\n                      name={item.name}\n                      accountId={item.id}\n                      status={item.account_status}\n                      onSelect={handleAccountSelect}\n                    />\n                  </div>\n                ))\n              : \"Loading...\"}\n          </div>\n        </div>\n      </Modal>\n      <Modal\n        title=\"Select a campaign\"\n        centered\n        visible={state.campaignModalVisible}\n        onOk={() => setCampaignsModal(false, \"campaignModalVisible\")}\n        onCancel={() => setCampaignsModal(false, \"campaignModalVisible\")}\n        okText=\"Next\"\n        cancelText=\"Previous\"\n        okButtonProps={{\n          disabled: !!!state.pagingCampaigns.next,\n          onClick: () => handleCampaignPagination(state.pagingCampaigns.next)\n        }}\n        cancelButtonProps={{\n          disabled: !!!state.pagingCampaigns.previous,\n          onClick: () =>\n            handleCampaignPagination(state.pagingCampaigns.previous)\n        }}\n        width={1300}\n      >\n        <div className=\"adAccounts\">\n          <div className=\"inner\">\n            {state.campaigns\n              ? state.campaigns.data.map((item, index) => (\n                  <div className=\"account\" key={index}>\n                    <AdAccount\n                      name={item.name}\n                      accountId={item.id}\n                      // status={item.account_status}\n                      onSelect={handleCampaignSelect}\n                    />\n                  </div>\n                ))\n              : \"Loading...\"}\n          </div>\n        </div>\n      </Modal>\n      <style jsx>\n        {`\n          .modalButtons {\n          }\n          #performance {\n            display: flex;\n            position: relative;\n            margin-top: 70px;\n            width: 100%;\n          }\n\n          .selection {\n            display: flex;\n            flex-direction: column;\n            border: 1px solid #ccc;\n            border-radius: 4px;\n            height: auto;\n            padding: 10px;\n          }\n\n          .item {\n            margin-bottom: 30px;\n            width: 100%;\n          }\n          .stats {\n            display: flex;\n            flex-direction: column;\n          }\n\n          .adAccounts {\n            display: flex;\n            justify-content: center;\n          }\n\n          .adAccounts .inner {\n            display: flex;\n            flex-wrap: wrap;\n            width: 90%;\n          }\n\n          .account {\n            min-width: 20%;\n            margin: 10px;\n          }\n        `}\n      </style>\n    </div>\n  );\n}\n\nconst mapStateToProps = state => ({\n  user: state.user.currentUser,\n  fbId: state.user.fbToken.fbId\n});\n\nexport default connect(mapStateToProps)(Performance);\n"]},"metadata":{},"sourceType":"module"}